(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/graphics/graphicsUtils":1731,"esri/views/2d/engine/webgl/util/vvFlagUtils":1824,"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":1825,"esri/views/2d/engine/webgl/util/BidiText":1841,"esri/views/2d/engine/webgl/fontUtils":1879,"esri/core/MapPool":1880,"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":1881,"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":1882,"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":1883,"esri/views/2d/engine/webgl/mesh/templates/ComputedGlyph":1896,"esri/views/2d/engine/webgl/mesh/templates/util":1897,"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":1898,"esri/views/2d/engine/webgl/TextShapingNew":1899,"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":1901,"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":1902,"esri/views/2d/engine/webgl/collisions/LayerCollisionInfo":1947,"esri/views/2d/engine/webgl/util/Matcher":1967,"esri/views/2d/engine/webgl/mesh/MeshData":1968,"esri/views/2d/engine/webgl/mesh/VertexVector":1969,"esri/views/2d/engine/webgl/mesh/factories/VVFactory":1970,"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":1971,"esri/views/2d/engine/webgl/mesh/templates/GlyphGroup":1972,"esri/geometry/support/boundsUtils":1973,"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":1974,"esri/views/2d/engine/webgl/mesh/Tesselator":1975,"esri/core/libs/libtess/libtess":1976,"esri/views/2d/engine/webgl/util/Lock":1977})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1731:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(7),r(27),r(38),r(43),r(44),r(20),r(1973),r(59),r(142),r(66),r(66),r(1606),r(1879),r(1733),r(1899),r(1748),r(1841)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f,d,_,m,v){function y(e){switch(e){case"left":return 1;case"right":return-1;case"center":case"justify":return 0}}function x(e){switch(e){case"top":return-1;case"middle":return 0;case"baseline":case"bottom":return 1}}function T(e){switch(e){case"left":return 0;case"right":return 1;case"center":case"justify":return.5}}function E(e,t,r){if(!r)return e;var n=v.bidiText(t.text),s=n[0],o=n[1],a=T(t.horizontalAlignment||"center"),l=y(t.horizontalAlignment||"center"),u=r.glyphMosaicItems,h=new _([u],g.TEXT_MAX_WIDTH,g.TEXT_LINE_HEIGHT,g.TEXT_SPACING,[0,.5*-g.TEXT_LINE_HEIGHT],.5*(1-l),0,a).getShaping(s,o),p=f.getFontDecorationTop(t.font);isNaN(p)||_.addDecoration(h,p);var c=_.getBox(h),d=i.pt2px(t.font.size)/C;return e[0]=d*c.x,e[1]=d*c.y,e[2]=d*c.width,e[3]=d*c.height,e}function w(e,t,r,n,s,o){var a,l,u=i.pt2px(n.xoffset),p=i.pt2px(n.yoffset),g=d.C_DEG_TO_RAD*n.angle;switch(n.type){case"simple-marker":var f=n;a=l=i.pt2px(f.size);break;case"picture-marker":var _=n;a=i.pt2px(_.width),l=i.pt2px(_.height)}var m=.5*a,v=.5*l;if(0!==g){var y=Math.cos(g),x=Math.sin(g),T=m*x+v*y;m=m*y+v*x,v=T}var E=s*(u+m),w=s*(p+v),b=Math.sqrt(E*E+w*w),L=h.normalizeMapX(t-b,o),S=h.normalizeMapX(t+b,o);if(L>S){var G=c.getInfo(o);if(G){var N=G.valid;L=N[0],S=N[1]}}return e[0]=L,e[1]=r-b,e[2]=S,e[3]=r+b,e}function b(e,t,r,n,s,o,a){var l=y(n.horizontalAlignment||"center"),u=x(n.verticalAlignment||"middle"),p=o*i.pt2px(n.xoffset),g=o*i.pt2px(n.yoffset),f=d.C_DEG_TO_RAD*n.angle,_=o*s[2],m=o*s[3];if(0!==f){var v=Math.cos(f),T=Math.sin(f),E=_*T+m*v;_=_*v+m*T,m=E}var w=p+l*_+_,b=g+u*m+m,L=Math.sqrt(w*w+b*b),S=h.normalizeMapX(t-L,a),G=h.normalizeMapX(t+L,a);if(S>G){var N=c.getInfo(a);if(N){var V=N.valid;S=V[0],G=V[1]}}return e[0]=S,e[1]=r-L,e[2]=G,e[3]=r+L,e}function L(e,t){return Math.ceil((e-t)/(2*t))}function S(e,t,r){var i;if(Array.isArray(e)){if((i=e[0])>t){var n=L(i,t);e[0]=i+n*(-2*t)}else if(i<r){n=L(i,r);e[0]=i+n*(-2*r)}}else if((i=e.x)>t){n=L(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){n=L(i,r);e=e.clone().offset(n*(-2*r),0)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureClosedRings=function(e){if(u.isPolygon(e))for(var t=0,r=e.rings;t<r.length;t++){var i=r[t];i.length<3||i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0])}},t.getBounds=function(e,t,r,i,n,s,o,a,h){if(!i)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;var p=r.symbol;if(!p&&s&&(p=s.getSymbol(r,{scale:a})),!p)return e;var c=i;if(!u.isPoint(c)){l.getBoundsXY(e,c);var g=t[0];0===g&&(g=function(e,t){var r=0;switch(e.type){case"simple-fill":case"picture-fill":var i=e.outline;if(!i)return 0;r=i.width;break;case"simple-line":r=e.width;break;case"simple-marker":r=e.size;break;case"picture-marker":r=Math.max(e.width,e.height);break;case"text":var n=[0,0,0,0];E(n,e,t),r=Math.max(n[0],n[1])}return r}(p,n),t[0]=g);var f=o*g/2;return e[0]-=f,e[1]-=f,e[2]+=f,e[3]+=f,e}var d=c.x,_=c.y;switch(p.type){case"simple-marker":case"picture-marker":w(e,d,_,p,o,h);break;case"text":0===t[2]&&0===t[3]&&E(t,p,n),b(e,d,_,p,t,o,h)}return e},t.isMarkerSymbol=function(e){return"simple-marker"===e||"picture-marker"===e||"text"===e},t.graphicGeometryToNumber=function(e){switch(e.geometry.type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0},t.getXAnchorDirection=y,t.getYAnchorDirection=x,t.getJustification=T;var G=n.vec2f32.create(),N=n.vec2f32.create(),V=n.vec2f32.create(),I=n.vec2f32.create(),M=n.vec2f32.create(),O=n.vec2f32.create(),R=n.vec2f32.create();t.isPointOnPolyline=function(e,t,r,i){n.vec2.set(V,t,r);for(var s,o,a,l,u,h,p,c,g,f=e.paths,d=1/0,_=0;_<f.length;_++){var m=f[_];if(!(m.length<2))for(var v=1;v<m.length;v++)s=m[v-1][0],a=m[v-1][1],o=m[v][0],l=m[v][1],u=Math.min(s,o)-i,h=Math.min(a,l)-i,p=Math.max(s,o)+i,c=Math.max(a,l)+i,t<u||t>p||r<h||r>c||(n.vec2.set(G,s,a),n.vec2.set(N,o,l),n.vec2.subtract(I,N,G),n.vec2.subtract(M,G,V),n.vec2.scale(O,I,n.vec2.dot(I,M)/n.vec2.dot(I,I)),n.vec2.subtract(R,M,O),d>(g=n.vec2.dot(R,R))&&(d=g))}return Math.sqrt(d)<=i},t.getMarkerSymbolBounds=function(e,t,r,n,s,o){var a,l,u=s*i.pt2px(n.xoffset),h=s*i.pt2px(n.yoffset),p=d.C_DEG_TO_RAD*n.angle;switch(n.type){case"simple-marker":var c=n;a=l=.5*s*i.pt2px(c.size);break;case"picture-marker":var g=n;a=.5*s*i.pt2px(g.width),l=.5*s*i.pt2px(g.height)}var f=d.C_DEG_TO_RAD*o,_=Math.cos(f),m=Math.sin(f);if(t+=u*_-h*m,r+=u*m+h*_,0!==p){var v=Math.cos(p),y=Math.sin(p),x=a*y+l*v;a=a*v+l*y,l=x}return e[0]=t-a,e[1]=r-l,e[2]=t+a,e[3]=r+l,e},t.getTextSymbolBounds=function(e,t,r,n,s,o,a){var l=x(n.verticalAlignment||"baseline"),u="baseline"===(n.verticalAlignment||"baseline"),h=o*i.pt2px(n.xoffset),p=o*i.pt2px(n.yoffset),c=i.pt2px(n.font.size)/24,g=4*c,f=u?25*c:s[1]+(1-l)*s[3]*.5,_=d.C_DEG_TO_RAD*a,m=Math.cos(_),v=Math.sin(_),y=h*v+p*m,T=t+(h*m-p*v)+o*s[0],E=r+y+o*(f+g);return e[0]=T,e[1]=E-o*s[3],e[2]=T+o*s[2],e[3]=E,e},t.normalizeCentralMeridian=function(e){var t,i,n,o,a,l,u,h,c,g=null;if(!e)return r.resolve(null);if(t=e.spatialReference,i=p.getInfo(t),n=t.isWebMercator,o=U[l=n?102100:4326].maxX,a=U[l].minX,u=U[l].plus180Line,h=U[l].minus180Line,!i)return r.resolve(e);if("mesh"===e.type)c=e;else if("point"===e.type)c=S(e.clone(),o,a);else if("multipoint"===e.type){var f=e.clone();f.points=f.points.map(function(e){return S(e,o,a)}),c=f}else if("extent"===e.type){var d=(_=e.clone())._normalize(!1,!1,i);c=d.rings?new s(d):d}else if(e.extent){var _,v=L((_=e.extent).xmin,a)*(2*o),y=0===v?e.clone():function(e,t){for(var r=0,i=function(e){return u.isPolygon(e)?e.rings:e.paths}(e);r<i.length;r++)for(var n=0,s=i[r];n<s.length;n++){var o=s[n];o[0]+=t}return e}(e.clone(),v);_.offset(v,0),_.intersects(u)&&_.xmax!==o?g=y:_.intersects(h)&&_.xmin!==a?g=y:c=y}else c=e.clone();if(null!==g){var x=(new m.CutVertical).cut(g,o);return r.resolve(x)}return r.resolve(c)};var C=24,U={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new o({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:a.WebMercator}),minus180Line:new o({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new o({paths:[[[180,-180],[180,180]]],spatialReference:a.WebMercator}),minus180Line:new o({paths:[[[-180,-180],[-180,180]]],spatialReference:a.WebMercator})}}}.apply(null,i))||(e.exports=n)},1824:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1582),r(1850)],void 0===(n=function(e,t,r,i){function n(e,t){void 0===t&&(t=!1);var i=r.WGLVVFlag.SIZE_FIELD_STOPS|r.WGLVVFlag.SIZE_MINMAX_VALUE|r.WGLVVFlag.SIZE_SCALE_STOPS|r.WGLVVFlag.SIZE_UNIT_VALUE,n=(e&(r.WGLVVTarget.FIELD_TARGETS_OUTLINE|r.WGLVVTarget.MINMAX_TARGETS_OUTLINE|r.WGLVVTarget.SCALE_TARGETS_OUTLINE|r.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return t?i&n:i&~n}function s(e){var t=n(e,!1);return e&(r.WGLVVFlag.COLOR|r.WGLVVFlag.OPACITY|r.WGLVVFlag.ROTATION|t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getVVFlags=function(e){if(!e)return r.WGLVVFlag.NONE;for(var t=0,n=0,s=e;n<s.length;n++){var o=s[n];if("size"===o.type){var a=i.getTypeOfSizeVisualVariable(o);t|=a,"outline"===o.target&&(t|=a<<4)}else"color"===o.type?t|=r.WGLVVFlag.COLOR:"opacity"===o.type?t|=r.WGLVVFlag.OPACITY:"rotation"===o.type&&(t|=r.WGLVVFlag.ROTATION)}return t},t.getSizeFlagsMask=n,t.getMarkerVVFlags=s,t.getFillVVFlags=function(e){return e&(r.WGLVVFlag.COLOR|r.WGLVVFlag.OPACITY)},t.getLineVVFlags=function(e,t){if(t)return e&n(e,!0);var i=n(e,!1);return e&(r.WGLVVFlag.COLOR|r.WGLVVFlag.OPACITY|i)},t.getTextVVFlags=function(e){return s(e)},t.getLabelVVFlags=function(e){return e&n(e,!1)}}.apply(null,i))||(e.exports=n)},1825:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){}}.apply(null,i))||(e.exports=n)},1841:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1900)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r;t.bidiText=function(e){return i.hasBidiChar(e)?(t="rtl"===i.checkContextual(e)?"IDNNN":"ICNNN",[i.bidiTransform(e,t,"VLYSN"),!0]):[e,!1];var t}}.apply(null,i))||(e.exports=n)},1879:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFullyQualifiedFontName=function(e){var t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblic":return"-italic"}return""}(e);return function(e){var t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}(e.family)+(0<t.length?t:"-regular")},t.getFontDecorationTop=function(e){switch(e.decoration.toLowerCase()){case"underline":return-26;case"line-through":return-18}return NaN}}.apply(null,i))||(e.exports=n)},1880:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(84)],void 0===(n=function(e,t,r){var i=function(){function e(e,t){void 0===e&&(e=50),void 0===t&&(t=50),this._pool=new r(Map,!1,function(e){return e.clear()},t,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return n.acquire()},e.release=function(e){return n.release(e)},e}(),n=new i(100);return i}.apply(null,i))||(e.exports=n)},1881:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(8),r(9),r(1967)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var s=i.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");t.createMatcher=function(e,t,i,o){switch(e.type){case"simple":return n.default.fromSimpleRenderer(e,t,i);case"unique-value":case"uniqueValue":return n.MapMatcher.fromUVRenderer(e,t,i,o);case"class-breaks":case"classBreaks":return n.IntervalMatcher.fromCBRenderer(e,t,i,o);default:return s.error(new r("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}}}.apply(null,i))||(e.exports=n)},1882:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(8),r(9),r(59),r(107),r(1606),r(1582),r(1744),r(1947),r(1968),r(1969),r(1970),r(1971),r(1901),r(1902),r(1824)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f,d,_,m){Object.defineProperty(t,"__esModule",{value:!0});var v=n.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),y={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null},x=function(){function e(e,t,r,n,s,o,l,u,p,c){var d=this;if(this._labelsDebugTemplate=null,this._labelsDebugVVEval=null,this._materials=l,this._geometryType=e,this._idField=t,this._pixelRatio=s,this._vvFlags=m.getVVFlags(r),this._vvFactory=new g.default(r,n),this._vvBuf=new ArrayBuffer(16),this._vvBufU32=new Uint32Array(this._vvBuf),this._vvBufF32=new Float32Array(this._vvBuf),this._templateStore=u,p)if(a.DEBUG_LABELS&&(this._labelsDebugVVEval=r&&h.createLabelVVEvaluator(r)),this._validateLabelingInfo(p)){var _=m.getLabelVVFlags(this._vvFlags);this._labelTemplates=p.map(function(e){return f.default.fromLabelClass(d._materials,_,e,s,c)})}else v.error(new i("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer."))}return Object.defineProperty(e.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templates",{get:function(){return this._templateStore},enumerable:!0,configurable:!0}),e.prototype.createMeshData=function(e){var t=new Array(5),r=new Array,i=!!m.getMarkerVVFlags(this._vvFlags),n=!!m.getFillVVFlags(this._vvFlags),s=!!m.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),o=!!m.getTextVVFlags(this._vvFlags),u="esriGeometryPolyline"===this._geometryType?a.HEURISTIC_GLYPHS_PER_LINE:a.HEURISTIC_GLYPHS_PER_FEATURE;return t[l.WGLGeometryType.MARKER]=new c.VertexVectors(l.WGLGeometryType.MARKER,i,e),t[l.WGLGeometryType.FILL]=new c.VertexVectors(l.WGLGeometryType.FILL,n,e),t[l.WGLGeometryType.LINE]=new c.VertexVectors(l.WGLGeometryType.LINE,s,e),t[l.WGLGeometryType.TEXT]=new c.VertexVectors(l.WGLGeometryType.TEXT,o,e),t[l.WGLGeometryType.LABEL]=new c.VertexVectors(l.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?u:0),new p.default(r,t,this._materials)},e.prototype.analyze=function(e,t,r,i){for(var n=e,s=0,o=n;s<o.length;s++){var a=o[s],l=-1;null!=a.symbol?l=this._templateStore.createTemplateGroup(a.symbol,null,this._materials,0):t&&(l=t.match(a,r,i)),a.groupId=l}return this._templateStore.finalize().then(function(){return n})},e.prototype.write=function(e,t,r,i,n,o,a){var l=this._templateStore.getTemplateGroup(t.groupId),h=e,p=t.attributes[this._idField],c=new u(p),g=!!o&&!!this._labelTemplates&&o.has(p);if(l&&(t.geometry||t.centroid)){this._vvFactory.computeVV(this._vvBufF32,t,r,i);var f=c.displayRecords,d=t.insertAfter;void 0!==d&&(c.insertAfter=d);var _=this._geometryType;_||(_=null!=t.centroid?"esriGeometryPolygon":s.getJsonType(t.geometry));for(var m=0,v=l;m<v.length;m++){var y=v[m],x=h.get(y.geometryType);y.writeMesh(f,x,_,p,t,this._pixelRatio,this._vvBufU32)}if(g){var T=this._getLabelReference(l),E=o.get(p);this._writeLabelMesh(c,h,p,t,a,E,T,n,_)}h.pushDisplayObject(c)}},e.prototype._hasBadLabelClass=function(e,t){var r=e.labelPlacement,n=y[t];if(!n)return v.error(new i("mapview-labeling:unsupported-geometry-type","Unable to create labels for WebGL Feature Layer, "+t+" is not supported")),!0;if(!n.some(function(e){return e===r})){var s=n[0];r&&v.warn("Found invalid label placement type "+r+" for "+t+". Defaulting to "+s),e.labelPlacement=s}return!1},e.prototype._validateLabelingInfo=function(e){var t=this;return!e.some(function(e){return t._hasBadLabelClass(e,t._geometryType)})},e.prototype._getLabelReference=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(i instanceof _.default)return i}return null},e.prototype._writeLabelMesh=function(e,t,r,i,n,s,o,l,u){for(var h=e.displayRecords,p=[],c=this._pixelRatio,g=this._vvBufU32,f=0;f<s.length;f++){var d=s[f],_=d.id,m=d.text,v=d.rtl,y=this._labelTemplates[_],x=t.get(y.geometryType),T=n.get(y.symbolId).glyphMosaicItems;y.bindReferenceTemplate(o),y.bindTextInfo(T,m,v),y.writeMesh(h,x,u,r,i,c,g,l,p)}e.metrics=p,a.DEBUG_LABELS&&this._debugLabels(e,t)},e.prototype._debugLabels=function(e,t){for(var r=e.displayRecords,i=e.id,n=0,s=e.metrics;n<s.length;n++){var o=s[n],a=o.boxes?o.boxes.concat([o.bounds]):[o.bounds];this._labelsDebugVVEval&&o.computeOffset(this._labelsDebugVVEval);for(var l=0,u=a;l<u.length;l++){var h=u[l],p=o.anchor[0]+o.offsetX+h.center[0],c=o.anchor[1]+o.offsetY+h.center[1],g={geometry:{paths:[[[p-h.width/2,c+h.height/2],[0,-h.height],[h.width,0],[0,h.height],[-h.width,0]]]},attributes:{}},f=this._getLabelDebugTemplate(),d=t.get(f.geometryType);f.writeMesh(r,d,"esriGeometryPolyline",i,g,this._pixelRatio,null)}}},e.prototype._getLabelDebugTemplate=function(){return this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate()),this._labelsDebugTemplate},e.prototype._createLabelsDebugTemplate=function(){var e=new o({style:"solid",width:1,color:[255,0,0,1]});return d.default.fromSimpleLine(this._materials,0,e,null,this._pixelRatio)},e}();t.default=x}.apply(null,i))||(e.exports=n)},1883:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(114),r(83),r(103),r(8),r(9),r(7),r(1582),r(1974),r(1901),r(1902),r(1898),r(1841),r(1977),r(1963),r(1824)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f,d,_){Object.defineProperty(t,"__esModule",{value:!0});var m=o.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),v=new Array,y=new n.SimpleFillSymbol({color:"black",outline:null}),x=new n.SimpleMarkerSymbol({size:"14px",color:"black",outline:null}),T=new n.SimpleLineSymbol({color:"black",width:"2px"});function E(e,t){var r=e.length;return e.push(null),t.then(function(t){return e[r]=t}),e}var w=function(){function e(e,t){this._idCounter=0,this._templateIdCounter=0,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._pixelRatio=1,this._lock=new f.default,this._fetchResource=e,this._pixelRatio=t}return Object.defineProperty(e.prototype,"_markerError",{get:function(){return this._errorTemplates.marker[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_fillError",{get:function(){return this._errorTemplates.fill[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lineError",{get:function(){return this._errorTemplates.line[0]},enumerable:!0,configurable:!0}),e.prototype.createTemplateGroup=function(e,t,r,i){this._initErrorTemplates(r);var n=this._hashSymbol(e);if(!this._symbolToTemplate.has(n)){var s=new Array;t&&this._createMeshTemplates(s,r,t,i,this._pixelRatio,!0),this._createMeshTemplates(s,r,e,i,this._pixelRatio,!1);var o=this._createGroupId();this._idToTemplateGroup.set(o,s),this._symbolToTemplate.set(n,o)}return this._symbolToTemplate.get(n)},e.prototype.getTemplateGroup=function(e){return this._idToTemplateGroup.has(e)?this._idToTemplateGroup.get(e):v},e.prototype.finalize=function(){return this._fetchQueue.length||this._lock.isHeld()?f.withLock(this._lock,this._fetchAllQueuedResources.bind(this)):a.resolve()},e.prototype._initErrorTemplates=function(e){if(!this._errorTemplates){var t=this._pixelRatio,r=this._createMeshTemplates([],e,y,0,t,!1),i=this._createMeshTemplates([],e,x,0,t,!1),n=this._createMeshTemplates([],e,T,0,t,!1);this._errorTemplates={fill:r,marker:i,line:n}}},e.prototype._fetchAllQueuedResources=function(){var e=this;if(!this._fetchQueue.length)return a.resolve();var t=this._fetchQueue;return this._fetchQueue=[],this._fetchResource(t).then(function(t){for(var r=0,i=t;r<i.length;r++){var n=i[r],s=n.id,o=n.mosaicItem;e._idToResolver.get(s)(o),e._idToResolver.delete(s)}}).catch(function(r){"cancel"===r.dojoType?e._fetchQueue=e._fetchQueue.concat(t):m.error(new s("mapview-template-store","Unable to fetch requested texture resources",r))})},e.prototype._createGroupId=function(){return this._idCounter++},e.prototype._createTemplateId=function(){return this._templateIdCounter++},e.prototype._getCodepoints=function(e){for(var t=g.bidiText(e.text)[0],r=[],i=0;i<t.length;i++)r.push(t.charCodeAt(i));return r},e.prototype._getMosaicItem=function(e){var t=this,r=this._createTemplateId(),i="text"===e.type&&this._getCodepoints(e),n=a.create(function(e){return t._idToResolver.set(r,e)});return this._fetchQueue.push({symbol:e.toJSON(),id:r,glyphIds:i}),n},e.prototype._hashSymbol=function(e){return e.id?e.id:JSON.stringify(e)},e.prototype._createSMS=function(e,t,n,s){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().spriteMosaicItem,o=_.getMarkerVVFlags(n),d.ok(r,m)?[2,p.default.fromSimpleMarker(e,o,t,r,s)]:[2,this._markerError]}})})},e.prototype._createPMS=function(e,t,n,s){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().spriteMosaicItem,o=_.getMarkerVVFlags(n),d.ok(r,m)?[2,p.default.fromPictureMarker(e,o,t,r,s)]:[2,this._markerError]}})})},e.prototype._createSFS=function(e,t,n,s,o){return r(this,void 0,void 0,function(){var r,a;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().spriteMosaicItem,a=_.getFillVVFlags(n),d.ok(r,m)?[2,u.default.fromSimpleFill(e,a,t,r,s,o)]:[2,this._fillError]}})})},e.prototype._createPFS=function(e,t,n,s,o){return r(this,void 0,void 0,function(){var r,a;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().spriteMosaicItem,a=_.getFillVVFlags(n),d.ok(r,m)?[2,u.default.fromPictureFill(e,a,t,r,s,o)]:[2,this._fillError]}})})},e.prototype._createSLS=function(e,t,n,s,o){return r(this,void 0,void 0,function(){var r,a;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().spriteMosaicItem,a=_.getLineVVFlags(n,o),d.ok(r,m)?[2,h.default.fromSimpleLine(e,a,t,r,s)]:[2,this._lineError]}})})},e.prototype._createTS=function(e,t,n,s){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return[4,this._getMosaicItem(t)];case 1:return r=i.sent().glyphMosaicItems,o=_.getTextVVFlags(n),[2,c.default.fromText(e,o,t,s,r)]}})})},e.prototype._createMeshTemplates=function(e,t,r,i,n,s){if(-1!==r.type.indexOf("3d"))return m.error("3D symbols are not supported with MapView"),e;switch(r.type){case l.EsriSymbolTypeKebab.SIMPLE_MARKER:return E(e,this._createSMS(t,r,i,n));case l.EsriSymbolTypeKebab.PICTURE_MARKER:return E(e,this._createPMS(t,r,i,n));case l.EsriSymbolTypeKebab.SIMPLE_FILL:var o=r;return E(e,this._createSFS(t,o,i,n,s)),o.outline&&E(e,this._createSLS(t,o.outline,i,n,!0)),e;case l.EsriSymbolTypeKebab.PICTURE_FILL:var a=r;return E(e,this._createPFS(t,a,i,n,s)),a.outline&&E(e,this._createSLS(t,a.outline,i,n,!0)),e;case l.EsriSymbolTypeKebab.SIMPLE_LINE:return E(e,this._createSLS(t,r,i,n,!1));case l.EsriSymbolTypeKebab.TEXT:return E(e,this._createTS(t,r,i,n));default:return m.error("Unable to create mesh template for unknown symbol type: "+r.type),e}},e}();t.default=w}.apply(null,i))||(e.exports=n)},1896:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(38),r(1606),r(1640),r(1895)],void 0===(n=function(e,t,r,i,n,s){Object.defineProperty(t,"__esModule",{value:!0});var o=r.vec2f32.create(),a=function(){function e(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f){this.anchorX=e,this.anchorY=t,this.angle=r,this.bounds=i,this.minZoom=n,this.maxZoom=s,this.materialId=o,this.vertexOffsetUpperLeft=a,this.vertexOffsetUpperRight=l,this.vertexOffsetLowerLeft=u,this.vertexOffsetLowerRight=h,this.texFontSizeUpperLeft=p,this.texFontSizeUpperRight=c,this.texFontSizeLowerLeft=g,this.texFontSizeLowerRight=f}return e.from=function(t,a,l,u,h,p,c,g,f,d,_,m,v,y,x){void 0===y&&(y=!1),void 0===x&&(x=!1);var T=g.rect,E=g.metrics,w=-1===h?255:Math.floor(180*h/Math.PI/360*254),b=Math.round(T.x/4),L=Math.round(T.y/4),S=b+Math.round(T.width/4),G=L+Math.round(T.height/4),N=-24-E.top,V=E.left,I=-E.top,M=T.width,O=T.height;!f&&(x||(N=0),V=4,M=E.width);var R=t+V,C=x?a+I:a+N,U=R+M,A=C,P=R,D=C+O,F=U,k=D,B=P+E.width,z=D-E.height,W=E.width*m/24,q=E.height*m/24;if(_){var H=o,j=_;r.vec2.transformMat2d(H,r.vec2.set(H,R,C),j),R=H[0],C=H[1],r.vec2.transformMat2d(H,r.vec2.set(H,U,A),j),U=H[0],A=H[1],r.vec2.transformMat2d(H,r.vec2.set(H,P,D),j),P=H[0],D=H[1],r.vec2.transformMat2d(H,r.vec2.set(H,F,k),j),F=H[0],k=H[1],r.vec2.transformMat2d(H,r.vec2.set(H,B,z),j),B=H[0],z=H[1]}return new e(0|l,0|u,w,y?new s.default(B,z,W+i.COLLISION_BOX_PADDING,q+i.COLLISION_BOX_PADDING):null,p,c,d,n.i1616to32(8*R,8*C),n.i1616to32(8*U,8*A),n.i1616to32(8*P,8*D),n.i1616to32(8*F,8*k),n.i8888to32(b,L,m,v),n.i8888to32(S,L,m,v),n.i8888to32(b,G,m,v),n.i8888to32(S,G,m,v))},e}();t.default=a}.apply(null,i))||(e.exports=n)},1897:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return Math.sqrt(e*e+t*t)}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},t.len=r,t.normalize=function(e){var t=r(e[0],e[1]);e[0]/=t,e[1]/=t},t.dist=function(e,t){return r(e[0]-t[0],e[1]-t[1])}}.apply(null,i))||(e.exports=n)},1898:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(8),r(9),r(27),r(38),r(1743),r(1606),r(1582),r(1879),r(1640),r(1899),r(1734),r(1895),r(1896),r(1825),r(1841),r(1731),r(515)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f,d,_,m,v,y){Object.defineProperty(t,"__esModule",{value:!0});var x=n.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),T=255,E=o.mat2df32.create(),w=o.vec2f32.create(),b=function(e){function t(t,r,i){var n=e.call(this)||this;return n.geometryType=u.WGLGeometryType.TEXT,n.vvFlags=0,n._xOffset=s.pt2px(i.xoffset),n._yOffset=s.pt2px(i.yoffset),n._decorationTop=h.getFontDecorationTop(i.font),n._color=0|(i.color&&a.premultiplyAlphaRGBA(i.color)),n._haloColor=0|(i.haloColor&&a.premultiplyAlphaRGBA(i.haloColor)),n._haloSize=Math.min(Math.floor(5*s.pt2px(s.toPt(i.haloSize||0))),127),n._size=Math.min(Math.round(s.pt2px(i.font.size)),127),n._scale=n._size/24,n._angle=i.angle||0,n._justify=v.getJustification(i.horizontalAlignment||"center"),n._xAlignD=v.getXAnchorDirection(i.horizontalAlignment||"center"),n._yAlignD=-v.getYAnchorDirection(i.verticalAlignment||"baseline"),n._baseline="baseline"===(i.verticalAlignment||"baseline"),n._materialStore=t,n.vvFlags=r,n.symbolId=i.id,n}return r(t,e),t.fromText=function(e,r,i,n,s){var o=new t(e,r,i),a=m.bidiText(i.text),l=a[0],u=a[1];return o.bindTextInfo(s,l,u),o._computeGlyphs(o._shapedGlyphs,o._shapedBox),o},t.prototype.bindTextInfo=function(e,t,r){var i=this._computeShaping(e,this._justify).getShaping(t,r);isNaN(this._decorationTop)||c.addDecoration(i,this._decorationTop),this._shapedGlyphs=i,this._shapedBox=c.getBox(i)},t.prototype.writeMesh=function(e,t,r,n,s,o,a){var l,u,h=this._computedGlyphs;switch(r){case"esriGeometryPoint":for(var p=s.geometry,c=p.x,g=p.y,f=0,d=h;f<d.length;f++)(L=d[f]).anchorX=c,L.anchorY=g;return void this._writeVertices(e,t,n,a,h,0,0);case"esriGeometryPolygon":if(s.centroid){for(var _=s.centroid,m=(c=_.x,g=_.y,0),v=h;m<v.length;m++)(L=v[m]).anchorX=c,L.anchorY=g;return void this._writeVertices(e,t,n,a,h,0,0)}case"esriGeometryMultipoint":c=0,g=0;for(var y=0,T=s.geometry.points;y<T.length;y++){var E=T[y];c+=E[0],g+=E[1];for(var w=0,b=h;w<b.length;w++){var L;(L=b[w]).anchorX=c,L.anchorY=g}this._writeVertices(e,t,n,a,h,0,0)}return;default:l="Unable to handle geometryType: "+r,void 0===u&&(u="mapview-processing"),x.error(new i(u,l))}},t.prototype._computeGlyphs=function(e,t){for(var r=new Array(e.length),i=this._computeGlyphTransform(t),n=0;n<e.length;n++){var s=e[n],o=s.x,a=s.y,l=s.codePoint,u=s.glyphMosaicItem,h=this._materialStore.createGlyphMaterial(u,this.geometryType,this.vvFlags);r[n]=d.default.from(o,a,0,0,-1,0,25,u,l,h,i,this._size,this._haloSize,!1,!0)}this._computedGlyphs=r},t.prototype._createBounds=function(e,t){var r,i,n=e.width/2,s=e.height/2,a=t[4],u=t[5];if(this._angle){var h=o.vec2f32.fromValues(-n,-s),p=o.vec2f32.fromValues(n,-s),c=o.vec2f32.fromValues(-n,s),g=o.vec2f32.fromValues(n,s);o.vec2.transformMat2d(h,h,t),o.vec2.transformMat2d(p,p,t),o.vec2.transformMat2d(c,c,t),o.vec2.transformMat2d(g,g,t);for(var d=1/0,_=1/0,m=0,v=0,y=0,x=[h,p,c,g];y<x.length;y++){var T=x[y];d=Math.min(T[0],d),m=Math.max(T[0],m),_=Math.min(T[1],_),v=Math.max(T[1],v)}r=m-d,i=v-_}else r=e.width*this._scale,i=e.height*this._scale;var E=r+l.COLLISION_BOX_PADDING,w=i+l.COLLISION_BOX_PADDING;return new f.default(a,u,E,w)},t.prototype._computeShaping=function(e,t){return new c([e],l.TEXT_MAX_WIDTH,l.TEXT_LINE_HEIGHT,l.TEXT_SPACING,[0,.5*-l.TEXT_LINE_HEIGHT],.5*(1-this._xAlignD),0,t)},t.prototype._computeGlyphTransform=function(e){var t=this._scale,r=this._angle*y.C_DEG_TO_RAD,i=o.mat2d.identity(E);o.mat2d.rotate(i,i,r),o.mat2d.translate(i,i,o.vec2.set(w,this._xOffset,-this._yOffset)),o.mat2d.scale(i,i,o.vec2.set(w,t,t));var n=this._baseline?25:e.y+(1-this._yAlignD)*e.height*.5;return o.mat2d.translate(i,i,o.vec2.set(w,-4,-4-n)),i},t.prototype._getOffset=function(e){var t=this.vvFlags?9:5;return e.length/t},t.prototype._writeVertices=function(e,t,r,i,n,s,o){this._writeHalos(e,t,r,i,n,s,o),this._writeText(e,t,r,i,n,s,o)},t.prototype._writeHalos=function(e,t,r,i,n,s,o){var a=t.indexVector,l=t.get("geometry"),u=this._getOffset(l),h=0;if(this._haloSize)for(var c=0;c<n.length;c++,h+=4){var f=n[c],d=p.i1616to32(2*f.anchorX+1,2*f.anchorY),_=n[c].materialId,m=this._materialStore.get(_),v=null==s?Math.floor(10*f.minZoom):s,y=null==o?Math.floor(10*f.maxZoom):o,x=new g(r,this.geometryType,_,v,y);x.vertexFrom=u+h,x.indexFrom=a.length,this._writeVertex(x,t,r,d,this._haloColor,f,m,i),this._writeIndices(x,a,u+h),e.push(x)}},t.prototype._writeText=function(e,t,r,i,n,s,o){for(var a=t.indexVector,l=t.get("geometry"),u=this._getOffset(l),h=0,c=0;c<n.length;c++,h+=4){var f=n[c],d=p.i1616to32(2*f.anchorX,2*f.anchorY),_=n[c].materialId,m=this._materialStore.get(_),v=null==s?Math.floor(10*f.minZoom):s,y=null==o?Math.floor(10*f.maxZoom):o,x=new g(r,this.geometryType,_,v,y);x.vertexFrom=u+h,x.indexFrom=a.length,this._writeVertex(x,t,r,d,this._color,f,m,i),this._writeIndices(x,a,u+h),e.push(x)}},t.prototype._writeVertex=function(e,t,r,i,n,s,o,a){var l=t.get("geometry"),u=t.get("visibility");l.push(i),l.push(r),l.push(n),l.push(s.vertexOffsetUpperLeft),l.push(s.texFontSizeUpperLeft),this._writeVV(l,a,o),u.push(T),l.push(i),l.push(r),l.push(n),l.push(s.vertexOffsetUpperRight),l.push(s.texFontSizeUpperRight),this._writeVV(l,a,o),u.push(T),l.push(i),l.push(r),l.push(n),l.push(s.vertexOffsetLowerLeft),l.push(s.texFontSizeLowerLeft),this._writeVV(l,a,o),u.push(T),l.push(i),l.push(r),l.push(n),l.push(s.vertexOffsetLowerRight),l.push(s.texFontSizeLowerRight),this._writeVV(l,a,o),u.push(T),e.vertexCount+=4},t.prototype._writeVV=function(e,t,r){r.materialKeyInfo.hasVV()&&(e.push(t[u.VVType.SIZE]),e.push(t[u.VVType.COLOR]),e.push(t[u.VVType.OPACITY]),e.push(t[u.VVType.ROTATION]))},t.prototype._writeIndices=function(e,t,r){t.push(r+0),t.push(r+1),t.push(r+2),t.push(r+1),t.push(r+3),t.push(r+2),e.indexCount+=6},t}(_.default);t.default=b}.apply(null,i))||(e.exports=n)},1899:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1726)],void 0===(n=function(e,t,r){return function(){function e(e,t,r,i,n,s,o,a){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=i,this._offset=n,this._hAnchor=s,this._vAnchor=o,this._justify=a}return e.prototype.getShaping=function(e,t){for(var r=this._letterSpacing,i=this._lineHeight,n=this._justify,s=this._maxWidth,o=[],a=0,l=0,u=0,h=0,p=-1,c=0,g=-1,f=e.length,d=0;d<f;d++){var _=e.charCodeAt(d);if(10!==_){for(var m=void 0,v=0,y=this._glyphItems;v<y.length&&!(m=y[v][_]);v++);if(m){if(o.push({codePoint:_,x:a,y:l,glyphMosaicItem:m}),a+=m.metrics.advance+r,0<s&&s<a&&0<=g){var x=g+1;E=o[x].x,c=Math.max(E,c);for(var T=x;T<o.length;T++)t?o[T].y-=i:o[T].y+=i,o[T].x-=E;n&&this._applyJustification(o,h,g),t?l-=i:l+=i,a-=E,++u,h=x,g=-1}++p,32===_&&(g=o.length-1)}}else{if(d===f-1)continue;if(h<=p){var E=(w=o[p]).x+w.glyphMosaicItem.metrics.advance;c=Math.max(E,c),n&&this._applyJustification(o,h,p),h=o.length}t?l-=i:l+=i,a=0,++u}}if(h<=p){var w,b=(w=o[p]).x+w.glyphMosaicItem.metrics.advance;c=Math.max(c,b),n&&this._applyJustification(o,h,p)}if(0<o.length){var L=(n-this._hAnchor)*c,S=(-this._vAnchor*(u+1)+.5)*i;t&&u&&(S+=u*i),L+=this._offset[0],S+=this._offset[1];for(var G=0,N=o;G<N.length;G++){var V=N[G];V.x+=L,V.y+=S}}return o},e.getBox=function(e){if(!e.length)return null;for(var t=1/0,r=1/0,i=-1/0,n=-1/0,s=0,o=e;s<o.length;s++){var a=o[s],l=a.glyphMosaicItem.metrics,u=l.height,h=l.left,p=l.top,c=l.width,g=a.x+h,f=a.y-p,d=g+c,_=f+u;t=Math.min(t,g),i=Math.max(i,d),r=Math.min(r,f),n=Math.max(n,_)}return{x:t,y:r,width:i-t,height:n-r}},e.addDecoration=function(e,t){var i=e.length;if(0!==i){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,s=e[0].y,o=1;o<i;o++){var a=e[o];if(a.y!==s){var l=e[o-1].x+e[o-1].glyphMosaicItem.metrics.left+e[o-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:s,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:l-n,height:2,left:0,top:t,advance:0},page:0}}),s=a.y,n=a.x+a.glyphMosaicItem.metrics.left}}var u=e[i-1].x+e[i-1].glyphMosaicItem.metrics.left+e[i-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:s,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:u-n,height:2,left:0,top:t,advance:0},page:0}})}},e.prototype._applyJustification=function(e,t,r){for(var i=e[r],n=i.glyphMosaicItem.metrics.advance,s=(i.x+n)*this._justify,o=t;o<=r;o++)e[o].x-=s},e}()}.apply(null,i))||(e.exports=n)},1901:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(9),r(27),r(1743),r(1606),r(1582),r(1582),r(1852),r(1640),r(1748),r(1579),r(1734),r(1825)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f){Object.defineProperty(t,"__esModule",{value:!0});var d=i.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),_=65535,m=u.allocTriangles(20),v=u.allocTriangles(20),y=[u.allocExtrudeVectors(),u.allocExtrudeVectors()],x=u.allocExtrudeVectors(),T=o.TILE_SIZE+8,E=31,w=new u.Tessellator({distanceAlongCorrection:!0}),b=new p.TileClipper(0,0,0,1,8);b.setExtent(o.TILE_SIZE);var L=function(e){function t(t,r,i,n,s,o,l,u,h,p,c,g){var f=e.call(this)||this;f.capType=o,f.joinType=l,f.fillColor=u,f.tl=h,f.br=p,f.hasPattern=c,f.isDashed=g,f.geometryType=a.WGLGeometryType.LINE;var d=1/s;return f.halfWidth=0<n?.5*(n+d):0,f._materialStore=t,f.vvFlags=r,f.materialId=f._materialStore.createSpriteMaterial(i,f.geometryType,r),f}return r(t,e),t.fromSimpleLine=function(e,r,i,o,a){var l=i.color,u="solid"!==i.style&&"none"!==i.style,p=c.getCapType(i.cap||"round",u),g=c.getJoinType(i.join||"round"),f=l&&"none"!==i.style&&s.premultiplyAlphaRGBA(l)||0;if("none"===i.style&&(f=0),!o)return new t(e,r,o,n.pt2px(i.width),a,p,g,f,0,0,!1,u);var d=o.rect,_=o.width,m=o.height,v=d.x+1,y=d.y+1,x=d.x+1+_,T=d.y+1+m,E=h.i1616to32(v,y),w=h.i1616to32(x,T);return new t(e,r,o,n.pt2px(i.width),a,p,g,f,E,w,!0,u)},t.fromPictureLineSymbol=function(e,t,r,i){return d.error("PictureLineSymbol support does not exist!"),null},t.prototype.writeMesh=function(e,t,r,i,n,s,o){if(this.vvFlags&l.WGLVVFlag.COLOR||0!==this.fillColor){var a=this._materialStore.get(this.materialId),u=t.indexVector,h=t.get("geometry"),p=t.get("visibility"),c=this.halfWidth,f=new g(i,this.geometryType,this.materialId),_=this._getOffset(h,a);switch(f.vertexFrom=_,f.indexFrom=u.length,r){case"esriGeometryPolyline":var m=n.geometry.paths;if(0===(v=this._clipLines(m)).length)return;return this._write(f,u,h,p,_,i,c,v,a,o),void e.push(f);case"esriGeometryPolygon":var v,y=n.geometry.rings;if(0===(v=this._clipLines(y)).length)return;return this._write(f,u,h,p,_,i,c,v,a,o),void e.push(f);default:d.error("Unable to handle geometryType: "+r)}}},t.prototype._clipLines=function(e){for(var t=[],r=!1,i=0;i<e.length;){var n=[],s=e[i];b.reset(2);var o=s[0],a=o[0],l=o[1];if(r)b.moveTo(a,l);else{if(a<-8||T<a||l<-8||T<l){r=!0;continue}n.push({x:a,y:l})}for(var u=!1,h=s.length,p=1;p<h;++p)if(a+=s[p][0],l+=s[p][1],r)b.lineTo(a,l);else{if(a<-8||T<a||l<-8||T<l){u=!0;break}n.push({x:a,y:l})}if(u)r=!0;else{if(r){var c=b.resultWithStarts();if(c)for(var g=0,f=c;g<f.length;g++){var d=f[g];t.push(d)}}else t.push({line:n,start:0});i++,r=!1}}return t},t.prototype._getOffset=function(e,t){var r=t.materialKeyInfo.hasVV()?11:8;return e.length/r},t.prototype._write=function(e,t,r,i,n,s,o,a,l,h){for(var p=0,c=0,g=a;c<g.length;c++){var f=g[c],d=f.line,v=f.start;if(!(d.length<2))for(var T=d[0],E=d[d.length-1],b=E.x-T.x,L=E.y-T.y,S=b*b+L*L<1e-6,G=v%_,N=y[1],V=0;V<d.length;V++){var I=d[V],M=N===y[V%2]?y[(V+1)%2]:y[V%2],O=0===V,R=V===d.length-1;if(R&&S&&!this.hasPattern?u.copyExtrudeVectors(M,x):(this._computeExtrudeVectors(M,V,d,S),p+=this._writeVertices(r,i,s,o,I.x,I.y,M,G,p,l,h),null==M.capCenter||S&&R||this._writePieIndices(e,t,n,M),S&&O&&!this.hasPattern&&u.copyExtrudeVectors(x,M)),O||this._writeBridgeIndices(e,t,n,N,M),!R){var C=d[V+1],U=[C.x-I.x,C.y-I.y],A=u.length(U),P=[U[0]/A,U[1]/A],D=G+A;if(_<D){var F=(_-G)/(D-G),k=I.x+(C.x-I.x)*F,B=I.y+(C.y-I.y)*F,z=N;w.buttCap(z,P,P),p+=this._writeVertices(r,i,s,o,k,B,z,_,p,l,h),w.bridge(m,M,z),this._writeBridgeIndices(e,t,n,M,z),w.buttCap(z,P,P),G=D-_}else G=D,N=M}}}e.vertexCount=p},t.prototype._writeVertices=function(e,t,r,i,n,s,o,a,l,u,p){for(var c=0,g=h.i1616to32(n,s),f=o.vectors,d=f.items,_=f.count;c<_;++c){var m=d[c].vector,v=m[0],y=m[1],x=d[c].texCoords,T=x[0],w=x[1],b=d[c].direction,L=b[0],S=b[1],G=h.i1616to32(a,E*i),N=h.i8888to32(Math.round(E*v),Math.round(E*y),Math.round(E*T),Math.round(E*w)),V=h.i8888to32(Math.round(E*L),Math.round(E*S),0,0);e.push(g),e.push(r),e.push(this.fillColor),e.push(N),e.push(G),e.push(this.tl),e.push(this.br),e.push(V),this._writeVV(e,p,u),t.push(255),d[c].base={index:l+c,point:[n,s]}}return c},t.prototype._writeVV=function(e,t,r){r.materialKeyInfo.hasVV()&&(e.push(t[a.VVType.SIZE]),e.push(t[a.VVType.COLOR]),e.push(t[a.VVType.OPACITY]))},t.prototype._writeBridgeIndices=function(e,t,r,i,n){w.bridge(m,i,n);for(var s=0;s<m.count;++s){var o=m.items[s];t.push(r+o.v1.base.index),t.push(r+o.v2.base.index),t.push(r+o.v3.base.index),e.indexCount+=3}},t.prototype._writePieIndices=function(e,t,r,i){w.pie(v,i);for(var n=0;n<v.count;++n){var s=v.items[n];t.push(r+s.v1.base.index),t.push(r+s.v2.base.index),t.push(r+s.v3.base.index),e.indexCount+=3}},t.prototype._computeExtrudeVectors=function(e,t,r,i){var n=r[t],s=[void 0,void 0],o=[void 0,void 0];if(0<t&&t<r.length-1){var a=r[(t+r.length-1)%r.length],l=r[(t+1)%r.length];u.normalize(s,[n.x-a.x,n.y-a.y]),u.normalize(o,[l.x-n.x,l.y-n.y])}else if(0===t)if(l=r[(t+1)%r.length],u.normalize(o,[l.x-n.x,l.y-n.y]),i){var h=r[r.length-2];u.normalize(s,[n.x-h.x,n.y-h.y])}else s=o;else{if(t!==r.length-1)return void console.error("Vertex index 'i' out of range.");if(a=r[(t+r.length-1)%r.length],u.normalize(s,[n.x-a.x,n.y-a.y]),i){var p=r[1];u.normalize(o,[p.x-n.x,p.y-n.y])}else o=s}i||0!==t?i||t!==r.length-1?this._computeJoinExtrudeVectors(e,s,o):this._computeCapExtrudeVectors(e,s,o,u.CapPosition.END):this._computeCapExtrudeVectors(e,s,o,u.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,i){switch(this.capType){case a.CapType.BUTT:return void w.buttCap(e,t,r);case a.CapType.ROUND:var n=u.getNumberOfSlices(Math.PI),s=i===u.CapPosition.START?-1:1;return void w.roundCap(e,t,r,i,n,s);case a.CapType.SQUARE:return void(this.isDashed?w.squareCapForDashedLines(e,t,r,i):w.squareCap(e,t,r,i));default:return d.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),void w.buttCap(e,t,r)}},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var i=u.getRads(t,r);if(i>Math.PI-.05)w.rectJoin(e,t,r);else if(this.joinType===a.JoinType.MITER||i<.1)i<.05?w.fastMiterJoin(e,t,r):i<u.MITER_SAFE_RADS?w.miterJoin(e,t,r):w.bevelJoin(e,t,r,u.SYSTEM_MAG_LIMIT);else if(this.joinType===a.JoinType.BEVEL)w.bevelJoin(e,t,r,1);else if(this.joinType===a.JoinType.ROUND){var n=u.getNumberOfSlices(i);i<2.3?n<2||i<.5?w.bevelJoin(e,t,r,1):w.roundJoin(e,t,r,n):w.unitRoundJoin(e,t,r,n)}},t}(f.default);t.default=L}.apply(null,i))||(e.exports=n)},1902:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(9),r(27),r(38),r(1743),r(1606),r(1582),r(1640),r(1734),r(1825)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p){Object.defineProperty(t,"__esModule",{value:!0});var c=i.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate"),g=255,f=function(e){function t(t,r,i,n,o,a,h,p,c,g,f){var d=e.call(this)||this;d.geometryType=l.WGLGeometryType.MARKER;var _=s.vec2f32.create(),m=s.mat2df32.create();h=0===h?0:Math.max(h,2),p=0===p?0:Math.max(p,2);var v=f.sdf?.5:1;s.mat2d.translate(m,m,s.vec2f32.fromValues(v*i,v*-n)),o&&s.mat2d.rotate(m,m,3.14159265359/180*o),d._materialStore=t,d.vvFlags=r,d._materialId=t.createSpriteMaterial(f,d.geometryType,r),d._fillColor=a,d._outlineColor=c,d._sizeOutlineWidth=u.i8888to32(h,p,g,0);var y=Math.round(f.rect.x/4)-128,x=Math.round(f.rect.y/4)-128,T=y+Math.round(f.rect.width/4),E=x+Math.round(f.rect.height/4);return s.vec2.set(_,-.5*h,-.5*p),s.vec2.transformMat2d(_,_,m),d._offsetAndTexUpperLeft=u.i8888to32(_[0],_[1],y,x),s.vec2.set(_,.5*h,-.5*p),s.vec2.transformMat2d(_,_,m),d._offsetAndTexUpperRight=u.i8888to32(_[0],_[1],T,x),s.vec2.set(_,-.5*h,.5*p),s.vec2.transformMat2d(_,_,m),d._offsetAndTexBottomLeft=u.i8888to32(_[0],_[1],y,E),s.vec2.set(_,.5*h,.5*p),s.vec2.transformMat2d(_,_,m),d._offsetAndTexBottomRight=u.i8888to32(_[0],_[1],T,E),d.height=p,d.width=h,d.xOffset=i,d.yOffset=n,d}return r(t,e),t.fromPictureMarker=function(e,r,i,s,o){var l=Math.round(n.pt2px(i.width)),u=Math.round(n.pt2px(i.height)),h=a.PICTURE_FILL_COLOR;return new t(e,r,Math.round(n.pt2px(i.xoffset||0)),Math.round(n.pt2px(i.yoffset||0)),i.angle,h,l,u,0,0,s)},t.fromSimpleMarker=function(e,r,i,s,a){var l=o.premultiplyAlphaRGBA(i.color),u=Math.round(n.pt2px(i.size)),h=u,p=Math.round(n.pt2px(i.xoffset||0)),c=Math.round(n.pt2px(i.yoffset||0)),g=i.outline,f=0|(g&&g.color&&o.premultiplyAlphaRGBA(g.color)),d=0|(g&&g.width&&Math.round(n.pt2px(g.width)));return new t(e,r,p,c,i.angle,l,u,h,f,d,s)},t.prototype.writeMesh=function(e,t,r,i,n,s,o){var a=this._materialStore.get(this._materialId),l=t.indexVector,u=t.get("geometry"),p=t.get("visibility"),g=new h(i,this.geometryType,this._materialId),f=this._getOffset(u,a);switch(e.push(g),g.vertexFrom=f,g.indexFrom=l.length,r){case"esriGeometryPoint":var d=n.geometry,_=d.x,m=d.y;return this._writeVertices(g,u,p,i,this._getPos(_,m),a,o),void this._writeIndices(g,l,f);case"esriGeometryPolyline":var v=n.geometry.paths;return void this._writeMany(g,l,u,p,f,i,v[0],a,o);case"esriGeometryPolygon":var y=n.centroid;return void(y?(_=y.x,m=y.y,this._writeVertices(g,u,p,i,this._getPos(_,m),a,o),this._writeIndices(g,l,f)):c.error("Tried to render polygon geometries as markers, but found no centroid!"));case"esriGeometryMultipoint":var x=n.geometry.points;return void this._writeMany(g,l,u,p,f,i,x,a,o);case"esriGeometryEnvelope":default:c.error("Unable to handle geometryType: "+r)}},t.prototype._getPos=function(e,t){return u.i1616to32(e,t)},t.prototype._writeMany=function(e,t,r,i,n,s,o,a,l){for(var u=0,h=0,p=0,c=0,g=o;c<g.length;c++){var f=g[c],d=f[0],_=f[1];this._writeVertices(e,r,i,s,this._getPos(d+u,_+h),a,l),this._writeIndices(e,t,n+p),u+=d,h+=_,p+=4}},t.prototype._getOffset=function(e,t){var r=t.materialKeyInfo.hasVV()?10:6;return e.length/r},t.prototype._writeVertices=function(e,t,r,i,n,s,o){t.push(n),t.push(this._offsetAndTexUpperLeft),t.push(i),t.push(this._fillColor),t.push(this._outlineColor),t.push(this._sizeOutlineWidth),this._writeVV(t,o,s),r.push(g),t.push(n),t.push(this._offsetAndTexUpperRight),t.push(i),t.push(this._fillColor),t.push(this._outlineColor),t.push(this._sizeOutlineWidth),this._writeVV(t,o,s),r.push(g),t.push(n),t.push(this._offsetAndTexBottomLeft),t.push(i),t.push(this._fillColor),t.push(this._outlineColor),t.push(this._sizeOutlineWidth),this._writeVV(t,o,s),r.push(g),t.push(n),t.push(this._offsetAndTexBottomRight),t.push(i),t.push(this._fillColor),t.push(this._outlineColor),t.push(this._sizeOutlineWidth),this._writeVV(t,o,s),r.push(g),e.vertexCount+=4},t.prototype._writeVV=function(e,t,r){r.materialKeyInfo.hasVV()&&(e.push(t[l.VVType.SIZE]),e.push(t[l.VVType.COLOR]),e.push(t[l.VVType.OPACITY]),e.push(t[l.VVType.ROTATION]))},t.prototype._writeIndices=function(e,t,r){var i=r;t.push(i+0),t.push(i+1),t.push(i+2),t.push(i+1),t.push(i+3),t.push(i+2),e.indexCount+=6},t}(p.default);t.default=f}.apply(null,i))||(e.exports=n)},1947:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(27),r(92)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){return e.order-t.order},o=function(e,t){return e.index-t.index},a=r.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");function l(e){return function(t){return i.pt2px(e.getSize(t))}}function u(e){if(!e)return null;for(var t=0,r=e;t<r.length;t++){var i=r[t];if("size"===i.type)return l(i)}return null}t.createLabelVVEvaluator=u;var h=function(){function e(e,t,r,i){var s=this;this._vvHandle=null;var o=e.geometryType,a=e.labelingInfo,l=e.renderer;this.vvEval=u("visualVariables"in l&&l.visualVariables),this._vvHandle=e.watch("visualVariables",function(e){s.vvEval=u(e)});var h=a.map(function(e){return r=i,s=!!(t=e).minScale,o=!!t.maxScale,a=s&&r.scaleToZoom(t.minScale)||0,l=o&&r.scaleToZoom(t.maxScale)||255,{minZoom:n.clamp(Math.floor(10*a),0,255),maxZoom:n.clamp(Math.floor(10*l),0,255)};var t,r,s,o,a,l});this.geometryType=o,this.index=t,this.order=r,this.zoomRanges=h}return e.prototype.hasVV=function(){return!!this.vvEval},e.prototype.allOrNothing=function(){return!("polyline"===this.geometryType)},e.prototype.destroy=function(){this._vvHandle.remove()},e.create=function(t,r,i,n){for(var o=i.sort(s),a=!1,l=-1,u=0,h=o;u<h.length;u++){var p=h[u];!a&&p.order>r&&(l=p.index,a=!0),a&&p.index++}return a||(l=o.length),new e(t,l,r,n)},e.delete=function(e,t){for(var r=t.sort(o),i=e+1;i<r.length;i++)t[i].index--;t[e].destroy(),t.splice(e,1)},e.find=function(e,t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.index===e)return n}return a.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!"),null},e}();t.default=h}.apply(null,i))||(e.exports=n)},1967:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(9),r(1579),r(1824)],void 0===(n=function(e,t,r,i,n,s){Object.defineProperty(t,"__esModule",{value:!0});var o=i.getLogger("esri/views/2d/engine/webgl/util/Matcher"),a=function(){function e(){this._defaultResult=null}return e.fromSimpleRenderer=function(t,r,i){var n=t.getSymbols(),o=t.visualVariables,a=s.getVVFlags(o),l=new e;if(n.length){var u=i.createTemplateGroup(n[0],null,r,a);l.setDefault(u)}return l},e.prototype.size=function(){return 1},e.prototype.getDefault=function(){return this._defaultResult},e.prototype.setDefault=function(e){this._defaultResult=e},e.prototype.match=function(e,t,r){return this.getDefault()},e}(),l=function(e){function t(t,r,i,s,o){var a=e.call(this)||this;return a._intervals=[],a._isMaxInclusive=r,s?a._getValue=n.createArcadeFunction(s,o):t&&t.length?a._getValue="function"==typeof t?(a._field=null,t):(a._field=t,a._normalizationInfo=i,a._getValueFromField.bind(a)):a._field=null,a}return r(t,e),t.fromCBRenderer=function(e,r,i,n){for(var o=e.isMaxInclusive,a=e.visualVariables,l=e.valueExpression,u=e.normalizationField,h=e.normalizationTotal,p=e.normalizationType,c=s.getVVFlags(a),g=new t(e.field,o,{normalizationField:u,normalizationTotal:h,normalizationType:p},l,n),f=e.backgroundFillSymbol,d=0,_=e.classBreakInfos;d<_.length;d++){var m=_[d],v=m.symbol,y=i.createTemplateGroup(v,f,r,c),x={min:m.minValue,max:m.maxValue};g.add(x,y)}var T=e.defaultSymbol;if(T){var E=i.createTemplateGroup(T,f,r,c);g.setDefault(E)}return g},t.prototype.add=function(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort(function(e,t){return e.interval.min-t.interval.min})},t.prototype.size=function(){return e.prototype.size.call(this)+this._intervals.length},t.prototype.match=function(e,t,r){if(!this._getValue)return this.getDefault();var i=this._getValue(e,t,r);if(!i&&(null==i||isNaN(i)))return this.getDefault();for(var n=0;n<this._intervals.length;n++){var s=this._intervals[n],o=s.interval,a=s.result,l=i>=o.min,u=this._isMaxInclusive?i<=o.max:i<o.max;if(l&&u)return a}return this.getDefault()},t.prototype._needsNormalization=function(){var e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||e.normalizationType)},t.prototype._getValueFromField=function(e){var t=e.attributes[this._field];if(!this._needsNormalization())return t;var r=this._normalizationInfo,i=r.normalizationField,n=r.normalizationTotal,s=r.normalizationType,a=!!i&&e.attributes[i];if(s)switch(s){case"field":return a?t/a:void 0;case"log":return Math.log(t)*Math.LOG10E;case"percent-of-total":return t/n*100;default:return void o.error("Found unknown normalization type: "+s)}else o.error("Normalization is required, but no type was set!")},t}(t.default=a);t.IntervalMatcher=l;var u=function(e){function t(t,r,i,s){var o=e.call(this)||this;return o._resultsMap=new Map,i?o._getValue=n.createArcadeFunction(i,s):t&&t.length?"function"==typeof t[0]?(o._fields=null,o._getValue=t[0]):(o._fields=t,o._seperator=r||"",o._getValue=o._getValueFromFields.bind(o)):o._fields=null,o}return r(t,e),t.fromUVRenderer=function(e,r,i,n){var o=e.uniqueValueInfos,a=e.visualVariables,l=s.getVVFlags(a),u=e.fieldDelimiter,h=e.valueExpression,p=[e.field];e.field2&&p.push(e.field2),e.field3&&p.push(e.field3);for(var c=e.backgroundFillSymbol,g=new t(p,u,h,n),f=0,d=o;f<d.length;f++){var _=d[f],m=i.createTemplateGroup(_.symbol,c,r,l);g.add(_.value,m)}if(e.defaultSymbol){var v=i.createTemplateGroup(e.defaultSymbol,c,r,l);g.setDefault(v)}return g},t.prototype.add=function(e,t){this._resultsMap.set(e.toString(),t)},t.prototype.size=function(){return e.prototype.size.call(this)+this._resultsMap.size},t.prototype.match=function(e,t,r){if(!this._getValue)return this.getDefault();var i=this._getValue(e,t,r);if(!i&&null==i)return this.getDefault();var n=i.toString();return this._resultsMap.has(n)?this._resultsMap.get(n):this.getDefault()},t.prototype._getValueFromFields=function(e){for(var t=[],r=0,i=this._fields;r<i.length;r++){var n=i[r],s=e.attributes[n];t.push(s)}return t.join(this._seperator)},t}(a);t.MapMatcher=u}.apply(null,i))||(e.exports=n)},1968:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1725),r(1817)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.displayObjects=e,this.vertexVectorsMap=t,this._materials=r}return Object.defineProperty(e.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(var e=0;e<this.vertexVectorsMap.length;e++)this._vertexBuffersMap[e]=this.vertexVectorsMap[e].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this.vertexVectorsMap[e]},e.prototype.pushDisplayObject=function(e){this.displayObjects.push(e)},e.prototype.encode=function(e,t){var n=r.serializeList(new i.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),s=this._materials.serialize(new i.default(Uint32Array)).buffer(),o={};t.push(n),t.push(s);for(var a=0;a<this.vertexVectorsMap.length;a++){var l=this.vertexVectorsMap[a];o[a]={},l.transfer(o[a],t)}e.displayObjects=n,e.materialStore=s,e.vertexBuffersMap=o,this.destroy()},e.prototype.destroy=function(){this.vertexVectorsMap=null,this.displayObjects=null},e.prototype._guessSize=function(){for(var e=this.displayObjects,t=Math.min(e.length,4),r=0,i=0;i<t;i++)r=Math.max(r,e[i].displayRecords.length);return 2*(12*e.length+e.length*r*40)},e}();t.default=n}.apply(null,i))||(e.exports=n)},1969:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1579),r(1849),r(1817)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.data=e,this.stride=t,this.vertexCount=0}return e.prototype.transfer=function(e,t){var r=this.data.buffer();e.vertexCount=this.vertexCount,e.data=r,e.stride=this.stride,t.push(r)},e}();t.default=s;var o=function(){function e(e,t,i){this.geometryType=e,this.indexVector=new n.default(Uint32Array,i),this.namedVectors={};var o=r.getStrides(e,t);for(var a in o){var l=o[a],u=void 0;switch(l%4){case 0:case 2:u=new n.default(Uint32Array,l/4*i);break;case 1:case 3:u=new n.default(Uint8Array,l*i)}this.namedVectors[a]=new s(u,l)}}return e.prototype.get=function(e){return this.namedVectors[e].data},e.prototype.transfer=function(e,t){var r=this.indexVector.buffer(),i={};for(var n in t.push(r),this.namedVectors){var s=this.namedVectors[n];i[n]={},s.transfer(i[n],t)}e.geometryType=this.geometryType,e.indexBuffer=r,e.namedBuffers=i,this.destroy()},e.prototype.intoBuffers=function(){var e=i.VertexBuffers.fromVertexVectors(this);return this.destroy(),e},e.prototype.destroy=function(){this.indexVector=null,this.namedVectors=null},e}();t.VertexVectors=o}.apply(null,i))||(e.exports=n)},1970:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(8),r(9),r(1582),r(1579),r(1850)],void 0===(n=function(e,t,r,i,n,s,o){Object.defineProperty(t,"__esModule",{value:!0});var a,l,u=i.getLogger("esri.views.2d.engine.webgl.mesh.VVFactory");(l=a=t.VVError||(t.VVError={}))[l.NONE=0]="NONE",l[l.MISSING_DATA=1]="MISSING_DATA";var h=function(){function e(){this._vvMap=new Map}return e.prototype.set=function(e,t){this._vvMap.set(e,t)},e.prototype.getValue=function(e,t,r,i){return this._vvMap.has(e)?this._vvMap.get(e)(t,r,i):0},e}(),p=function(){function e(e,t){this._createVVFunctionMap(e,t)}return e.prototype.computeVV=function(e,t,r,i){if(!this._vvMap)return a.NONE;var s=this._vvMap.getValue(n.VVType.SIZE,t,r,i),o=this._vvMap.getValue(n.VVType.COLOR,t,r,i),l=this._vvMap.getValue(n.VVType.OPACITY,t,r,i),u=this._vvMap.getValue(n.VVType.ROTATION,t,r,i);return e[n.VVType.SIZE]=this._isErrorVV(s)?NaN:s,e[n.VVType.COLOR]=this._isErrorVV(o)?NaN:o,e[n.VVType.OPACITY]=this._isErrorVV(l)?NaN:l,e[n.VVType.ROTATION]=this._isErrorVV(u)?NaN:u,a.NONE},e.prototype._isErrorVV=function(e){return null===e||isNaN(e)||e===1/0},e.prototype._createVVFunctionMap=function(e,t){if(e&&e.length)for(var r=0,i=e;r<i.length;r++){var n=i[r],o=s.getVVType(n.type),a=this._createGetValueFunction(n,t);a&&(this._vvMap||(this._vvMap=new h),this._vvMap.set(o,a))}},e.prototype._createGetValueFunction=function(e,t){if(s.getVVType(e.type)!==n.VVType.SIZE)return this._createNormalizedFunction(e,t);var r=e,i=o.getTypeOfSizeVisualVariable(r);if(i===n.WGLVVFlag.SIZE_SCALE_STOPS)return null;var a=i===n.WGLVVFlag.SIZE_UNIT_VALUE&&function(e){return o.getVisualVariableSizeValueRepresentationRatio(e,r.valueRepresentation)};return this._createNormalizedFunction(e,t,a)},e.prototype._createNormalizedFunction=function(e,t,i){var n=e.field;if(n){if("string"!=typeof n)return"function"==typeof n?(u.error(new r("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(e){}):(u.error(new r("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof n)),function(e){});var o=e.normalizationField;return o?function(e){if(e.attributes[n]&&e.attributes[o]){var t=e.attributes[n]/e.attributes[o];return i?i(t):t}}:i?function(e){return i(e.attributes[n])}:function(e){return e.attributes[n]}}return e.valueExpression?s.createArcadeFunction(e.valueExpression,t,i):(u.error("Unable to create a normalized function for visual variable: "+e),function(e){})},e}();t.default=p}.apply(null,i))||(e.exports=n)},1971:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(8),r(9),r(38),r(1606),r(1582),r(1640),r(1851),r(1579),r(1966),r(1972),r(1897),r(1898),r(1824),r(92),r(515)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f,d,_,m){Object.defineProperty(t,"__esModule",{value:!0});var v=n.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),y=255,x=l.i8888to32(255,255,255,255),T=s.vec2f32.create(),E=s.mat2df32.create(),w={xOffset:0,yOffset:0,width:0,height:0},b=function(e,t){return void 0===t&&(t="mapview-labeling"),v.error(new i(t,e))},L=function(e){function t(t,r,i,n,s,o){var l=e.call(this,t,r,i)||this;l.geometryType=a.WGLGeometryType.LABEL,l._refTemplate=w;var u=function(e){switch(n){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}(),h=function(e){switch(e){case"above-left":return[-1,-1];case"above-center":case"above-along":return[0,-1];case"above-right":return[1,-1];case"center-left":return[-1,0];case"center-center":case"center-along":return[0,0];case"center-right":return[1,0];case"below-left":return[-1,1];case"below-center":case"below-along":return[0,1];case"below-right":return[1,1];case"always-horizontal":return[0,0];default:b("Found invalid placement type "+e)}}(n),p=h[0],c=h[1];l._justify=(-1*p+1)/2,l._xAlignD=p,l._yAlignD=c,l._xPlacementD=p,l._yPlacementD=c,l._minZoom=s,l._maxZoom=o,l.vvFlags|=u*a.WGLVVFlag.ROTATION;var g=i.font.decoration.toLowerCase();return"underline"===g?l._decorationTop=6:"line-through"===g&&(l._decorationTop=-5),l}return r(t,e),t.fromLabelClass=function(e,r,i,n,s){var o,a,l,u,h,p,c=i.symbol,g=(a=s,l=!!(o=i).minScale&&a.scaleToZoom(o.minScale)||0,_.clamp(l,0,25.5)),f=(h=s,p=!!(u=i).maxScale&&h.scaleToZoom(u.maxScale)||255,_.clamp(p,0,25.5));return new t(e,r,c,i.labelPlacement,g,f)},t.prototype.bindTextInfo=function(e,t,r){var i=this._computeShaping(e,this._justify).getShaping(t,r);isNaN(this._decorationTop)||u.addDecoration(i,this._decorationTop),this._shapedGlyphs=i,this._shapedBox=u.getBox(i)},t.prototype._computeShaping=function(e,t){return new u([e],o.TEXT_MAX_WIDTH,o.TEXT_LINE_HEIGHT,o.TEXT_SPACING,[0,0],.5,.5,t)},Object.defineProperty(t.prototype,"bounds",{get:function(){return this._bounds},enumerable:!0,configurable:!0}),t.prototype.bindReferenceTemplate=function(e){this._refTemplate=e||w},t.prototype._placeGlyphs=function(e,t,r,i){var n=this._size,s=this._haloSize,o=this._shapedBox,a=this._shapedGlyphs,l=this._computeGlyphTransform(o);if("esriGeometryPolyline"===e)for(var u=0;u<r.length;u++){w=r[u];for(var h=this._shapedBox.width*this._scale,p=function(e){return!(e%2)},c=w.order,g=c-(c-1)/2-1,f=g-(g-1)/2-1,d=f-(f-1)/2-1,m=-1===c?0:p(c)?i-.1:p(g)?i-1.1:p(f)?i-2.1:p(d)?i-3.1:0,v=Math.max(i+_.log2((h+48)/w.pathLen),Math.max(m,this._minZoom)),y=0,x=a;y<x.length;y++)S=x[y],G=this._materialStore.createGlyphMaterial(S.glyphMosaicItem,this.geometryType,this.vvFlags),w.place(S,e,t,l,G,n,s,o,i,v,this._maxZoom)}else for(var T=0,E=r;T<E.length;T++)for(var w=E[T],b=0,L=a;b<L.length;b++){var S=L[b],G=this._materialStore.createGlyphMaterial(S.glyphMosaicItem,this.geometryType,this.vvFlags);w.place(S,e,t,l,G,n,s,o,i,this._minZoom,this._maxZoom)}},t.prototype.writeMesh=function(e,t,r,i,n,s,u,h,c){var g=this,f=this._computeAnchors(r,n);if(f.length&&this._shapedGlyphs.length){if(this._placeGlyphs(r,n,f,h),"esriGeometryPolyline"!==r){var _=f[0],m=this._shapedBox,v=this._computeGlyphTransform(m),y=this._createBounds(this._shapedBox,v),x=_.glyphs.get(0),T=x[0],E=T.anchorX,w=T.anchorY,b=Math.floor(10*T.minZoom),L=Math.floor(10*T.maxZoom),S=e.length;x.forEach(function(e){e.minZoom=25.5,e.maxZoom=25.5}),this._writeVertices(e,t,i,u,x,b,L);var G={from:S,count:e.length-S},N=new p.default(i,G,E,w,b),V=Math.max(this._refTemplate.height,this._refTemplate.width),I=d.getSizeFlagsMask(this.vvFlags,!1);return this.vvFlags&I?N.setVV(l.toFloat32(u[a.VVType.SIZE]),V,this._xPlacementD,this._yPlacementD):(N.offsetX=(V/2+o.COLLISION_PLACEMENT_PADDING)*this._xPlacementD,N.offsetY=(V/2+o.COLLISION_PLACEMENT_PADDING)*this._yPlacementD),N.bounds=y,c.push(N),void _.clear()}for(var M=function(r){var n=f[r],s=n.x,o=n.y,a=e.length,l=new p.default(i,{from:a,count:-1},s,o,25.5);n.glyphs.forEach(function(r){for(var a=0,h=r;a<h.length;a++){var p=h[a];if(p.minZoom=Math.max(n.minZoom,p.minZoom),p.bounds){var c=p.anchorX-s,f=p.anchorY-o;p.bounds.center[0]+=c,p.bounds.center[1]+=f,l.add(p.bounds)}}l.bounds&&g._writeHalos(e,t,i,u,r)}),n.glyphs.forEach(function(r){l.bounds&&g._writeText(e,t,i,u,r)}),l.range.count=e.length-a,l.bounds&&c.push(l),n.clear()},O=0;O<f.length;O++)M(O);this._computedGlyphs=[]}},t.prototype._outsideTile=function(e,t){return e<0||512<=e||t<0||512<=t},t.prototype._smoothVertices=function(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var i=[],n=0;i.push(0);for(var s=1;s<r;s++)n+=g.dist(e[s],e[s-1]),i.push(n);t=Math.min(t,.2*n);var o=[];o.push(e[0][0]),o.push(e[0][1]);var a=e[r-1][0],l=e[r-1][1],u=g.sub([0,0],e[0],e[1]);for(g.normalize(u),e[0][0]+=t*u[0],e[0][1]+=t*u[1],g.sub(u,e[r-1],e[r-2]),g.normalize(u),e[r-1][0]+=t*u[0],e[r-1][1]+=t*u[1],s=1;s<r;s++)i[s]+=t;i[r-1]+=t;var h=.5*t;for(s=1;s<r-1;s++){for(var p=0,c=0,f=0,d=s-1;0<=d&&!(i[d+1]<i[s]-h);d--){var _=h+i[d+1]-i[s],m=i[d+1]-i[d],v=i[s]-i[d]<h?1:_/m;if(Math.abs(v)<1e-6)break;var y=v*_-.5*(b=v*v)*m,x=v*m/t,T=e[d+1],E=e[d][0]-T[0],w=e[d][1]-T[1];p+=x/y*(T[0]*v*_+.5*b*(_*E-m*T[0])-b*v*m*E/3),c+=x/y*(T[1]*v*_+.5*b*(_*w-m*T[1])-b*v*m*w/3),f+=x}for(d=s+1;d<r&&!(i[d-1]>i[s]+h)&&(_=h-i[d-1]+i[s],m=i[d]-i[d-1],v=i[d]-i[s]<h?1:_/m,!(Math.abs(v)<1e-6));d++){var b;y=v*_-.5*(b=v*v)*m,x=v*m/t,T=e[d-1],E=e[d][0]-T[0],w=e[d][1]-T[1],p+=x/y*(T[0]*v*_+.5*b*(_*E-m*T[0])-b*v*m*E/3),c+=x/y*(T[1]*v*_+.5*b*(_*w-m*T[1])-b*v*m*w/3),f+=x}o.push(p/f),o.push(c/f)}for(o.push(a),o.push(l),s=0,d=0;s<r;s++)e[s][0]=o[d++],e[s][1]=o[d++]}}},t.prototype._computeLineAnchors=function(e,t,r){for(var i=t.paths,n=this._scale*this._shapedBox.width,s=n/2+r,o=n/2+16,a=this._shapedBox.width*this._scale,l=0;l<i.length;l++){var u=i[l],h=[];h.push(u[0]);for(var p=1;p<u.length;p++){var g=h[p-1],f=g[0],d=g[1];f+=u[p][0],d+=u[p][1],h.push([f,d])}this._smoothVertices(h,a);var _=[];_.push(h[0]);for(var m=1;m<h.length;m++){var v=h[m-1],y=v[0],x=v[1],T=h[m],E=T[0],w=T[1],b=Math.round(E-y),L=Math.round(w-x);_.push([b,L])}u=i[l]=_;var S=this._getPathLength(u);if(!(S<2*o))for(var G=S/2,N=0,V=u[0][0],I=u[0][1],M=1;M<u.length;M++){b=u[M][0],L=u[M][1];var O=Math.sqrt(b*b+L*L);if(0<=(N+=O)-G){var R=N-G,C=O-R,U=C/O,A=V+b*U,P=I+L*U;if(!this._outsideTile(A,P)){var D=new c.default(A,P,U,l,M,V,I,O,S,-1);e.push(D)}var F=-1,k=0;for(k=C-s;0<=k;k-=s){var B=k/O,z=V+b*B,W=I+L*B;F++,this._outsideTile(z,W)||(D=new c.default(z,W,B,l,M,V,I,O,S,F),e.push(D))}N=k+s;for(var q=O-R,H=V,j=I,X=M-1;0!==X;X--){var Z=u[X][0],Y=u[X][1],Q=Math.sqrt(Z*Z+Y*Y);if(s<=N+Q){for(var J=s-N;J<Q;J+=s){var K=J/Q,$=H-Z*K,ee=j-Y*K;F++,J+q+o<G&&!this._outsideTile($,ee)&&(D=new c.default($,ee,1-K,l,X,H-Z,j-Y,Q,S,F),e.push(D))}N=Q-(J-s)}else N+=Q;q+=Q,H-=Z,j-=Y}var te=-1;for(k=C+s;k<=O;k+=s){var re=k/O,ie=V+b*re,ne=I+L*re;te++,this._outsideTile(ie,ne)||(D=new c.default(ie,ne,re,l,M,V,I,O,S,te),e.push(D))}for(H=V+b,j=I+L,N=O-(k-s),q=R,X=M+1;X<u.length;X++){var se=u[X][0],oe=u[X][1],ae=Math.sqrt(se*se+oe*oe);if(s<=N+ae){for(var le=s-N;le<ae;le+=s){var ue=le/ae,he=H+se*ue,pe=j+oe*ue;te++,le+q+o<G&&!this._outsideTile(he,pe)&&(D=new c.default(he,pe,ue,l,X,H,j,ae,S,te),e.push(D))}N=ae-(le-s)}else N+=ae;q+=ae,H+=se,j+=oe}break}V+=b,I+=L}}return e},t.prototype._computeAnchors=function(e,t){var r=[];switch(e){case"esriGeometryPoint":var i=t.geometry,n=i.x,s=i.y,o=new c.default(n,s);return r.push(o),r;case"esriGeometryPolygon":if(t.centroid){var a=t.centroid;return n=a.x,s=a.y,o=new c.default(n,s),r.push(o),r}b("Non-centroid polygon anchor placement not supported");break;case"esriGeometryPolyline":return this._computeLineAnchors(r,t.geometry,376);case"esriGeometryMultipoint":default:return b("Unable to handle geometryType: "+e),r}},t.prototype._getPathLength=function(e){for(var t=0,r=1;r<e.length;r++){var i=e[r][0],n=e[r][1];t+=Math.sqrt(i*i+n*n)}return t},t.prototype._computeGlyphTransform=function(e){var t=this._scale,r=this._angle*m.C_DEG_TO_RAD,i=e.x,n=e.y,o=e.width/2,a=e.height/2,l=i+o,u=n+a,h=this._xAlignD*(o*t),p=this._yAlignD*(a*t),c=h+(this._xOffset+this._refTemplate.xOffset)+l,g=p-(this._yOffset+this._refTemplate.yOffset)-u,f=s.mat2d.identity(E);return s.mat2d.translate(f,f,s.vec2.set(T,c,g)),s.mat2d.scale(f,f,s.vec2.set(T,t,t)),s.mat2d.rotate(f,f,r),f},t.prototype._getOffset=function(e){var t=h.C_LABEL_VERTEX_DEF[0].strideInBytes/4;return e.length/t},t.prototype._writeVertex=function(e,t,r,i,n,s,o,u){var h=t.get("geometry"),p=t.get("visibility"),c=t.get("visibilityRange"),g=u&&u[a.VVType.SIZE]||1,f=Math.min(Math.floor(Math.max(this._refTemplate.width,this._refTemplate.height)),255),d=this._xPlacementD+1,_=this._yPlacementD+1;this._refSymbolAndPlacementOffset=l.i8888to32(s.angle,f,d,_),h.push(i),h.push(n),h.push(s.vertexOffsetUpperLeft),h.push(s.texFontSizeUpperLeft),h.push(this._refSymbolAndPlacementOffset),h.push(g),p.push(y),h.push(i),h.push(n),h.push(s.vertexOffsetUpperRight),h.push(s.texFontSizeUpperRight),h.push(this._refSymbolAndPlacementOffset),h.push(g),p.push(y),h.push(i),h.push(n),h.push(s.vertexOffsetLowerLeft),h.push(s.texFontSizeLowerLeft),h.push(this._refSymbolAndPlacementOffset),h.push(g),p.push(y),h.push(i),h.push(n),h.push(s.vertexOffsetLowerRight),h.push(s.texFontSizeLowerRight),h.push(this._refSymbolAndPlacementOffset),h.push(g),p.push(y),c.push(x),c.push(x),e.vertexCount+=4},t}(f.default);t.default=L}.apply(null,i))||(e.exports=n)},1972:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(8),r(9),r(38),r(1606),r(1896),r(1897),r(92)],void 0===(n=function(e,t,r,i,n,s,o,a,l){Object.defineProperty(t,"__esModule",{value:!0});var u=i.getLogger("esri.views.2d.engine.webgl.GlyphGroup"),h=function(){function e(e,t,r,i,n,s,o,a,l,u){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===s&&(s=-1),void 0===o&&(o=-1),void 0===a&&(a=-1),void 0===l&&(l=0),void 0===u&&(u=-1),this.x=e,this.y=t,this.t=r,this.i=i,this.j=n,this.segmentPosX=s,this.segmentPosY=o,this.segmentLen=a,this.pathLen=l,this.order=u,this._glyphs=new Map,this.minZoom=0}return Object.defineProperty(e.prototype,"glyphs",{get:function(){return this._glyphs},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var r=this._glyphs.get(t);r?r.push(e):this._glyphs.set(t,[e])},e.prototype.clear=function(){this._glyphs.clear()},e.prototype.place=function(e,t,i,n,s,a,l,h,p,c,g){var f,d,_=e.x,m=e.y,v=e.codePoint,y=e.glyphMosaicItem;switch(t){case"esriGeometryPoint":case"esriGeometryPolygon":var x=o.default.from(_,m,this.x,this.y,-1,c,g,y,v,s,n,a,l);return void this.add(x,0);case"esriGeometryPolyline":var T=i.geometry;return this._placeGlyphAlongLine(e,s,T,n,h,a,l,p,c,g,-1),void this._placeGlyphAlongLine(e,s,T,n,h,a,l,p,c,g,1);case"esriGeometryMultipoint":case"esriGeometryEnvelope":return f="Cannot place for unsupported geometryType: "+t,void 0===d&&(d="mapview-labeling"),void u.error(new r(d,f))}},e.prototype._findLabelTheta=function(e,t,r,i){var n=i*t,s=(0*n+i*-e*-1)/(1*r),o=Math.acos(s);return 0<n&&(o=2*Math.PI-o),o},e.prototype._placeGlyphAlongLine=function(e,t,r,i,u,h,p,c,g,f,d){var _=r.paths[this.i],m=_[this.j],v=m[0],y=m[1],x=e.x,T=e.y,E=e.glyphMosaicItem,w=e.codePoint,b=e.glyphMosaicItem.metrics,L=(e.x+b.left+b.width/2)*h/24,S=d*l.sign(L)||1,G=Math.abs(L),N=a.len(v,y),V=this._findLabelTheta(v,y,N,d),I=(S+1)/2,M=-S*(-1*I+this.t)*N,O=n.mat2d.rotate(n.mat2df32.create(),i,-V),R=f,C=48<u.height,U=0===M?R:Math.max(Math.max(c+l.log2(Math.abs(G/M)),0),g);C&&(U=g);var A=C||U<=c&&c<=R&&1===d,P=o.default.from(x,T,this.x,this.y,V,U,R,E,w,t,O,h,p,A);if(this.add(P,this.j),!C)for(var D=this.segmentPosX+I*v,F=this.segmentPosY+I*y,k=U,B=this.j+S;0<B&&B<_.length;B+=S){var z=D,W=F,q=_[B],H=q[0],j=q[1],X=a.len(H,j),Z=this._findLabelTheta(H,j,X,d),Y=n.mat2d.rotate(n.mat2df32.create(),i,-Z),Q=z+-S*H/X*M,J=W+-S*j/X*M,K=k-.1,$=0===(M+=X)?K:Math.max(Math.max(c+l.log2(Math.abs(G/M)),0),g),ee=$<=c&&c<=K&&1===d,te=o.default.from(x,T,Q,J,V,$,K,E,w,t,Y,h,p,ee);if(this.add(te,B),$<c-s.COLLISION_MAX_ZOOM_DELTA){this.minZoom=Math.max($,this.minZoom);break}D+=S*H,F+=S*j,k=$}},e}();t.default=h}.apply(null,i))||(e.exports=n)},1973:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(59)],void 0===(n=function(e,t,r){function i(e){return function(t,r){return null==t?r:null==r?t:e(t,r)}}function n(e,t,r,i){var n=r?3:2;if(!t.length||!t[0].length)return null;for(var s=t[0][0],o=s[0],u=s[1],h=t[0][0],p=h[0],c=h[1],g=void 0,f=void 0,d=void 0,_=void 0,m=0;m<t.length;m++)for(var v=t[m],y=0;y<v.length;y++){var x=v[y],T=x[0],E=x[1];if(o=a(o,T),u=a(u,E),p=l(p,T),c=l(c,E),r&&x.length>2){var w=x[2];g=a(g,w),f=l(f,w)}if(i&&x.length>n){var b=x[n];d=a(g,b),_=l(f,b)}}return r?i?(e[0]=o,e[1]=u,e[2]=g,e[3]=d,e[4]=p,e[5]=c,e[6]=f,e[7]=_,e):(e[0]=o,e[1]=u,e[2]=g,e[3]=p,e[4]=c,e[5]=f,e):i?(e[0]=o,e[1]=u,e[2]=d,e[3]=p,e[4]=c,e[5]=_,e):(e[0]=o,e[1]=u,e[2]=p,e[3]=c,e)}function s(e,t,r,i,n,s){var o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax,h=t.zmin,p=t.zmax,c=t.mmin,g=t.mmax;return n?(h=h||0,p=p||0,s?(c=c||0,g=g||0,e[0]=o,e[1]=l,e[2]=h,e[3]=c,e[4]=a,e[5]=u,e[6]=p,e[7]=g,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=u,e[5]=p,e)):s?(c=c||0,g=g||0,e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=g,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function o(e,t,r,i,n,s){var o=r?3:2,u=i&&s,h=r&&n;if(!t.length||!t[0].length)return null;for(var p=t[0],c=p[0],g=p[1],f=t[0],d=f[0],_=f[1],m=void 0,v=void 0,y=void 0,x=void 0,T=0;T<t.length;T++){var E=t[T],w=E[0],b=E[1];if(c=a(c,w),g=a(g,b),d=l(d,w),_=l(_,b),h&&E.length>2){var L=E[2];m=a(m,L),v=l(v,L)}if(u&&E.length>o){var S=E[o];y=a(m,S),x=l(v,S)}}return n?(m=m||0,v=v||0,s?(y=y||0,x=x||0,e[0]=c,e[1]=g,e[2]=m,e[3]=y,e[4]=d,e[5]=_,e[6]=v,e[7]=x,e):(e[0]=c,e[1]=g,e[2]=m,e[3]=d,e[4]=_,e[5]=v,e)):s?(y=y||0,x=x||0,e[0]=c,e[1]=g,e[2]=y,e[3]=d,e[4]=_,e[5]=x,e):(e[0]=c,e[1]=g,e[2]=d,e[3]=_,e)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(Math.min),l=i(Math.max);t.getBoundsXY=function(e,t){return r.isPolyline(t)?n(e,t.paths,!1,!1):r.isPolygon(t)?n(e,t.rings,!1,!1):r.isMultipoint(t)?o(e,t.points,!1,!1,!1,!1):r.isExtent(t)?s(e,t):(r.isPoint(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)},t.getRingsOrPathsBounds=n,t.getExtentBounds=s,t.getPointsBounds=o}.apply(null,i))||(e.exports=n)},1974:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(26),r(9),r(27),r(516),r(1743),r(1606),r(1582),r(1582),r(1640),r(1748),r(1734),r(1975),r(1825)],void 0===(n=function(e,t,r,i,n,s,o,a,l,u,h,p,c,g,f){Object.defineProperty(t,"__esModule",{value:!0});var d=i.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),_=[],m=[],v=128,y=function(e){function t(t,r,i,n,s,o,u,h,c){var f=e.call(this)||this;return f.fillColor=n,f.tl=s,f.br=o,f.aux1=u,f.aux2=h,f.isBFS=c,f.geometryType=l.WGLGeometryType.FILL,f.useLibtess=!0,f._tesselator=new g.default,f.vvFlags=r,f._materialStore=t,f.materialId=f._materialStore.createSpriteMaterial(i,f.geometryType,r),f._tileClipper=new p.TileClipper(0,0,0,1,8),f._tileClipper.setExtent(a.TILE_SIZE),f}return r(t,e),t.fromSimpleFill=function(e,r,i,n,s,a){void 0===a&&(a=!1);var l=i.color,u=l&&"none"!==i.style&&o.premultiplyAlphaRGBA(l)||0;if(!n)return new t(e,r,null,u,0,0,0,0,a);var p=n.rect,c=n.width,g=n.height,f=p.x+1,d=p.y+1,_=p.x+1+c,m=p.y+1+g;return new t(e,r,n,u,h.i1616to32(f,d),h.i1616to32(_,m),h.i8888to32(h.nextHighestPowerOfTwo(_-f),h.nextHighestPowerOfTwo(m-d),0,0),h.i1616to32(v,v),a)},t.fromPictureFill=function(e,r,i,s,o,l){void 0===l&&(l=!1);var u=a.PICTURE_FILL_COLOR,p=s.rect,c=s.width,g=s.height,f=p.x+1,d=p.y+1,_=f+c,m=d+g,y=h.i1616to32(f,d),x=h.i1616to32(_,m),T=h.nextHighestPowerOfTwo(n.pt2px(i.width));255<T&&(T=255);var E=h.nextHighestPowerOfTwo(n.pt2px(i.height));255<E&&(E=255);var w=n.pt2px(i.xoffset)+v;255<w&&(w=255);var b=n.pt2px(-i.yoffset)+v;return 255<b&&(b=255),new t(e,r,s,u,y,x,h.i8888to32(T,E,w,b),h.i1616to32(v*i.xscale,v*i.yscale),l)},t.prototype.writeMesh=function(e,t,r,i,n,s,o){if(_.length=0,this.vvFlags&u.WGLVVFlag.COLOR||0!==this.fillColor){if("esriGeometryPolygon"===r){var a=n.geometry,l=this._isClippingRequired(a),h=l?this._clip(a,!this.useLibtess):a.rings;return this.useLibtess?this._writeMeshLibtess(e,t,r,i,h,l,s,o):this._writeMeshEarcut(e,t,r,i,h,l,s,o)}d.error("Unable to handle geometryType: "+r)}},t.prototype._isClippingRequired=function(e){for(var t=a.TILE_SIZE+8,r=0,i=e.rings;r<i.length;r++){var n=i[r],s=n.length;if(!(s<3)){var o=n[0][0],l=n[0][1];if(o<-8||t<o||l<-8||t<l)return!0;for(var u=1;u<s;++u)if(o+=n[u][0],l+=n[u][1],o<-8||t<o||l<-8||t<l)return!0}}return!1},t.prototype._clip=function(e,t){var r,i;this._tileClipper.reset(3);for(var n=0,s=e.rings;n<s.length;n++){var o=s[n],a=o.length;if(!(a<3)){r=o[0][0],i=o[0][1],this._tileClipper.moveTo(r,i);for(var l=1;l<a;++l)r+=o[l][0],i+=o[l][1],this._tileClipper.lineTo(r,i);this._tileClipper.close()}}return this._tileClipper.result(t)},t.prototype._writeMeshLibtess=function(e,t,r,i,n,s,o,a){if(n&&n.length){var l=this._materialStore.get(this.materialId),u=[],h=t.indexVector,p=t.get("geometry"),g=t.get("visibility"),f=new c(i,this.geometryType,this.materialId),d=this._getOffset(p,l),m=s;f.vertexFrom=d,f.indexFrom=h.length,this._tesselator.beginPolygon(_,u);for(var v=0,y=n;v<y.length;v++){var x=y[v];if(!(x.length<3)){this._tesselator.beginContour();var T=void 0,E=void 0;E=m?(T=x[0].x,x[0].y):(T=x[0][0],x[0][1]);var w=[T,E,0];this._tesselator.addVertex(w,w);for(var b=1;b<x.length-1;b++){m?(T=x[b].x,E=x[b].y):(T+=x[b][0],E+=x[b][1]);var L=[T,E,0];this._tesselator.addVertex(L,L)}this._tesselator.endContour()}}this._tesselator.endPolygon(),this._writeVerticesLibTess(f,p,g,i,_,l,a),this._writeIndicesLibTess(f,h,d,u),0<f.indexCount&&e.push(f)}},t.prototype._writeMeshEarcut=function(e,t,r,i,n,s,o,a){if(n&&n.length){var l=this._materialStore.get(this.materialId),u=t.indexVector,h=t.get("geometry"),p=t.get("visibility"),g=new c(i,this.geometryType,this.materialId),f=this._getOffset(h,l);g.vertexFrom=f,g.indexFrom=u.length,e.push(g);for(var d=0,v=0,y=s,x=0,T=n;x<T.length;x++){var E=T[x],w=v,b=void 0,L=void 0;L=y?(b=E[0].x,E[0].y):(b=E[0][0],E[0][1]),_[v++]=b,_[v++]=L;for(var S=0,G=1;G<E.length;++G){var N=void 0,V=void 0;if(y){var I=b,M=L;N=(b=E[G].x)-I,V=(L=E[G].y)-M}else b+=N=E[G][0],L+=V=E[G][1];S-=N*(L+L+V),_[v++]=b,_[v++]=L}0<S?(0<w-d&&(this._write(g,u,h,p,f,i,_,m,d,w,l,a),d=w),m.length=0):S<0&&0<w-d?m.push(.5*(w-d)):v=w}0<v-d&&this._write(g,u,h,p,f,i,_,m,d,v,l,a),_.length=m.length=0}},t.prototype._write=function(e,t,r,i,n,o,a,l,u,h,p,c){var g=s(a.slice(u,h),l,2);if(g.length){var f=this._getOffset(r,p);this._writeVertices(e,r,i,o,a,l,p,c),this._writeIndices(e,t,f,g)}},t.prototype._getOffset=function(e,t){var r=t.materialKeyInfo.hasVV()?9:7;return e.length/r},t.prototype._writeVertices=function(e,t,r,i,n,s,o,a){for(var l=0;l<n.length;l+=2){var u=h.i1616to32(n[l],n[l+1]);t.push(u),t.push(i),t.push(this.fillColor),t.push(this.tl),t.push(this.br),t.push(this.aux1),t.push(this.aux2),this._writeVV(t,a,o),r.push(255),e.vertexCount++}},t.prototype._writeIndices=function(e,t,r,i){for(var n=r,s=0;s<i.length;s+=3)t.push(n+i[s]),t.push(n+i[s+1]),t.push(n+i[s+2]),e.indexCount+=3},t.prototype._writeVerticesLibTess=function(e,t,r,i,n,s,o){for(var a=0;a<n.length;a+=2){var l=h.i1616to32(n[a],n[a+1]);t.push(l),t.push(i),t.push(this.fillColor),t.push(this.tl),t.push(this.br),t.push(this.aux1),t.push(this.aux2),this._writeVV(t,o,s),r.push(255),e.vertexCount++}},t.prototype._writeIndicesLibTess=function(e,t,r,i){for(var n=r,s=0;s<i.length;s++)t.push(n+i[s]),e.indexCount++},t.prototype._writeVV=function(e,t,r){r.materialKeyInfo.hasVV()&&(this.isBFS?(e.push(4294967295),e.push(4294967295)):(e.push(t[l.VVType.COLOR]),e.push(t[l.VVType.OPACITY])))},t}(f.default);t.default=y}.apply(null,i))||(e.exports=n)},1975:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(1976)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=r.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator"),s=function(){function e(){this._currentVertexIndex=0,this._indexCounter=0,this._triangleIndices=[-1,-1,-1],this.glu=new i.GluTesselator,this.glu.gluTessCallback(i.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_END,this._endcallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this)),this.glu.gluTessProperty(i.gluEnum.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_ODD)}return e.prototype.beginPolygon=function(e,t){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0,this._indexCounter=0,this.glu.gluTessBeginPolygon(e),this._indices=t},e.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()},e.prototype.beginContour=function(){this.glu.gluTessBeginContour()},e.prototype.endContour=function(){this.glu.gluTessEndContour()},e.prototype.addVertex=function(e,t){this.glu.gluTessVertex(e,t)},e.prototype._vertexCallback=function(e,t){if(t[t.length]=e[0],t[t.length]=e[1],this._triangleIndices[this._currentVertexIndex]=-1,2<=this._currentVertexIndex){for(var r=0;r<3;r++)-1===this._triangleIndices[r]&&(this._triangleIndices[r]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[r];this._currentVertexIndex=0}else this._currentVertexIndex++},e.prototype._begincallback=function(e){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0},e.prototype._endcallback=function(){this._currentVertexIndex=0},e.prototype._errorcallback=function(e){n.error("Encountered error during tesselation: "+e)},e.prototype._combinecallback=function(e,t,r){return[e[0],e[1],e[2]]},e.prototype._edgeCallback=function(e){},e}();t.default=s}.apply(null,i))||(e.exports=n)},1976:function(e,t,r){var i;
/**
   * @license
   * Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
   * Copyright 2015, Google Inc. All Rights Reserved.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to
   * deal in the Software without restriction, including without limitation the
   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
   * sell copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice including the dates of first publication and
   * either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
   * shall be included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
   * SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
   * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
   * IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   *
   * Original Code. The Original Code is: OpenGL Sample Implementation,
   * Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
   * Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
   * Copyright in any portions created by third parties is as indicated
   * elsewhere herein. All Rights Reserved.
   */void 0===(i=function(){"use strict";var e={DEBUG:!1,assert:function(t,r){if(e.DEBUG&&!t)throw new Error("Assertion failed"+(r?": "+r:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901}};return e.PQHandle,e.geom={},e.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.geom.edgeEval=function(t,r,i){e.assert(e.geom.vertLeq(t,r)&&e.geom.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.geom.edgeSign=function(t,r,i){e.assert(e.geom.vertLeq(t,r)&&e.geom.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.geom.transEval=function(t,r,i){e.assert(e.geom.transLeq(t,r)&&e.geom.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.geom.transSign=function(t,r,i){e.assert(e.geom.transLeq(t,r)&&e.geom.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.geom.edgeGoesLeft=function(t){return e.geom.vertLeq(t.dst(),t.org)},e.geom.edgeGoesRight=function(t){return e.geom.vertLeq(t.org,t.dst())},e.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.geom.vertCCW=function(e,t,r){return e.s*(t.t-r.t)+t.s*(r.t-e.t)+r.s*(e.t-t.t)>=0},e.geom.interpolate_=function(e,t,r,i){return(e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+i)/2:t+e/(e+r)*(i-t):i+r/(e+r)*(t-i)},e.geom.edgeIntersect=function(t,r,i,n,s){var o,a,l;e.geom.vertLeq(t,r)||(l=t,t=r,r=l),e.geom.vertLeq(i,n)||(l=i,i=n,n=l),e.geom.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.geom.vertLeq(i,r)?e.geom.vertLeq(r,n)?((o=e.geom.edgeEval(t,i,r))+(a=e.geom.edgeEval(i,r,n))<0&&(o=-o,a=-a),s.s=e.geom.interpolate_(o,i.s,a,r.s)):((o=e.geom.edgeSign(t,i,r))+(a=-e.geom.edgeSign(t,n,r))<0&&(o=-o,a=-a),s.s=e.geom.interpolate_(o,i.s,a,n.s)):s.s=(i.s+r.s)/2,e.geom.transLeq(t,r)||(l=t,t=r,r=l),e.geom.transLeq(i,n)||(l=i,i=n,n=l),e.geom.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.geom.transLeq(i,r)?e.geom.transLeq(r,n)?((o=e.geom.transEval(t,i,r))+(a=e.geom.transEval(i,r,n))<0&&(o=-o,a=-a),s.t=e.geom.interpolate_(o,i.t,a,r.t)):((o=e.geom.transSign(t,i,r))+(a=-e.geom.transSign(t,n,r))<0&&(o=-o,a=-a),s.t=e.geom.interpolate_(o,i.t,a,n.t)):s.t=(i.t+r.t)/2},e.mesh={},e.mesh.makeEdge=function(t){var r=e.mesh.makeEdgePair_(t.eHead);return e.mesh.makeVertex_(r,t.vHead),e.mesh.makeVertex_(r.sym,t.vHead),e.mesh.makeFace_(r,t.fHead),r},e.mesh.meshSplice=function(t,r){var i=!1,n=!1;t!==r&&(r.org!==t.org&&(n=!0,e.mesh.killVertex_(r.org,t.org)),r.lFace!==t.lFace&&(i=!0,e.mesh.killFace_(r.lFace,t.lFace)),e.mesh.splice_(r,t),n||(e.mesh.makeVertex_(r,t.org),t.org.anEdge=t),i||(e.mesh.makeFace_(r,t.lFace),t.lFace.anEdge=t))},e.mesh.deleteEdge=function(t){var r=t.sym,i=!1;t.lFace!==t.rFace()&&(i=!0,e.mesh.killFace_(t.lFace,t.rFace())),t.oNext===t?e.mesh.killVertex_(t.org,null):(t.rFace().anEdge=t.oPrev(),t.org.anEdge=t.oNext,e.mesh.splice_(t,t.oPrev()),i||e.mesh.makeFace_(t,t.lFace)),r.oNext===r?(e.mesh.killVertex_(r.org,null),e.mesh.killFace_(r.lFace,null)):(t.lFace.anEdge=r.oPrev(),r.org.anEdge=r.oNext,e.mesh.splice_(r,r.oPrev())),e.mesh.killEdge_(t)},e.mesh.addEdgeVertex=function(t){var r=e.mesh.makeEdgePair_(t),i=r.sym;return e.mesh.splice_(r,t.lNext),r.org=t.dst(),e.mesh.makeVertex_(i,r.org),r.lFace=i.lFace=t.lFace,r},e.mesh.splitEdge=function(t){var r=e.mesh.addEdgeVertex(t).sym;return e.mesh.splice_(t.sym,t.sym.oPrev()),e.mesh.splice_(t.sym,r),t.sym.org=r.org,r.dst().anEdge=r.sym,r.sym.lFace=t.rFace(),r.winding=t.winding,r.sym.winding=t.sym.winding,r},e.mesh.connect=function(t,r){var i=!1,n=e.mesh.makeEdgePair_(t),s=n.sym;return r.lFace!==t.lFace&&(i=!0,e.mesh.killFace_(r.lFace,t.lFace)),e.mesh.splice_(n,t.lNext),e.mesh.splice_(s,r),n.org=t.dst(),s.org=r.org,n.lFace=s.lFace=t.lFace,t.lFace.anEdge=s,i||e.mesh.makeFace_(n,t.lFace),n},e.mesh.zapFace=function(t){var r,i=t.anEdge,n=i.lNext;do{if(n=(r=n).lNext,r.lFace=null,null===r.rFace()){r.oNext===r?e.mesh.killVertex_(r.org,null):(r.org.anEdge=r.oNext,e.mesh.splice_(r,r.oPrev()));var s=r.sym;s.oNext===s?e.mesh.killVertex_(s.org,null):(s.org.anEdge=s.oNext,e.mesh.splice_(s,s.oPrev())),e.mesh.killEdge_(r)}}while(r!==i);var o=t.prev,a=t.next;a.prev=o,o.next=a},e.mesh.meshUnion=function(e,t){var r=e.fHead,i=e.vHead,n=e.eHead,s=t.fHead,o=t.vHead,a=t.eHead;return s.next!==s&&(r.prev.next=s.next,s.next.prev=r.prev,s.prev.next=r,r.prev=s.prev),o.next!==o&&(i.prev.next=o.next,o.next.prev=i.prev,o.prev.next=i,i.prev=o.prev),a.next!==a&&(n.sym.next.sym.next=a.next,a.next.sym.next=n.sym.next,a.sym.next.sym.next=n,n.sym.next=a.sym.next),e},e.mesh.deleteMesh=function(e){},e.mesh.makeEdgePair_=function(t){var r=new e.GluHalfEdge,i=new e.GluHalfEdge,n=t.sym.next;return i.next=n,n.sym.next=r,r.next=t,t.sym.next=i,r.sym=i,r.oNext=r,r.lNext=i,i.sym=r,i.oNext=i,i.lNext=r,r},e.mesh.splice_=function(e,t){var r=e.oNext,i=t.oNext;r.sym.lNext=t,i.sym.lNext=e,e.oNext=i,t.oNext=r},e.mesh.makeVertex_=function(t,r){var i=r.prev,n=new e.GluVertex(r,i);i.next=n,r.prev=n,n.anEdge=t;var s=t;do{s.org=n,s=s.oNext}while(s!==t)},e.mesh.makeFace_=function(t,r){var i=r.prev,n=new e.GluFace(r,i);i.next=n,r.prev=n,n.anEdge=t,n.inside=r.inside;var s=t;do{s.lFace=n,s=s.lNext}while(s!==t)},e.mesh.killEdge_=function(e){var t=e.next,r=e.sym.next;t.sym.next=r,r.sym.next=t},e.mesh.killVertex_=function(e,t){var r=e.anEdge,i=r;do{i.org=t,i=i.oNext}while(i!==r);var n=e.prev,s=e.next;s.prev=n,n.next=s},e.mesh.killFace_=function(e,t){var r=e.anEdge,i=r;do{i.lFace=t,i=i.lNext}while(i!==r);var n=e.prev,s=e.next;s.prev=n,n.next=s},e.normal={},e.normal.S_UNIT_X_=1,e.normal.S_UNIT_Y_=0,e.normal.projectPolygon=function(t,r,i,n){var s=!1,o=[r,i,n];0===r&&0===i&&0===n&&(e.normal.computeNormal_(t,o),s=!0);var a,l=e.normal.longAxis_(o),u=t.mesh.vHead;if(e.TRUE_PROJECT){e.normal.normalize_(o);var h=[0,0,0],p=[0,0,0];h[l]=0,h[(l+1)%3]=e.normal.S_UNIT_X_,h[(l+2)%3]=e.normal.S_UNIT_Y_;var c=e.normal.dot_(h,o);for(h[0]-=c*o[0],h[1]-=c*o[1],h[2]-=c*o[2],e.normal.normalize_(h),p[0]=o[1]*h[2]-o[2]*h[1],p[1]=o[2]*h[0]-o[0]*h[2],p[2]=o[0]*h[1]-o[1]*h[0],e.normal.normalize_(p),a=u.next;a!==u;a=a.next)a.s=e.normal.dot_(a.coords,h),a.t=e.normal.dot_(a.coords,p)}else{var g=(l+1)%3,f=(l+2)%3,d=o[l]>0?1:-1;for(a=u.next;a!==u;a=a.next)a.s=a.coords[g],a.t=d*a.coords[f]}s&&e.normal.checkOrientation_(t)},e.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.normal.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];e.assert(r>0),r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.normal.computeNormal_=function(t,r){var i,n=[-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD],s=[2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD],o=[],a=[],l=t.mesh.vHead;for(i=l.next;i!==l;i=i.next)for(var u=0;u<3;++u){var h=i.coords[u];h<s[u]&&(s[u]=h,a[u]=i),h>n[u]&&(n[u]=h,o[u]=i)}var p=0;if(n[1]-s[1]>n[0]-s[0]&&(p=1),n[2]-s[2]>n[p]-s[p]&&(p=2),s[p]>=n[p])return r[0]=0,r[1]=0,void(r[2]=1);var c=0,g=a[p],f=o[p],d=[0,0,0],_=[g.coords[0]-f.coords[0],g.coords[1]-f.coords[1],g.coords[2]-f.coords[2]],m=[0,0,0];for(i=l.next;i!==l;i=i.next){m[0]=i.coords[0]-f.coords[0],m[1]=i.coords[1]-f.coords[1],m[2]=i.coords[2]-f.coords[2],d[0]=_[1]*m[2]-_[2]*m[1],d[1]=_[2]*m[0]-_[0]*m[2],d[2]=_[0]*m[1]-_[1]*m[0];var v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2];v>c&&(c=v,r[0]=d[0],r[1]=d[1],r[2]=d[2])}c<=0&&(r[0]=r[1]=r[2]=0,r[e.normal.longAxis_(_)]=1)},e.normal.checkOrientation_=function(e){for(var t=0,r=e.mesh.fHead,i=r.next;i!==r;i=i.next){var n=i.anEdge;if(!(n.winding<=0))do{t+=(n.org.s-n.dst().s)*(n.org.t+n.dst().t),n=n.lNext}while(n!==i.anEdge)}if(t<0)for(var s=e.mesh.vHead,o=s.next;o!==s;o=o.next)o.t=-o.t},e.render={},e.render.renderMesh=function(t,r,i){for(var n=!1,s=-1,o=r.fHead.prev;o!==r.fHead;o=o.prev)if(o.inside){n||(t.callBeginCallback(e.primitiveType.GL_TRIANGLES),n=!0);var a=o.anEdge;e.assert(a.lNext.lNext.lNext===a,"renderMesh called with non-triangulated mesh");do{if(i){var l=a.rFace().inside?0:1;s!==l&&(s=l,t.callEdgeFlagCallback(!!s))}t.callVertexCallback(a.org.data),a=a.lNext}while(a!==o.anEdge)}n&&t.callEndCallback()},e.render.renderBoundary=function(t,r){for(var i=r.fHead.next;i!==r.fHead;i=i.next)if(i.inside){t.callBeginCallback(e.primitiveType.GL_LINE_LOOP);var n=i.anEdge;do{t.callVertexCallback(n.org.data),n=n.lNext}while(n!==i.anEdge);t.callEndCallback()}},e.sweep={},e.sweep.SENTINEL_COORD_=4*e.GLU_TESS_MAX_COORD,e.sweep.TOLERANCE_NONZERO_=!1,e.sweep.computeInterior=function(t){t.fatalError=!1,e.sweep.removeDegenerateEdges_(t),e.sweep.initPriorityQ_(t),e.sweep.initEdgeDict_(t);for(var r;null!==(r=t.pq.extractMin());){for(;;){var i=t.pq.minimum();if(null===i||!e.geom.vertEq(i,r))break;i=t.pq.extractMin(),e.sweep.spliceMergeVertices_(t,r.anEdge,i.anEdge)}e.sweep.sweepEvent_(t,r)}var n=t.dict.getMin().getKey();t.event=n.eUp.org,e.sweep.doneEdgeDict_(t),e.sweep.donePriorityQ_(t),e.sweep.removeDegenerateFaces_(t.mesh),t.mesh.checkMesh()},e.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},e.sweep.edgeLeq_=function(t,r,i){var n=t.event,s=r.eUp,o=i.eUp;return s.dst()===n?o.dst()===n?e.geom.vertLeq(s.org,o.org)?e.geom.edgeSign(o.dst(),s.org,o.org)<=0:e.geom.edgeSign(s.dst(),o.org,s.org)>=0:e.geom.edgeSign(o.dst(),n,o.org)<=0:o.dst()===n?e.geom.edgeSign(s.dst(),n,s.org)>=0:e.geom.edgeEval(s.dst(),n,s.org)>=e.geom.edgeEval(o.dst(),n,o.org)},e.sweep.deleteRegion_=function(t,r){r.fixUpperEdge&&e.assert(0===r.eUp.winding),r.eUp.activeRegion=null,t.dict.deleteNode(r.nodeUp),r.nodeUp=null},e.sweep.fixUpperEdge_=function(t,r){e.assert(t.fixUpperEdge),e.mesh.deleteEdge(t.eUp),t.fixUpperEdge=!1,t.eUp=r,r.activeRegion=t},e.sweep.topLeftRegion_=function(t){var r=t.eUp.org;do{t=t.regionAbove()}while(t.eUp.org===r);if(t.fixUpperEdge){var i=e.mesh.connect(t.regionBelow().eUp.sym,t.eUp.lNext);e.sweep.fixUpperEdge_(t,i),t=t.regionAbove()}return t},e.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},e.sweep.addRegionBelow_=function(t,r,i){var n=new e.ActiveRegion;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),i.activeRegion=n,n},e.sweep.isWindingInside_=function(t,r){switch(t.windingRule){case e.windingRule.GLU_TESS_WINDING_ODD:return 0!=(1&r);case e.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==r;case e.windingRule.GLU_TESS_WINDING_POSITIVE:return r>0;case e.windingRule.GLU_TESS_WINDING_NEGATIVE:return r<0;case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return r>=2||r<=-2}return e.assert(!1),!1},e.sweep.computeWinding_=function(t,r){r.windingNumber=r.regionAbove().windingNumber+r.eUp.winding,r.inside=e.sweep.isWindingInside_(t,r.windingNumber)},e.sweep.finishRegion_=function(t,r){var i=r.eUp,n=i.lFace;n.inside=r.inside,n.anEdge=i,e.sweep.deleteRegion_(t,r)},e.sweep.finishLeftRegions_=function(t,r,i){for(var n=r,s=r.eUp;n!==i;){n.fixUpperEdge=!1;var o=n.regionBelow(),a=o.eUp;if(a.org!==s.org){if(!o.fixUpperEdge){e.sweep.finishRegion_(t,n);break}a=e.mesh.connect(s.lPrev(),a.sym),e.sweep.fixUpperEdge_(o,a)}s.oNext!==a&&(e.mesh.meshSplice(a.oPrev(),a),e.mesh.meshSplice(s,a)),e.sweep.finishRegion_(t,n),s=o.eUp,n=o}return s},e.sweep.addRightEdges_=function(t,r,i,n,s,o){var a=!0,l=i;do{e.assert(e.geom.vertLeq(l.org,l.dst())),e.sweep.addRegionBelow_(t,r,l.sym),l=l.oNext}while(l!==n);null===s&&(s=r.regionBelow().eUp.rPrev());for(var u,h=r,p=s;(l=(u=h.regionBelow()).eUp.sym).org===p.org;)l.oNext!==p&&(e.mesh.meshSplice(l.oPrev(),l),e.mesh.meshSplice(p.oPrev(),l)),u.windingNumber=h.windingNumber-l.winding,u.inside=e.sweep.isWindingInside_(t,u.windingNumber),h.dirty=!0,!a&&e.sweep.checkForRightSplice_(t,h)&&(e.sweep.addWinding_(l,p),e.sweep.deleteRegion_(t,h),e.mesh.deleteEdge(p)),a=!1,h=u,p=l;h.dirty=!0,e.assert(h.windingNumber-l.winding===u.windingNumber),o&&e.sweep.walkDirtyRegions_(t,h)},e.sweep.callCombine_=function(t,r,i,n,s){var o=[r.coords[0],r.coords[1],r.coords[2]];r.data=null,r.data=t.callCombineCallback(o,i,n),null===r.data&&(s?t.fatalError||(t.callErrorCallback(e.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),t.fatalError=!0):r.data=i[0])},e.sweep.spliceMergeVertices_=function(t,r,i){var n=[null,null,null,null];n[0]=r.org.data,n[1]=i.org.data,e.sweep.callCombine_(t,r.org,n,[.5,.5,0,0],!1),e.mesh.meshSplice(r,i)},e.sweep.vertexWeights_=function(t,r,i,n,s){var o=e.geom.vertL1dist(r,t),a=e.geom.vertL1dist(i,t),l=s,u=s+1;n[l]=.5*a/(o+a),n[u]=.5*o/(o+a),t.coords[0]+=n[l]*r.coords[0]+n[u]*i.coords[0],t.coords[1]+=n[l]*r.coords[1]+n[u]*i.coords[1],t.coords[2]+=n[l]*r.coords[2]+n[u]*i.coords[2]},e.sweep.getIntersectData_=function(t,r,i,n,s,o){var a=[0,0,0,0],l=[i.data,n.data,s.data,o.data];r.coords[0]=r.coords[1]=r.coords[2]=0,e.sweep.vertexWeights_(r,i,n,a,0),e.sweep.vertexWeights_(r,s,o,a,2),e.sweep.callCombine_(t,r,l,a,!0)},e.sweep.checkForRightSplice_=function(t,r){var i=r.regionBelow(),n=r.eUp,s=i.eUp;if(e.geom.vertLeq(n.org,s.org)){if(e.geom.edgeSign(s.dst(),n.org,s.org)>0)return!1;e.geom.vertEq(n.org,s.org)?n.org!==s.org&&(t.pq.remove(n.org.pqHandle),e.sweep.spliceMergeVertices_(t,s.oPrev(),n)):(e.mesh.splitEdge(s.sym),e.mesh.meshSplice(n,s.oPrev()),r.dirty=i.dirty=!0)}else{if(e.geom.edgeSign(n.dst(),s.org,n.org)<0)return!1;r.regionAbove().dirty=r.dirty=!0,e.mesh.splitEdge(n.sym),e.mesh.meshSplice(s.oPrev(),n)}return!0},e.sweep.checkForLeftSplice_=function(t,r){var i,n=r.regionBelow(),s=r.eUp,o=n.eUp;if(e.assert(!e.geom.vertEq(s.dst(),o.dst())),e.geom.vertLeq(s.dst(),o.dst())){if(e.geom.edgeSign(s.dst(),o.dst(),s.org)<0)return!1;r.regionAbove().dirty=r.dirty=!0,i=e.mesh.splitEdge(s),e.mesh.meshSplice(o.sym,i),i.lFace.inside=r.inside}else{if(e.geom.edgeSign(o.dst(),s.dst(),o.org)>0)return!1;r.dirty=n.dirty=!0,i=e.mesh.splitEdge(o),e.mesh.meshSplice(s.lNext,o.sym),i.rFace().inside=r.inside}return!0},e.sweep.checkForIntersect_=function(t,r){var i=r.regionBelow(),n=r.eUp,s=i.eUp,o=n.org,a=s.org,l=n.dst(),u=s.dst(),h=new e.GluVertex;if(e.assert(!e.geom.vertEq(u,l)),e.assert(e.geom.edgeSign(l,t.event,o)<=0),e.assert(e.geom.edgeSign(u,t.event,a)>=0),e.assert(o!==t.event&&a!==t.event),e.assert(!r.fixUpperEdge&&!i.fixUpperEdge),o===a)return!1;if(Math.min(o.t,l.t)>Math.max(a.t,u.t))return!1;if(e.geom.vertLeq(o,a)){if(e.geom.edgeSign(u,o,a)>0)return!1}else if(e.geom.edgeSign(l,a,o)<0)return!1;e.geom.edgeIntersect(l,o,u,a,h),e.assert(Math.min(o.t,l.t)<=h.t),e.assert(h.t<=Math.max(a.t,u.t)),e.assert(Math.min(u.s,l.s)<=h.s),e.assert(h.s<=Math.max(a.s,o.s)),e.geom.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t);var p=e.geom.vertLeq(o,a)?o:a;if(e.geom.vertLeq(p,h)&&(h.s=p.s,h.t=p.t),e.geom.vertEq(h,o)||e.geom.vertEq(h,a))return e.sweep.checkForRightSplice_(t,r),!1;if(!e.geom.vertEq(l,t.event)&&e.geom.edgeSign(l,t.event,h)>=0||!e.geom.vertEq(u,t.event)&&e.geom.edgeSign(u,t.event,h)<=0){if(u===t.event)return e.mesh.splitEdge(n.sym),e.mesh.meshSplice(s.sym,n),n=(r=e.sweep.topLeftRegion_(r)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,r.regionBelow(),i),e.sweep.addRightEdges_(t,r,n.oPrev(),n,n,!0),!0;if(l===t.event){e.mesh.splitEdge(s.sym),e.mesh.meshSplice(n.lNext,s.oPrev()),i=r;var c=(r=e.sweep.topRightRegion_(r)).regionBelow().eUp.rPrev();return i.eUp=s.oPrev(),s=e.sweep.finishLeftRegions_(t,i,null),e.sweep.addRightEdges_(t,r,s.oNext,n.rPrev(),c,!0),!0}return e.geom.edgeSign(l,t.event,h)>=0&&(r.regionAbove().dirty=r.dirty=!0,e.mesh.splitEdge(n.sym),n.org.s=t.event.s,n.org.t=t.event.t),e.geom.edgeSign(u,t.event,h)<=0&&(r.dirty=i.dirty=!0,e.mesh.splitEdge(s.sym),s.org.s=t.event.s,s.org.t=t.event.t),!1}return e.mesh.splitEdge(n.sym),e.mesh.splitEdge(s.sym),e.mesh.meshSplice(s.oPrev(),n),n.org.s=h.s,n.org.t=h.t,n.org.pqHandle=t.pq.insert(n.org),e.sweep.getIntersectData_(t,n.org,o,l,a,u),r.regionAbove().dirty=r.dirty=i.dirty=!0,!1},e.sweep.walkDirtyRegions_=function(t,r){for(var i=r.regionBelow();;){for(;i.dirty;)r=i,i=i.regionBelow();if(!r.dirty&&(i=r,null===(r=r.regionAbove())||!r.dirty))return;r.dirty=!1;var n=r.eUp,s=i.eUp;if(n.dst()!==s.dst()&&e.sweep.checkForLeftSplice_(t,r)&&(i.fixUpperEdge?(e.sweep.deleteRegion_(t,i),e.mesh.deleteEdge(s),s=(i=r.regionBelow()).eUp):r.fixUpperEdge&&(e.sweep.deleteRegion_(t,r),e.mesh.deleteEdge(n),n=(r=i.regionAbove()).eUp)),n.org!==s.org)if(n.dst()===s.dst()||r.fixUpperEdge||i.fixUpperEdge||n.dst()!==t.event&&s.dst()!==t.event)e.sweep.checkForRightSplice_(t,r);else if(e.sweep.checkForIntersect_(t,r))return;n.org===s.org&&n.dst()===s.dst()&&(e.sweep.addWinding_(s,n),e.sweep.deleteRegion_(t,r),e.mesh.deleteEdge(n),r=i.regionAbove())}},e.sweep.connectRightVertex_=function(t,r,i){var n,s=i.oNext,o=r.regionBelow(),a=r.eUp,l=o.eUp,u=!1;(a.dst()!==l.dst()&&e.sweep.checkForIntersect_(t,r),e.geom.vertEq(a.org,t.event)&&(e.mesh.meshSplice(s.oPrev(),a),s=(r=e.sweep.topLeftRegion_(r)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,r.regionBelow(),o),u=!0),e.geom.vertEq(l.org,t.event)&&(e.mesh.meshSplice(i,l.oPrev()),i=e.sweep.finishLeftRegions_(t,o,null),u=!0),u)?e.sweep.addRightEdges_(t,r,i.oNext,s,s,!0):(n=e.geom.vertLeq(l.org,a.org)?l.oPrev():a,n=e.mesh.connect(i.lPrev(),n),e.sweep.addRightEdges_(t,r,n,n.oNext,n.oNext,!1),n.sym.activeRegion.fixUpperEdge=!0,e.sweep.walkDirtyRegions_(t,r))},e.sweep.connectLeftDegenerate_=function(t,r,i){var n=r.eUp;if(e.geom.vertEq(n.org,i))return e.assert(e.sweep.TOLERANCE_NONZERO_),void(e.sweep.TOLERANCE_NONZERO_&&e.sweep.spliceMergeVertices_(t,n,i.anEdge));if(!e.geom.vertEq(n.dst(),i))return e.mesh.splitEdge(n.sym),r.fixUpperEdge&&(e.mesh.deleteEdge(n.oNext),r.fixUpperEdge=!1),e.mesh.meshSplice(i.anEdge,n),void e.sweep.sweepEvent_(t,i);if(e.assert(e.sweep.TOLERANCE_NONZERO_),e.sweep.TOLERANCE_NONZERO_){var s=(r=e.sweep.topRightRegion_(r)).regionBelow(),o=s.eUp.sym,a=o.oNext,l=a;s.fixUpperEdge&&(e.assert(a!==o),e.sweep.deleteRegion_(t,s),e.mesh.deleteEdge(o),o=a.oPrev()),e.mesh.meshSplice(i.anEdge,o),e.geom.edgeGoesLeft(a)||(a=null),e.sweep.addRightEdges_(t,r,o.oNext,l,a,!0)}},e.sweep.connectLeftVertex_=function(t,r){var i=new e.ActiveRegion;i.eUp=r.anEdge.sym;var n=t.dict.search(i).getKey(),s=n.regionBelow(),o=n.eUp,a=s.eUp;if(0!==e.geom.edgeSign(o.dst(),r,o.org)){var l,u=e.geom.vertLeq(a.dst(),o.dst())?n:s;n.inside||u.fixUpperEdge?(l=u===n?e.mesh.connect(r.anEdge.sym,o.lNext):e.mesh.connect(a.dNext(),r.anEdge).sym,u.fixUpperEdge?e.sweep.fixUpperEdge_(u,l):e.sweep.computeWinding_(t,e.sweep.addRegionBelow_(t,n,l)),e.sweep.sweepEvent_(t,r)):e.sweep.addRightEdges_(t,n,r.anEdge,r.anEdge,null,!0)}else e.sweep.connectLeftDegenerate_(t,n,r)},e.sweep.sweepEvent_=function(t,r){t.event=r;for(var i=r.anEdge;null===i.activeRegion;)if((i=i.oNext)===r.anEdge)return void e.sweep.connectLeftVertex_(t,r);var n=e.sweep.topLeftRegion_(i.activeRegion),s=n.regionBelow(),o=s.eUp,a=e.sweep.finishLeftRegions_(t,s,null);a.oNext===o?e.sweep.connectRightVertex_(t,n,a):e.sweep.addRightEdges_(t,n,a.oNext,o,o,!0)},e.sweep.addSentinel_=function(t,r){var i=new e.ActiveRegion,n=e.mesh.makeEdge(t.mesh);n.org.s=e.sweep.SENTINEL_COORD_,n.org.t=r,n.dst().s=-e.sweep.SENTINEL_COORD_,n.dst().t=r,t.event=n.dst(),i.eUp=n,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=t.dict.insert(i)},e.sweep.initEdgeDict_=function(t){t.dict=new e.Dict(t,e.sweep.edgeLeq_),e.sweep.addSentinel_(t,-e.sweep.SENTINEL_COORD_),e.sweep.addSentinel_(t,e.sweep.SENTINEL_COORD_)},e.sweep.doneEdgeDict_=function(t){for(var r,i=0;null!==(r=t.dict.getMin().getKey());)r.sentinel||(e.assert(r.fixUpperEdge),e.assert(1==++i)),e.assert(0===r.windingNumber),e.sweep.deleteRegion_(t,r);t.dict=null},e.sweep.removeDegenerateEdges_=function(t){for(var r,i=t.mesh.eHead,n=i.next;n!==i;n=r){r=n.next;var s=n.lNext;e.geom.vertEq(n.org,n.dst())&&n.lNext.lNext!==n&&(e.sweep.spliceMergeVertices_(t,s,n),e.mesh.deleteEdge(n),s=(n=s).lNext),s.lNext===n&&(s!==n&&(s!==r&&s!==r.sym||(r=r.next),e.mesh.deleteEdge(s)),n!==r&&n!==r.sym||(r=r.next),e.mesh.deleteEdge(n))}},e.sweep.initPriorityQ_=function(t){var r=new e.PriorityQ;t.pq=r;var i,n=t.mesh.vHead;for(i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);r.init()},e.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},e.sweep.removeDegenerateFaces_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r){r=i.next;var n=i.anEdge;e.assert(n.lNext!==n),n.lNext.lNext===n&&(e.sweep.addWinding_(n.oNext,n),e.mesh.deleteEdge(n))}},e.tessmono={},e.tessmono.tessellateMonoRegion_=function(t){var r=t.anEdge;for(e.assert(r.lNext!==r&&r.lNext.lNext!==r);e.geom.vertLeq(r.dst(),r.org);r=r.lPrev());for(;e.geom.vertLeq(r.org,r.dst());r=r.lNext);for(var i=r.lPrev();r.lNext!==i;)if(e.geom.vertLeq(r.dst(),i.org)){for(;i.lNext!==r&&(e.geom.edgeGoesLeft(i.lNext)||e.geom.edgeSign(i.org,i.dst(),i.lNext.dst())<=0);)i=e.mesh.connect(i.lNext,i).sym;i=i.lPrev()}else{for(;i.lNext!==r&&(e.geom.edgeGoesRight(r.lPrev())||e.geom.edgeSign(r.dst(),r.org,r.lPrev().org)>=0);)r=e.mesh.connect(r,r.lPrev()).sym;r=r.lNext}for(e.assert(i.lNext!==r);i.lNext.lNext!==r;)i=e.mesh.connect(i.lNext,i).sym},e.tessmono.tessellateInterior=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside&&e.tessmono.tessellateMonoRegion_(i)},e.tessmono.discardExterior=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||e.mesh.zapFace(i)},e.tessmono.setWindingNumber=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.rFace().inside!==s.lFace.inside?s.winding=s.lFace.inside?r:-r:i?e.mesh.deleteEdge(s):s.winding=0},e.Dict=function(t,r){this.head_=new e.DictNode,this.frame_=t,this.leq_=r},e.Dict.prototype.deleteDict_=function(){},e.Dict.prototype.insertBefore=function(t,r){do{t=t.prev}while(null!==t.key&&!this.leq_(this.frame_,t.key,r));var i=new e.DictNode(r,t.next,t);return t.next.prev=i,t.next=i,i},e.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},e.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},e.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},e.Dict.prototype.getMin=function(){return this.head_.next},e.Dict.prototype.getMax=function(){return this.head_.prev},e.DictNode=function(e,t,r){this.key=e||null,this.next=t||this,this.prev=r||this},e.DictNode.prototype.getKey=function(){return this.key},e.DictNode.prototype.getSuccessor=function(){return this.next},e.DictNode.prototype.getPredecessor=function(){return this.prev},e.GluTesselator=function(){this.state_=e.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.errorCallback_=null,this.normal_=[0,0,0],this.windingRule=e.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.combineCallback_=null,this.boundaryOnly_=!1,this.beginCallback_=null,this.edgeFlagCallback_=null,this.vertexCallback_=null,this.endCallback_=null,this.meshCallback_=null,this.polygonData_=null},e.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},e.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(e.GluTesselator.tessState_.T_DORMANT)},e.GluTesselator.prototype.gluTessProperty=function(t,r){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return;case e.gluEnum.GLU_TESS_WINDING_RULE:var i=r;switch(i){case e.windingRule.GLU_TESS_WINDING_ODD:case e.windingRule.GLU_TESS_WINDING_NONZERO:case e.windingRule.GLU_TESS_WINDING_POSITIVE:case e.windingRule.GLU_TESS_WINDING_NEGATIVE:case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=i)}break;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly_=!!r);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}this.callErrorCallback(e.gluEnum.GLU_INVALID_VALUE)},e.GluTesselator.prototype.gluGetTessProperty=function(t){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return 0;case e.gluEnum.GLU_TESS_WINDING_RULE:var r=this.windingRule;return e.assert(r===e.windingRule.GLU_TESS_WINDING_ODD||r===e.windingRule.GLU_TESS_WINDING_NONZERO||r===e.windingRule.GLU_TESS_WINDING_POSITIVE||r===e.windingRule.GLU_TESS_WINDING_NEGATIVE||r===e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),r;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return e.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}return!1},e.GluTesselator.prototype.gluTessNormal=function(e,t,r){this.normal_[0]=e,this.normal_[1]=t,this.normal_[2]=r},e.GluTesselator.prototype.gluTessCallback=function(t,r){var i=r||null;switch(t){case e.gluEnum.GLU_TESS_BEGIN:case e.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.beginCallback_=i);case e.gluEnum.GLU_TESS_EDGE_FLAG:case e.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.edgeFlagCallback_=i);case e.gluEnum.GLU_TESS_VERTEX:case e.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.vertexCallback_=i);case e.gluEnum.GLU_TESS_END:case e.gluEnum.GLU_TESS_END_DATA:return void(this.endCallback_=i);case e.gluEnum.GLU_TESS_ERROR:case e.gluEnum.GLU_TESS_ERROR_DATA:return void(this.errorCallback_=i);case e.gluEnum.GLU_TESS_COMBINE:case e.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.combineCallback_=i);case e.gluEnum.GLU_TESS_MESH:return void(this.meshCallback_=i);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}},e.GluTesselator.prototype.gluTessVertex=function(t,r){var i=!1,n=[0,0,0];this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR);for(var s=0;s<3;++s){var o=t[s];o<-e.GLU_TESS_MAX_COORD&&(o=-e.GLU_TESS_MAX_COORD,i=!0),o>e.GLU_TESS_MAX_COORD&&(o=e.GLU_TESS_MAX_COORD,i=!0),n[s]=o}i&&this.callErrorCallback(e.errorType.GLU_TESS_COORD_TOO_LARGE),this.addVertex_(n,r)},e.GluTesselator.prototype.gluTessBeginPolygon=function(t){this.requireState_(e.GluTesselator.tessState_.T_DORMANT),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON,this.mesh=new e.GluMesh,this.polygonData_=t},e.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null},e.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON},e.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_DORMANT,e.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]),e.sweep.computeInterior(this),!this.fatalError){var t=this.mesh;if(this.boundaryOnly_?e.tessmono.setWindingNumber(t,1,!0):e.tessmono.tessellateInterior(t),this.mesh.checkMesh(),this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)if(this.boundaryOnly_)e.render.renderBoundary(this,this.mesh);else{var r=!!this.edgeFlagCallback_;e.render.renderMesh(this,this.mesh,r)}if(this.meshCallback_)return e.tessmono.discardExterior(this.mesh),this.meshCallback_(this.mesh),this.mesh=null,void(this.polygonData_=null)}e.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},e.GluTesselator.prototype.requireState_=function(e){this.state_!==e&&this.gotoState_(e)},e.GluTesselator.prototype.gotoState_=function(t){for(;this.state_!==t;)if(this.state_<t)switch(this.state_){case e.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case e.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}},e.GluTesselator.prototype.addVertex_=function(t,r){var i=this.lastEdge_;null===i?(i=e.mesh.makeEdge(this.mesh),e.mesh.meshSplice(i,i.sym)):(e.mesh.splitEdge(i),i=i.lNext),i.org.data=r,i.org.coords[0]=t[0],i.org.coords[1]=t[1],i.org.coords[2]=t[2],i.winding=1,i.sym.winding=-1,this.lastEdge_=i},e.GluTesselator.prototype.callBeginCallback=function(e){this.beginCallback_&&this.beginCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callVertexCallback=function(e){this.vertexCallback_&&this.vertexCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEdgeFlagCallback=function(e){this.edgeFlagCallback_&&this.edgeFlagCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)},e.GluTesselator.prototype.callCombineCallback=function(e,t,r){return this.combineCallback_&&this.combineCallback_(e,t,r,this.polygonData_)||null},e.GluTesselator.prototype.callErrorCallback=function(e){this.errorCallback_&&this.errorCallback_(e,this.polygonData_)},e.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.inside=!1},e.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},e.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},e.GluHalfEdge.prototype.dst=function(){return this.sym.org},e.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},e.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},e.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},e.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},e.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},e.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},e.GluMesh=function(){this.vHead=new e.GluVertex,this.fHead=new e.GluFace,this.eHead=new e.GluHalfEdge,this.eHeadSym=new e.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},e.GluMesh.prototype.checkMesh=function(){if(e.DEBUG){var t,r,i=this.fHead,n=this.vHead,s=this.eHead,o=i;for(o=i;(r=o.next)!==i;o=r){e.assert(r.prev===o),t=r.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.lFace===r),t=t.lNext}while(t!==r.anEdge)}e.assert(r.prev===o&&null===r.anEdge);var a,l=n;for(l=n;(a=l.next)!==n;l=a){e.assert(a.prev===l),t=a.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.org===a),t=t.oNext}while(t!==a.anEdge)}e.assert(a.prev===l&&null===a.anEdge&&null===a.data);var u=s;for(u=s;(t=u.next)!==s;u=t)e.assert(t.sym.next===u.sym),e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(null!==t.org),e.assert(null!==t.dst()),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t);e.assert(t.sym.next===u.sym&&t.sym===this.eHeadSym&&t.sym.sym===t&&null===t.org&&null===t.dst()&&null===t.lFace&&null===t.rFace())}},e.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0},e.PriorityQ=function(){this.verts_=[],this.order_=null,this.size_=0,this.initialized_=!1,this.heap_=new e.PriorityQHeap},e.PriorityQ.prototype.deleteQ=function(){this.heap_=null,this.order_=null,this.verts_=null},e.PriorityQ.prototype.init=function(){this.order_=[];for(var t=0;t<this.size_;t++)this.order_[t]=t;var r=function(t){return function(r,i){return e.geom.vertLeq(t[r],t[i])?1:-1}}(this.verts_);if(this.order_.sort(r),this.initialized_=!0,this.heap_.init(),e.DEBUG){var i=0+this.size_-1;for(t=0;t<i;++t)e.assert(e.geom.vertLeq(this.verts_[this.order_[t+1]],this.verts_[this.order_[t]]))}},e.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_++;return this.verts_[t]=e,-(t+1)},e.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var r=this.heap_.minimum();if(e.geom.vertLeq(r,t))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.verts_[this.order_[this.size_-1]]);return t},e.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var r=this.heap_.minimum();if(e.geom.vertLeq(r,t))return r}return t},e.PriorityQ.prototype.remove=function(t){if(t>=0)this.heap_.remove(t);else for(t=-(t+1),e.assert(t<this.verts_.length&&null!==this.verts_[t]),this.verts_[t]=null;this.size_>0&&null===this.verts_[this.order_[this.size_-1]];)--this.size_},e.PriorityQHeap=function(){this.heap_=e.PriorityQHeap.reallocNumeric_([0],e.PriorityQHeap.INIT_SIZE_+1),this.verts_=[null,null],this.handles_=[0,0],this.size_=0,this.max_=e.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.heap_[1]=1},e.PriorityQHeap.INIT_SIZE_=32,e.PriorityQHeap.reallocNumeric_=function(e,t){for(var r=new Array(t),i=0;i<e.length;i++)r[i]=e[i];for(;i<t;i++)r[i]=0;return r},e.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},e.PriorityQHeap.prototype.insert=function(t){var r,i=++this.size_;return 2*i>this.max_&&(this.max_*=2,this.handles_=e.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1)),0===this.freeList_?r=i:(r=this.freeList_,this.freeList_=this.handles_[this.freeList_]),this.verts_[r]=t,this.handles_[r]=i,this.heap_[i]=r,this.initialized_&&this.floatUp_(i),r},e.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},e.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]},e.PriorityQHeap.prototype.extractMin=function(){var e=this.heap_,t=this.verts_,r=this.handles_,i=e[1],n=t[i];return this.size_>0&&(e[1]=e[this.size_],r[e[1]]=1,t[i]=null,r[i]=this.freeList_,this.freeList_=i,--this.size_>0&&this.floatDown_(1)),n},e.PriorityQHeap.prototype.remove=function(t){var r=this.heap_,i=this.verts_,n=this.handles_;e.assert(t>=1&&t<=this.max_&&null!==i[t]);var s=n[t];if(r[s]=r[this.size_],n[r[s]]=s,s<=--this.size_)if(s<=1)this.floatDown_(s);else{var o=i[r[s]],a=i[r[s>>1]];e.geom.vertLeq(a,o)?this.floatDown_(s):this.floatUp_(s)}i[t]=null,n[t]=this.freeList_,this.freeList_=t},e.PriorityQHeap.prototype.floatDown_=function(t){for(var r=this.heap_,i=this.verts_,n=this.handles_,s=t,o=r[s];;){var a=s<<1;a<this.size_&&e.geom.vertLeq(i[r[a+1]],i[r[a]])&&(a+=1),e.assert(a<=this.max_);var l=r[a];if(a>this.size_||e.geom.vertLeq(i[o],i[l]))return r[s]=o,void(n[o]=s);r[s]=l,n[l]=s,s=a}},e.PriorityQHeap.prototype.floatUp_=function(t){for(var r=this.heap_,i=this.verts_,n=this.handles_,s=t,o=r[s];;){var a=s>>1,l=r[a];if(0===a||e.geom.vertLeq(i[l],i[o]))return r[s]=o,void(n[o]=s);r[s]=l,n[l]=s,s=a}},e.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},e.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},e.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()},e}.apply(null,[]))||(e.exports=i)},1977:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(7)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._resolver=null}return e.prototype.isHeld=function(){return!!this._resolver},e.prototype.acquire=function(){var e=this;return this._resolver?this._resolver.promise.then(function(){return e.acquire()}):(this._resolver=r.createResolver(),r.resolve())},e.prototype.release=function(){var e=this._resolver;this._resolver=null,e.resolve()},e}();t.default=i,t.withLock=function(e,t){return e.acquire().then(function(){return t()}).then(function(){return e.release()}).catch(function(t){throw e.release(),t})}}.apply(null,i))||(e.exports=n)}}]);