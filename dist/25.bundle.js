(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/ImageryLayer":535,"esri/layers/support/PixelBlock":1871,"esri/layers/support/rasterFormats/Zlib":1872,"esri/layers/mixins/ArcGISImageService":2124,"esri/tasks/ImageServiceIdentifyTask":2125,"esri/tasks/support/ImageServiceIdentifyResult":2126,"esri/layers/support/Raster":2127,"esri/layers/support/rasterFormats/JpgPlus":2128,"esri/layers/support/rasterFormats/Jpg":2129,"esri/layers/support/rasterFormats/Png":2130,"esri/layers/support/rasterFormats/Raw":2131,"esri/layers/support/MosaicRule":2132,"esri/layers/support/RasterFunction":2133,"esri/layers/support/DimensionalDefinition":2134,"esri/tasks/support/ImageServiceIdentifyParameters":2135})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1871:function(e,t,i){var r,n;r=[i(4),i(5)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.layers.support.PixelBlock",normalizeCtorArgs:function(e){if(!e.width||Math.floor(e.width)!==e.width)throw"PixelBlock: incorrect width";if(!e.height||Math.floor(e.height)!==e.height)throw"PixelBlock: incorrect height";if(!e.pixels||!e.statistics)throw"PixelBlock: pixel data or statistics not present"},properties:{height:null,mask:null,pixels:[],pixelType:null,planes:null,statistics:[],width:null},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?console.error("Inconsistent pixel data and statistics"):this.statistics.length},addData:function(e){if(!e.pixels||!e.statistics)throw"Pixel data or statistics are not present";if(e.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(e.statistics),this.pixels.push(e.pixels)},getAsRGBA:function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)},getAsRGBAFloat:function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e},clone:function(){var e,i,r=new this.constructor;if(r.width=this.width,r.height=this.height,r.pixelType=this.pixelType,this.mask&&(r.mask=new Uint8Array(this.mask)),this.pixels)for(r.pixels=[],i=this.pixels.length,e=0;e<i;e++)r.pixels[e]=new Float32Array(this.pixels[e]);if(this.statistics)for(r.statistics=[],i=this.statistics.length,e=0;e<i;e++)r.statistics[e]=t.clone(this.statistics[e]);return r},_fillFrom8Bit:function(e){var t,i,r,n,a=this.pixels,s=this.mask;if(!e||!a||!a.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");t=i=r=a[0],a.length>=3&&(i=a[1],r=a[2]);var o=new Uint32Array(e),l=this.width*this.height;if(t.length!==l)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(s&&s.length===l)for(n=0;n<l;n++)s[n]&&(o[n]=255<<24|r[n]<<16|i[n]<<8|t[n]);else for(n=0;n<l;n++)o[n]=255<<24|r[n]<<16|i[n]<<8|t[n]},_fillFromNon8Bit:function(e){var t=this.pixels,i=this.mask,r=this.statistics;if(!e||!t||!t.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var n=1,a=0;if(r&&r.length>0)a=r[0].minValue,n=255/(r[0].maxValue-r[0].minValue);else{var s=255;"s8"===this.pixelType?(a=-128,s=127):"u16"===this.pixelType?s=65535:"s16"===this.pixelType?(a=-32768,s=32767):"u32"===this.pixelType?s=4294967295:"s32"===this.pixelType?(a=-2147483648,s=2147483647):"f32"===this.pixelType?(a=-3.4e39,s=3.4e39):"f64"===this.pixelType&&(a=-Number.MAX_VALUE,s=Number.MAX_VALUE),n=255/(s-a)}var o,l,u,h,c,f=new Uint32Array(e),d=this.width*this.height;if((o=t[0]).length!==d)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=3)if(l=t[1],u=t[2],i&&i.length===d)for(h=0;h<d;h++)i[h]&&(f[h]=255<<24|(u[h]-a)*n<<16|(l[h]-a)*n<<8|(o[h]-a)*n);else for(h=0;h<d;h++)f[h]=255<<24|(u[h]-a)*n<<16|(l[h]-a)*n<<8|(o[h]-a)*n;else if(i&&i.length===d)for(h=0;h<d;h++)c=(o[h]-a)*n,i[h]&&(f[h]=255<<24|c<<16|c<<8|c);else for(h=0;h<d;h++)c=(o[h]-a)*n,f[h]=255<<24|c<<16|c<<8|c},_fillFrom32Bit:function(e){var t,i,r,n,a=this.pixels,s=this.mask;if(!e||!a||!a.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");t=i=r=a[0],a.length>=3&&(i=a[1],r=a[2]);var o=this.width*this.height;if(t.length!==o)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");var l=0;if(s&&s.length===o)for(n=0;n<o;n++)e[l++]=t[n],e[l++]=i[n],e[l++]=r[n],e[l++]=s[n];else for(n=0;n<o;n++)e[l++]=t[n],e[l++]=i[n],e[l++]=r[n],e[l++]=255}})}.apply(null,r))||(e.exports=n)},1872:function(e,t,i){var r;void 0===(r=function(){var e=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,i=t?t.byteLength:0;if(e<i)return t;for(var r=512;r<e;)r<<=1;for(var n=new Uint8Array(r),a=0;a<i;++a)n[a]=t[a];return this.buffer=n},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var i=t+e;!this.eof&&this.bufferLength<i;)this.readBlock();var r=this.bufferLength;i>r&&(i=r)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(t,i)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,i){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,i)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}();return function(){function t(e){throw new Error(e)}function i(i){var r=0,n=i[r++],a=i[r++];-1!=n&&-1!=a||t("Invalid header in flate stream"),8!=(15&n)&&t("Unknown compression method in flate stream"),((n<<8)+a)%31!=0&&t("Bad FCHECK in flate stream"),32&a&&t("FDICT bit set in flate stream"),this.bytes=i,this.bytesPos=r,this.codeSize=0,this.codeBuf=0,e.call(this)}var r=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),s=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],o=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return i.prototype=Object.create(e.prototype),i.prototype.getBits=function(e){for(var i,r=this.codeSize,n=this.codeBuf,a=this.bytes,s=this.bytesPos;r<e;)void 0===(i=a[s++])&&t("Bad encoding in flate stream"),n|=i<<r,r+=8;return i=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=r-=e,this.bytesPos=s,i},i.prototype.getCode=function(e){for(var i=e[0],r=e[1],n=this.codeSize,a=this.codeBuf,s=this.bytes,o=this.bytesPos;n<r;){var l;void 0===(l=s[o++])&&t("Bad encoding in flate stream"),a|=l<<n,n+=8}var u=i[a&(1<<r)-1],h=u>>16,c=65535&u;return(0==n||n<h||0==h)&&t("Bad encoding in flate stream"),this.codeBuf=a>>h,this.codeSize=n-h,this.bytesPos=o,c},i.prototype.generateHuffmanTable=function(e){for(var t=e.length,i=0,r=0;r<t;++r)e[r]>i&&(i=e[r]);for(var n=1<<i,a=new Uint32Array(n),s=1,o=0,l=2;s<=i;++s,o<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==s){var h=0,c=o;for(r=0;r<s;++r)h=h<<1|1&c,c>>=1;for(r=h;r<n;r+=l)a[r]=s<<16|u;++o}return[a,i]},i.prototype.readBlock=function(){function e(e,t,i,r,n){for(var a=e.getBits(i)+r;a-- >0;)t[p++]=n}var i=this.getBits(3);if(1&i&&(this.eof=!0),0!=(i>>=1)){var l,u;if(1==i)l=s,u=o;else if(2==i){for(var h=this.getBits(5)+257,c=this.getBits(5)+1,f=this.getBits(4)+4,d=Array(r.length),p=0;p<f;)d[r[p++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),g=0,v=(p=0,h+c),y=new Array(v);p<v;){var b=this.getCode(m);16==b?e(this,y,2,3,g):17==b?e(this,y,3,3,g=0):18==b?e(this,y,7,11,g=0):y[p++]=g=b}l=this.generateHuffmanTable(y.slice(0,h)),u=this.generateHuffmanTable(y.slice(h,v))}else t("Unknown block type in flate stream");for(var x=(_=this.buffer)?_.length:0,w=this.bufferLength;;){var k=this.getCode(l);if(k<256)w+1>=x&&(x=(_=this.ensureBuffer(w+1)).length),_[w++]=k;else{if(256==k)return void(this.bufferLength=w);var D=(k=n[k-=257])>>16;D>0&&(D=this.getBits(D));g=(65535&k)+D;k=this.getCode(u),(D=(k=a[k])>>16)>0&&(D=this.getBits(D));var T=(65535&k)+D;w+g>=x&&(x=(_=this.ensureBuffer(w+g)).length);for(var I=0;I<g;++I,++w)_[w]=_[w-T]}}}else{var S,R=this.bytes,A=this.bytesPos;void 0===(S=R[A++])&&t("Bad block header in flate stream");var C=S;void 0===(S=R[A++])&&t("Bad block header in flate stream"),C|=S<<8,void 0===(S=R[A++])&&t("Bad block header in flate stream");var P=S;void 0===(S=R[A++])&&t("Bad block header in flate stream"),(P|=S<<8)!=(65535&~C)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var O=this.bufferLength,_=this.ensureBuffer(O+C),U=O+C;this.bufferLength=U;for(var F=O;F<U;++F){if(void 0===(S=R[A++])){this.eof=!0;break}_[F]=S}this.bytesPos=A}},i}()}.apply(null,[]))||(e.exports=r)},2124:function(e,t,i){var r,n;r=[i(160),i(155),i(2127),i(1871),i(2132),i(2133),i(2134),i(19),i(23),i(22),i(120),i(2125),i(2135),i(21),i(57),i(107),i(5),i(4),i(17),i(7),i(9)],void 0===(n=function(e,t,i,r,n,a,s,o,l,u,h,c,f,d,p,m,g,v,y,b,x){var w=y({S8:"s8",S16:"s16",S32:"s32",U8:"u8",U16:"u16",U32:"u32",F32:"f32",F64:"f64"}),k=x.getLogger("esri.layers.mixins.ArcGISImageService"),D=v.createSubclass({properties:{layer:{},mosaicRule:{dependsOn:["layer.mosaicRule"],get:function(){return this.get("layer.mosaicRule")||null}},version:{value:0,dependsOn:["layer.bandIds","layer.format","layer.compressionQuality","layer.compressionTolerance","layer.interpolation","layer.noData","layer.noDataInterpretation","layer.mosaicRule","layer.renderingRule","layer.adjustAspectRatio"],get:function(){var e=this.layer;return e.bandIds,e.format,e.compressionQuality,e.compressionTolerance,e.interpolation,e.noData,e.noDataInterpretation,e.mosaicRule,e.renderingRule,e.adjustAspectRatio,this._get("version")+1}}},toJSON:function(){var e=this.layer;return{bandIds:e.bandIds?e.bandIds.join(","):null,format:e.format,compressionQuality:e.compressionQuality,compressionTolerance:e.compressionTolerance,interpolation:e.interpolation,noData:e.noData,noDataInterpretation:e.noDataInterpretation,mosaicRule:this.mosaicRule?JSON.stringify(this.mosaicRule.toJSON()):null,renderingRule:e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,adjustAspectRatio:e.adjustAspectRatio}}});return e.createSubclass({declaredClass:"esri.layers.mixins.ArcGISImageService",getDefaults:function(){return g.mixin(this.inherited(arguments),{exportImageServiceParameters:{layer:this}})},_raster:null,properties:{adjustAspectRatio:{},bandCount:{},bandIds:{type:[Number],json:{write:!0}},capabilities:{json:{read:function(e){return e&&e.split(",").map(function(e){return e.trim()})}}},compressionQuality:{type:Number,json:{write:!0}},compressionTolerance:.01,copyright:{json:{read:{source:["copyrightText"],reader:function(e,t){return t.copyrightText}}}},definitionExpression:{get:function(){return this.mosaicRule?this.mosaicRule.where:null},set:function(e){var t=this.mosaicRule||new n;t.where=e,this._set("mosaicRule",t)},json:{read:{source:["definitionExpression","layerDefinition.definitionExpression"],reader:function(e,t){return e||t.layerDefinition&&t.layerDefinition.definitionExpression||void 0}}}},domainFields:{value:null,type:[t],dependsOn:["fields"],get:function(){return this.fields&&this.fields.filter(function(e){return null!=e.domain})||[]}},exportImageServiceParameters:{readOnly:!0,type:D},fields:{type:[t]},fullExtent:{type:o,json:{read:{source:["extent"],reader:function(e,t){return o.fromJSON(t.extent)}}}},format:{type:String,dependsOn:["pixelFilter"],get:function(){return null!=this.pixelFilter?"lerc":"jpgpng"},json:{write:!0}},hasRasterAttributeTable:{},hasMultidimensions:{},imageMaxHeight:{value:4100,json:{origins:{service:{read:{source:"maxImageHeight"}}}}},imageMaxWidth:{value:15e3,json:{origins:{service:{read:{source:"maxImageWidth"}}}}},interpolation:{type:String,json:{write:!0}},mosaicRule:{value:null,type:n,json:{origins:{service:{read:{source:["defaultMosaicMethod"],reader:function(e,t){return n.fromJSON(t)}}}},write:!0}},multidimensionalInfo:null,noData:{type:Number,json:{write:!0}},noDataInterpretation:{type:String,json:{write:!0}},objectIdField:{json:{read:{source:["fields"],reader:function(e,t){return!e&&t.fields&&t.fields.some(function(t){return"esriFieldTypeOID"===t.type&&(e=t.name),!!e}),e}}}},pixelFilter:{},pixelType:{type:String,value:null,json:{read:w.fromJSON,write:w.write}},pixelSizeX:{value:0},pixelSizeY:{value:0},popupTemplate:{value:null,type:m,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}},queryTask:{readOnly:!0,dependsOn:["url"],get:function(){return new h({url:this.url})}},renderer:{json:{origins:{service:{read:!1}},read:{source:"layerDefinition.drawingInfo.renderer",reader:function(){k.warn("Client side renderer configuration on ImageryLayer (id: "+this.id+", title: "+this.title+") is not yet supported. Visualization of the layer data may differ from what is expected.")}},write:!1}},rasterAttributeTable:null,rasterAttributeTableFieldPrefix:"Raster.",rasterFields:{value:null,dependsOn:["fields","rasterAttributeTable","rasterAttributeTableFieldPrefix"],get:function(){var e=this.rasterAttributeTableFieldPrefix,t=this.fields?g.clone(this.fields):[],i=t.length;if(t[i]={name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"},(this.capabilities&&this.capabilities.indexOf("Catalog")>-1||this.fields&&this.fields.length>0)&&(t[i+1]={name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),g.isDefined(this.pixelFilter)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){t[i+2]={name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"},t[i+3]={name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"}}var r=this.rasterAttributeTable&&this.rasterAttributeTable.fields||null;if(r&&r.length>0){var n=r.filter(function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()}).map(function(t){var i=g.clone(t);return i.name=e+t.name,i});t=t.concat(n)}return t}},renderingRule:{value:null,type:a,json:{origins:{service:{read:{source:["rasterFunctionInfos"],reader:function(e,t){var i=t.rasterFunctionInfos;return t.renderingRule||i&&i.length&&"None"!==i[0].name?a.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}}}},write:!0}},serviceDataType:{},spatialReference:{value:null,readOnly:!0,json:{read:{source:["extent"],reader:function(e,t){return(e=t.extent&&t.extent.spatialReference)&&u.fromJSON(e)}}}},url:{},version:{value:null,readOnly:!0,json:{read:{source:["currentVersion","fields","timeInfo"],reader:function(e,t){return(e=t.currentVersion)||(e=t.hasOwnProperty("fields")||t.hasOwnProperty("objectIdField")||t.hasOwnProperty("timeInfo")?10:9.3),e}}}}},applyFilter:function(e){var t=this._clonePixelData(e);return this.pixelFilter&&this.pixelFilter(t),t},fetchImage:function(e,t,i,r){if(!(g.isDefined(this._raster)&&g.isDefined(e)&&g.isDefined(t)&&g.isDefined(i)))return b.reject(new Error("Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var n={imageServiceParameters:this.getExportImageServiceParameters(e,t,i,r),nBands:Math.min(this.bandCount,3),pixelType:this.pixelType};return this._raster.read(n)},fetchKeyProperties:function(){return d(this.parsedUrl.path+"/keyProperties",{query:g.mixin({f:"json"}),responseType:"json",callbackParamName:"callback"}).then(function(e){return e.data})},getExportImageServiceParameters:function(e,t,i,r){var n=(e=e.clone().shiftCentralMeridian())&&e.spatialReference;return n=n&&(n.wkid||JSON.stringify(n.toJSON())),g.mixin({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:n,imageSR:n,size:t+","+i},this.exportImageServiceParameters.toJSON())},queryRasters:function(e){return this.queryTask.execute(e)},queryVisibleRasters:function(e,t){this._visibleRasters=[];var i,r,n,a,s=!1,o=this.popupTemplate;if(o&&o.fieldInfos&&o.fieldInfos.length>0&&(s=o.fieldInfos.length>1||"raster.servicepixelvalue"!==o.fieldInfos[0].toLowerCase()),o&&!s&&this.rasterFields&&(s=this.rasterFields.some(function(e){var t=e&&e.name?e.name.toLowerCase():null;return t&&"raster.servicepixelvalue"!==t&&(o.title&&o.title.toLowerCase().indexOf(t)>-1||o.content&&o.content.toLowerCase().indexOf(t)>-1)})),t.layerView&&t.layerView.view){var u=t.layerView.view;if("2d"===u.type){var h=u.state;i=h.spatialReference.clone(),r=h.resolution}else i=u.spatialReference.clone(),r=u.resolution;r&&(n=new l(.5*r,.5*r,i)),a=i.equals(this.spatialReference)}var d=new f({geometry:e.geometry,returnCatalogItems:s,timeExtent:e.timeExtent,mosaicRule:this.mosaicRule||null,renderingRule:this.renderingRule||null,returnGeometry:a,outSpatialReference:i,pixelSize:n});return new c({url:this.url}).execute(d).then(function(e){return this._processVisibleRastersResponse(e,t)}.bind(this)).catch(function(e){throw new Error("Error querying for visible rasters")})},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_fetchService:function(){return b.resolve().then(function(){return this.resourceInfo||d(this.parsedUrl.path,{query:g.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(e){e.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.read(e.data,{origin:"service",url:this.parsedUrl}),this._raster=new i({url:this.url})}.bind(this)).then(function(){if(this.version>10&&this.hasRasterAttributeTable)return d(this.parsedUrl.path+"/rasterAttributeTable",{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;t&&t.features&&t.fields&&this.read({rasterAttributeTable:t},{origin:"service",url:this.parsedUrl})}.bind(this))}.bind(this)).then(function(){if(this.version>=10.3&&this._isScientificData()&&this.hasMultidimensions)return d(this.parsedUrl.path+"/multiDimensionalInfo",{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;t&&t.multidimensionalInfo&&(this._updateMultidimensionalDefinition(t.multidimensionalInfo),this.multidimensionalInfo=t.multidimensionalInfo)}.bind(this))}.bind(this))},_updateMultidimensionalDefinition:function(e){var t,i=e.variables[0].dimensions,r=[];for(t in i)if(i.hasOwnProperty(t)){var a=i[t],o=!0,l=a.extent,u=[l[0]];a.hasRanges&&!0===a.hasRanges?(o=!1,u=[a.values[0]]):"stdz"===a.name.toLowerCase()&&Math.abs(l[1])<=Math.abs(l[0])&&(u=[l[1]]),r.push(new s({variableName:"",dimensionName:i[t].name,isSlice:o,values:u}))}if(r.length>0){this.mosaicRule=this.mosaicRule||new n;var h=this.mosaicRule.multidimensionalDefinition;(!h||h&&h.length<=0)&&(this.mosaicRule.multidimensionalDefinition=r)}},_clonePixelData:function(e){if(null===e||void 0===e)return e;var t={};e.extent&&(t.extent=e.extent.clone());var i=e.pixelBlock;return null===i||void 0===i?t:(t.pixelBlock=i.clone(),t)},_processVisibleRastersResponse:function(e,t){var i,r,n,a,s=e.value,l=0,u=this.objectIdField,h=e.catalogItems&&e.catalogItems.features&&e.catalogItems.features.length||0;if(h){var c,f,d=0,m=0;for(r=[h],i=[h],a=[h],l=0;l<h;l++)e.properties.Values[l].toLowerCase().indexOf("nodata")>-1&&m++;for(c=h-m,l=0;l<h;l++)r[f=e.properties.Values[l].toLowerCase().indexOf("nodata")>-1?c++:d++]=e.catalogItems.features[l],i[f]=e.properties.Values[l],a[f]=r[f].attributes[u]}this._visibleRasters=[];var g,v=s.toLowerCase().indexOf("nodata")>-1;if(s&&!r&&!v){u="ObjectId",r=[];var y={ObjectId:0};(g=new p(new o(this.fullExtent),null,y)).sourceLayer=this,r.push(g)}var b=[];if(!r)return b;var x,w=t&&t.returnDomainValues||!1;for(l=0,n=r.length;l<n;l++)(g=r[l]).sourceLayer=this,s&&(x=s,i&&i.length>=l&&(x=i[l].replace(/ /gi,", ")),g.attributes["Raster.ItemPixelValue"]=x,g.attributes["Raster.ServicePixelValue"]=s,this._updateFeatureWithMagDirValues(g,x),this._updateFeatureWithRasterAttributeTableValues(g,x)),w&&this._updateFeatureWithDomainValues(g),b.push(g);return b},_updateFeatureWithRasterAttributeTableValues:function(e,t){var i=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(i&&!(i.length<1)&&this.rasterAttributeTableFieldPrefix){var r=null;if(i.forEach(function(e){e&&e.attributes&&(e.attributes.Value!=t&&e.attributes.VALUE!=t||(r=e))}),r){var n,a={};for(n in r.attributes)r.attributes.hasOwnProperty(n)&&(a[this.rasterAttributeTableFieldPrefix+n]=r.attributes[n]);e.attributes=g.mixin(e.attributes,a)}}},_updateFeatureWithMagDirValues:function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var i=t.replace(" ","").split(","),n=new r({height:1,width:1,pixelType:"f32",pixels:[],statistics:[]});i.forEach(function(e){n.addData({pixels:[e],statistics:{minValue:e,maxValue:e,noDataValue:null}})}),this.pixelFilter({pixelBlock:n,extent:new o(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=n.pixels[0][0],e.attributes["Raster.Direction"]=n.pixels[1][0]}},_updateFeatureWithDomainValues:function(e){var t=this.domainFields;g.isDefined(t)&&t.forEach(function(t){if(t){var i=e.attributes[t.name];if(g.isDefined(i)){var r=this._findMatchingDomainValue(t.domain,i);g.isDefined(r)&&(e.attributes[t.name]=r)}}},this)},_findMatchingDomainValue:function(e,t){var i,r=e&&e.codedValues;if(r)return r.some(function(e){return e.code===t&&(i=e.name,!0)}),i}})}.apply(null,r))||(e.exports=n)},2125:function(e,t,i){var r,n;r=[i(21),i(5),i(154),i(131),i(2126)],void 0===(n=function(e,t,i,r,n){return r.createSubclass({declaredClass:"esri.tasks.ImageServiceIdentifyTask",properties:{parsedUrl:{get:function(){var e=this._parseUrl(this.url);return e.path+="/identify",e}},url:{}},execute:function(r,n){var a=r.geometry?[r.geometry]:[];return i.normalizeCentralMeridian(a).then(function(i){var a={query:this._encode(t.mixin({},this.parsedUrl.query,{f:"json"},r.toJSON({geometry:i&&i[0]}))),callbackParamName:"callback"};return(this.requestOptions||n)&&(a=t.mixin({},this.requestOptions,n,a)),e(this.parsedUrl.path,a)}.bind(this)).then(this._handleExecuteResponse)},_handleExecuteResponse:function(e){return n.fromJSON(e.data)}})}.apply(null,r))||(e.exports=n)},2126:function(e,t,i){var r,n;r=[i(6),i(23),i(101)],void 0===(n=function(e,t,i){return e.createSubclass({declaredClass:"esri.tasks.support.ImageServiceIdentifyResult",properties:{catalogItemVisibilities:null,catalogItems:{value:null,type:i},location:{value:null,type:t},name:null,objectId:null,properties:null,value:null}})}.apply(null,r))||(e.exports=n)},2127:function(e,t,i){var r,n;r=[i(4),i(5),i(20),i(7),i(21),i(19),i(22),i(1871),i(531),i(2128),i(2130),i(2131)],void 0===(n=function(e,t,i,r,n,a,s,o,l,u,h,c){return e.createSubclass({declaredClass:"esri.layers.support.Raster",validPixelTypes:["u1","u2","u4","u8","u16","u32","s8","s16","s32","f32"],validFormats:["lerc","jpeg","jpg","jpgpng","png","png8","png24","png32","bip","bsq"],properties:{parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){return this.url?i.urlToObject(this.url):null}},url:null},read:function(e){if(!e.imageServiceParameters||!e.nBands)return r.reject(new Error("Insufficient parameters to read data"));var i=t.clone(e.imageServiceParameters),a=e.nBands,s=e.pixelType||"f32";this.validPixelTypes.indexOf(s.toUpperCase())<=-1&&(i.pixelType="f32"),i.format=i.format||"lerc",this.validFormats.indexOf(i.format.toLowerCase())<=-1&&(i.format="lerc"),this._prepareGetImageParameters(i);var o=t.clone(i);return this._cleanupRequestParams(o),n(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:t.mixin(o,{f:"image"})}).then(function(e){var t=e.data;if(!this._isDataValid(t)){var n=new Error(String.fromCharCode.apply(null,new Uint8Array(t)));return r.reject(n)}var o=i.format.toUpperCase();"BSQ"!==o&&"BIP"!==o&&(o=this._getFormat(t));try{return this.validFormats.indexOf(o.toLowerCase())>-1?{pixelData:{pixelBlock:this._decodePixelBlock(t,{width:i.width,height:i.height,planes:a,pixelType:s,noDataValue:i.noData,format:o}),extent:i.extent},params:i}:r.reject(new Error("Cannot decode the pixelBlock. Unsupported Format: "+o))}catch(e){return r.reject(e)}}.bind(this))},_prepareGetImageParameters:function(e){if(e.size&&e.bbox){var i=e.size.split(",");if(e.width=parseFloat(i[0]),e.height=parseFloat(i[1]),!e.extent){var r=e.bbox.split(",");e.extent=new a(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),new s(e.bboxSR))}}else{if(!e.width||Math.floor(e.width)!==e.width||!e.height||Math.floor(e.height)!==e.height)throw new Error("Incorrect Image Dimensions");if(!e.extent||"esri.geometry.Extent"!==e.extent.declaredClass)throw new Error("Incorrect extent");var n=e.extent,o=n.spatialReference.wkid||JSON.stringify(n.spatialReference.toJSON());delete e._ts,t.mixin(e,{bbox:n.xmin+","+n.ymin+","+n.xmax+","+n.ymax,imageSR:o,bboxSR:o,size:e.width+","+e.height},e.disableClientCaching?{_ts:Date.now()}:{})}},_adjustExtent:function(e,t,i){var r=e.ymax-e.ymin,n=e.xmax-e.xmin;return i>=t?(r=n*t/i,e.ymax=e.ymin+r):(n=r*i/t,e.xmax=e.xmin+n),e},_cleanupRequestParams:function(e){if(!e)return e;var t,i=["width","height","extent"];for(t in i)e.hasOwnProperty(i[t])&&delete e[i[t]];return e},_getFormat:function(e){var t=new Uint8Array(e,0,10),i="";return 255===t[0]&&216===t[1]?i="JPEG":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?i="PNG":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?i="LERC":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(i="ERROR"),i},_isDataValid:function(e){var t=new Uint8Array(e,0,10);return!(String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1)},_calculateBandStatistics:function(e){var t,i=1/0,r=-1/0,n=e.length,a=0;for(t=0;t<n;t++)i=(a=e[t])<i?a:i,r=a>r?a:r;return{minValue:i,maxValue:r}},_verifyResult:function(e,t){return!(!e||e.height!==t.height||e.width!==t.width)},_getPixelTypeAndNoData:function(e){var t,i=e.noDataValue,r=e.pixelType;return"u1"===r||"u2"===r||"u4"===r||"u8"===r?(r="u8",i=Math.pow(2,8)-1,t=Uint8Array):"u16"===r?(i=i||Math.pow(2,16)-1,t=Uint16Array):"u32"===r?(i=i||Math.pow(2,32)-1,t=Uint32Array):"s8"===r?(i=i||0-Math.pow(2,7),t=Int8Array):"s16"===r?(i=i||0-Math.pow(2,15),t=Int16Array):"s32"===r?(i=i||0-Math.pow(2,31),t=Int32Array):t=Float32Array,{pixelType:r,pixelDataType:t,noDataValue:i}},_decodePixelBlock:function(e,t){if(!e||!t)throw new Error("Cannot decode the pixelBlock. Invalid parameters provided for decoding.");if(!t.height||Math.floor(t.height)!==t.height)throw new Error("Cannot decode the pixelBlock. Height is not provided.");if(!t.width||Math.floor(t.width)!==t.width)throw new Error("Cannot decode the pixelBlock. Width is not provided.");var i=this._decodeLerc;switch(t.format.toUpperCase()){case"JPEG":i=this._decodeJpeg;break;case"PNG":i=this._decodePng;break;case"BSQ":i=this._decodeBsq;break;case"BIP":i=this._decodeBip}var r,n,a=(i=i.bind(this))(e,t),s=a.statistics||[];if(s.length<=0)for(r=0;r<a.pixels.length;r++)n=a.pixels[r],s.push(this._calculateBandStatistics(n));return new o({width:t.width,height:t.height,pixels:a.pixels,pixelType:t.pixelType,mask:a.mask,statistics:s})},_decodeJpeg:function(e,t){if(!u)throw new Error("The jpeg decoder module is not loaded.");var i=(new u).decode(e);if(!this._verifyResult(i,t))throw new Error("Error in decoding the image. The decoded image dimensions are incorrect.");return t.width=i.width,t.height=i.height,t.pixelType="U8",i},_decodePng:function(e,t){if(!h)throw new Error("The png decoder module is not loaded.");var i=new Uint8Array(e),r=new h(i),n=new Uint8Array(t.width*t.height*4);r.copyToImageData(n,r.decodePixels());var a,s=0,o=0,l=new Uint8Array(t.width*t.height);for(s=0;s<t.width*t.height;s++)l[s]=n[4*s+3];var u={pixels:[],mask:l};for(s=0;s<3;s++){for(a=new Uint8Array(t.width*t.height),o=0;o<t.width*t.height;o++)a[o]=n[4*o+s];u.pixels.push(a)}return t.pixelType="U8",u},_decodeBsq:function(e,t){if(!c)throw new Error("The bsq decoder module is not loaded.");var i=this._getPixelTypeAndNoData(t);return c.decodeBSQ(e,{bandCount:t.planes,width:t.width,height:t.height,pixelType:i.pixelDataType,noDataValue:i.noDataValue})},_decodeBip:function(e,t){if(!c)throw new Error("The bsq decoder module is not loaded.");var i=this._getPixelTypeAndNoData(t);return c.decodeBIP(e,{bandCount:t.planes,width:t.width,height:t.height,pixelType:i.pixelDataType,noDataValue:i.noDataValue})},_decodeLerc:function(e,t){var i=this._getPixelTypeAndNoData(t);t.pixelType=i.pixelType;for(var r,n=0,a=0,s=e.byteLength-10,o={pixels:[],statistics:[]};a<s;){var u=l.decode(e,{inputOffset:a,encodedMaskData:r,returnMask:0===n,returnEncodedMask:0===n,returnFileInfo:!0,pixelType:i.pixelDataType,noDataValue:i.noDataValue});if(a=u.fileInfo.eofOffset,0===n&&(r=u.encodedMaskData,o.mask=u.maskData),n++,!this._verifyResult(u,t))throw new Error("Error in decoding the image. The decoded image dimensions are incorrect.");o.pixels.push(u.pixelData),o.statistics.push({minValue:u.minValue,maxValue:u.maxValue,noDataValue:u.noDataValue})}return o}})}.apply(null,r))||(e.exports=n)},2128:function(e,t,i){var r,n;r=[i(117),i(1872),i(2129)],void 0===(n=function(e,t,i){"use strict";return e(null,{constructor:function(){},decode:function(e){var r=new Uint8Array(e),n=new i;n.parse(r);var a,s=n.numComponents,o=n.getData(n.width,n.height,!0),l=n.width*n.height,u=n.eof,h=0,c=0,f=0;if(u<r.length-1){var d=new t(r.subarray(u)).getBytes();a=new Uint8Array(l);var p=0;for(h=0;h<d.length;h++)for(f=7;f>=0;f--)a[p++]=d[h]>>f&1}var m,g=[];if(1===s)g=[o,o,o];else{for(h=0;h<3;h++)m=new Uint8Array(l),g.push(m);for(f=0,c=0;c<l;c++)for(h=0;h<3;h++)g[h][c]=o[f++]}return{width:n.width,height:n.height,pixels:g,mask:a}}})}.apply(null,r))||(e.exports=n)},2129:function(e,t,i){var r;void 0===(r=function(){"use strict";return function(){function e(){}function t(e,t){for(var i,r,n=0,a=[],s=16;s>0&&!e[s-1];)s--;a.push({children:[],index:0});var o,l=a[0];for(i=0;i<s;i++){for(r=0;r<e[i];r++){for((l=a.pop()).children[l.index]=t[n];l.index>0;)l=a.pop();for(l.index++,a.push(l);a.length<=i;)a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o;n++}i+1<s&&(a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o)}return a[0].children}function i(e,t,i){return 64*((e.blocksPerLine+1)*t+i)}function r(e,t,r,n,a,s,l,u,h){function c(){if(S>0)return I>>--S&1;if(255===(I=e[t++])){var i=e[t++];if(i)throw"unexpected marker: "+(I<<8|i).toString(16)}return S=7,I>>>7}function f(e){for(var t=e;;){if("number"==typeof(t=t[c()]))return t;if("object"!=typeof t)throw"invalid huffman sequence"}}function d(e){for(var t=0;e>0;)t=t<<1|c(),e--;return t}function p(e){if(1===e)return 1===c()?1:-1;var t=d(e);return t>=1<<e-1?t:t+(-1<<e)+1}var m,g,v,y,b,x,w,k=(r.precision,r.samplesPerLine,r.scanLines,r.mcusPerLine),D=r.progressive,T=(r.maxH,r.maxV,t),I=0,S=0,R=0,A=0,C=n.length;w=D?0===s?0===u?function(e,t){var i=f(e.huffmanTableDC),r=0===i?0:p(i)<<h;e.blockData[t]=e.pred+=r}:function(e,t){e.blockData[t]|=c()<<h}:0===u?function(e,t){if(R>0)R--;else for(var i=s,r=l;i<=r;){var n=f(e.huffmanTableAC),a=15&n,u=n>>4;if(0!==a){var c=o[i+=u];e.blockData[t+c]=p(a)*(1<<h),i++}else{if(u<15){R=d(u)+(1<<u)-1;break}i+=16}}}:function(e,t){for(var i,r,n=s,a=l,u=0;n<=a;){var g=o[n];switch(A){case 0:if(u=(r=f(e.huffmanTableAC))>>4,0==(i=15&r))u<15?(R=d(u)+(1<<u),A=4):(u=16,A=1);else{if(1!==i)throw"invalid ACn encoding";m=p(i),A=u?2:3}continue;case 1:case 2:e.blockData[t+g]?e.blockData[t+g]+=c()<<h:0==--u&&(A=2===A?3:0);break;case 3:e.blockData[t+g]?e.blockData[t+g]+=c()<<h:(e.blockData[t+g]=m<<h,A=0);break;case 4:e.blockData[t+g]&&(e.blockData[t+g]+=c()<<h)}n++}4===A&&0==--R&&(A=0)}:function(e,t){var i=f(e.huffmanTableDC),r=0===i?0:p(i);e.blockData[t]=e.pred+=r;for(var n=1;n<64;){var a=f(e.huffmanTableAC),s=15&a,l=a>>4;if(0!==s){var u=o[n+=l];e.blockData[t+u]=p(s),n++}else{if(l<15)break;n+=16}}};var P,O,_,U,F=0;for(O=1===C?n[0].blocksPerLine*n[0].blocksPerColumn:k*r.mcusPerColumn,a||(a=O);F<O;){for(v=0;v<C;v++)n[v].pred=0;if(R=0,1===C)for(g=n[0],x=0;x<a;x++)!function(e,t,r){w(e,i(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}(g,0,F),F++;else for(x=0;x<a;x++){for(v=0;v<C;v++)for(_=(g=n[v]).h,U=g.v,y=0;y<U;y++)for(b=0;b<_;b++)!function(e,t,r,n,a){var s=F%k;w(e,i(e,(F/k|0)*e.v+n,s*e.h+a))}(g,0,0,y,b);F++}if(S=0,(P=e[t]<<8|e[t+1])<=65280)throw"marker was not found";if(!(P>=65488&&P<=65495))break;t+=2}return t-T}function n(e,t,i){for(var r,n,a,s,o,g,v,y,b,x,w,k,D,T,I,S,R,A=e.quantizationTable,C=e.blockData,P=0;P<64;P+=8)b=C[t+P],x=C[t+P+1],w=C[t+P+2],k=C[t+P+3],D=C[t+P+4],T=C[t+P+5],I=C[t+P+6],S=C[t+P+7],b*=A[P],0!=(x|w|k|D|T|I|S)?(x*=A[P+1],w*=A[P+2],k*=A[P+3],D*=A[P+4],T*=A[P+5],I*=A[P+6],S*=A[P+7],n=(r=(r=p*b+128>>8)+(n=p*D+128>>8)+1>>1)-n,R=(a=w)*d+(s=I)*f+128>>8,a=a*f-s*d+128>>8,v=(o=(o=m*(x-S)+128>>8)+(v=T<<4)+1>>1)-v,g=(y=(y=m*(x+S)+128>>8)+(g=k<<4)+1>>1)-g,s=(r=r+(s=R)+1>>1)-s,a=(n=n+a+1>>1)-a,R=o*c+y*h+2048>>12,o=o*h-y*c+2048>>12,y=R,R=g*u+v*l+2048>>12,g=g*l-v*u+2048>>12,v=R,i[P]=r+y,i[P+7]=r-y,i[P+1]=n+v,i[P+6]=n-v,i[P+2]=a+g,i[P+5]=a-g,i[P+3]=s+o,i[P+4]=s-o):(R=p*b+512>>10,i[P]=R,i[P+1]=R,i[P+2]=R,i[P+3]=R,i[P+4]=R,i[P+5]=R,i[P+6]=R,i[P+7]=R);for(var O=0;O<8;++O)b=i[O],0!=((x=i[O+8])|(w=i[O+16])|(k=i[O+24])|(D=i[O+32])|(T=i[O+40])|(I=i[O+48])|(S=i[O+56]))?(n=(r=4112+((r=p*b+2048>>12)+(n=p*D+2048>>12)+1>>1))-n,R=(a=w)*d+(s=I)*f+2048>>12,a=a*f-s*d+2048>>12,s=R,v=(o=(o=m*(x-S)+2048>>12)+(v=T)+1>>1)-v,g=(y=(y=m*(x+S)+2048>>12)+(g=k)+1>>1)-g,R=o*c+y*h+2048>>12,o=o*h-y*c+2048>>12,y=R,R=g*u+v*l+2048>>12,g=g*l-v*u+2048>>12,S=(r=r+s+1>>1)-y,x=(n=n+a+1>>1)+(v=R),I=n-v,w=(a=n-a)+g,T=a-g,k=(s=r-s)+o,D=s-o,b=(b=r+y)<16?0:b>=4080?255:b>>4,x=x<16?0:x>=4080?255:x>>4,w=w<16?0:w>=4080?255:w>>4,k=k<16?0:k>=4080?255:k>>4,D=D<16?0:D>=4080?255:D>>4,T=T<16?0:T>=4080?255:T>>4,I=I<16?0:I>=4080?255:I>>4,S=S<16?0:S>=4080?255:S>>4,C[t+O]=b,C[t+O+8]=x,C[t+O+16]=w,C[t+O+24]=k,C[t+O+32]=D,C[t+O+40]=T,C[t+O+48]=I,C[t+O+56]=S):(R=(R=p*b+8192>>14)<-2040?0:R>=2024?255:R+2056>>4,C[t+O]=R,C[t+O+8]=R,C[t+O+16]=R,C[t+O+24]=R,C[t+O+32]=R,C[t+O+40]=R,C[t+O+48]=R,C[t+O+56]=R)}function a(e,t){for(var r=t.blocksPerLine,a=t.blocksPerColumn,s=new Int16Array(64),o=0;o<a;o++)for(var l=0;l<r;l++){n(t,i(t,o,l),s)}return t.blockData}function s(e){return e<=0?0:e>=255?255:e}var o=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,u=799,h=3406,c=2276,f=1567,d=3784,p=5793,m=2896;return e.prototype={parse:function(e){function i(){var t=e[l]<<8|e[l+1];return l+=2,t}var n,s,l=0,u=(e.length,null),h=null,c=[],f=[],d=[],p=i();if(65496!==p)throw"SOI not found";for(p=i();65497!==p;){var m,g,v;switch(p){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=function(){var t=i(),r=e.subarray(l,l+t-2);return l+=r.length,r}();65504===p&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(u={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65518===p&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&(h={version:y[5]<<8|y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var b=i()+l-2;l<b;){var x=e[l++],w=new Uint16Array(64);if(x>>4==0)for(g=0;g<64;g++)w[o[g]]=e[l++];else{if(x>>4!=1)throw"DQT: invalid table spec";for(g=0;g<64;g++)w[o[g]]=i()}c[15&x]=w}break;case 65472:case 65473:case 65474:if(n)throw"Only single frame JPEGs supported";i(),(n={}).extended=65473===p,n.progressive=65474===p,n.precision=e[l++],n.scanLines=i(),n.samplesPerLine=i(),n.components=[],n.componentIds={};var k,D=e[l++],T=0,I=0;for(m=0;m<D;m++){k=e[l];var S=e[l+1]>>4,R=15&e[l+1];T<S&&(T=S),I<R&&(I=R);var A=e[l+2];v=n.components.push({h:S,v:R,quantizationTable:c[A]}),n.componentIds[k]=v-1,l+=3}n.maxH=T,n.maxV=I,function(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),i=Math.ceil(e.scanLines/8/e.maxV),r=0;r<e.components.length;r++){F=e.components[r];var n=Math.ceil(Math.ceil(e.samplesPerLine/8)*F.h/e.maxH),a=Math.ceil(Math.ceil(e.scanLines/8)*F.v/e.maxV),s=t*F.h,o=64*(i*F.v)*(s+1);F.blockData=new Int16Array(o),F.blocksPerLine=n,F.blocksPerColumn=a}e.mcusPerLine=t,e.mcusPerColumn=i}(n);break;case 65476:var C=i();for(m=2;m<C;){var P=e[l++],O=new Uint8Array(16),_=0;for(g=0;g<16;g++,l++)_+=O[g]=e[l];var U=new Uint8Array(_);for(g=0;g<_;g++,l++)U[g]=e[l];m+=17+_,(P>>4==0?d:f)[15&P]=t(O,U)}break;case 65501:i(),s=i();break;case 65498:var F,L=(i(),e[l++]),B=[];for(m=0;m<L;m++){var M=n.componentIds[e[l++]];F=n.components[M];var N=e[l++];F.huffmanTableDC=d[N>>4],F.huffmanTableAC=f[15&N],B.push(F)}var V=e[l++],j=e[l++],E=e[l++],J=r(e,l,n,B,s,V,j,E>>4,15&E);l+=J;break;case 65535:255!==e[l]&&l--;break;default:if(255===e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+p.toString(16)}p=i()}for(this.width=n.samplesPerLine,this.height=n.scanLines,this.jfif=u,this.eof=l,this.adobe=h,this.components=[],m=0;m<n.components.length;m++)F=n.components[m],this.components.push({output:a(0,F),scaleX:F.h/n.maxH,scaleY:F.v/n.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var i,r,n,a,s,o,l,u,h,c,f,d=this.width/e,p=this.height/t,m=0,g=this.components.length,v=e*t*g,y=new Uint8Array(v),b=new Uint32Array(e);for(l=0;l<g;l++){for(r=(i=this.components[l]).scaleX*d,n=i.scaleY*p,m=l,f=i.output,a=i.blocksPerLine+1<<3,s=0;s<e;s++)u=0|s*r,b[s]=(4294967288&u)<<3|7&u;for(o=0;o<t;o++)for(c=a*(4294967288&(u=0|o*n))|(7&u)<<3,s=0;s<e;s++)y[m]=f[c+b[s]],m+=g}var x=this.decodeTransform;if(x)for(l=0;l<v;)for(u=0,h=0;u<g;u++,l++,h+=2)y[l]=(y[l]*x[h]>>8)+x[h+1];return y},_isColorConversionNeeded:function(){return!(!this.adobe||!this.adobe.transformCode)||3===this.numComponents},_convertYccToRgb:function(e){for(var t,i,r,n=0,a=e.length;n<a;n+=3)t=e[n],i=e[n+1],r=e[n+2],e[n]=s(t-179.456+1.402*r),e[n+1]=s(t+135.459-.344*i-.714*r),e[n+2]=s(t-226.816+1.772*i);return e},_convertYcckToRgb:function(e){for(var t,i,r,n,a=0,o=0,l=e.length;o<l;o+=4){t=e[o];var u=(i=e[o+1])*(-660635669420364e-19*i+.000437130475926232*(r=e[o+2])-54080610064599e-18*t+.00048449797120281*(n=e[o+3])-.154362151871126)-122.67195406894+r*(-.000957964378445773*r+.000817076911346625*t-.00477271405408747*n+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*n+.48357088451265)+n*(-.000336197177618394*n+.484791561490776),h=107.268039397724+i*(219927104525741e-19*i-.000640992018297945*r+.000659397001245577*t+.000426105652938837*n-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*t+.000770482631801132*n-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*n+.25802910206845)+n*(-.000318913117588328*n-.213742400323665),c=i*(-.000570115196973677*i-263409051004589e-19*r+.0020741088115012*t-.00288260236853442*n+.814272968359295)-20.810012546947+r*(-153496057440975e-19*r-.000132689043961446*t+.000560833691242812*n-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*n+.116935020465145)+n*(-.000343531996510555*n+.24165260232407);e[a++]=s(u),e[a++]=s(h),e[a++]=s(c)}return e},_convertYcckToCmyk:function(e){for(var t,i,r,n=0,a=e.length;n<a;n+=4)t=e[n],i=e[n+1],r=e[n+2],e[n]=s(434.456-t-1.402*r),e[n+1]=s(119.541-t+.344*i+.714*r),e[n+2]=s(481.816-t-1.772*i);return e},_convertCmykToRgb:function(e){for(var t,i,r,n,a=0,s=-16581375,o=0,l=e.length;o<l;o+=4){var u=(t=e[o])*(-4.387332384609988*t+54.48615194189176*(i=e[o+1])+18.82290502165302*(r=e[o+2])+212.25662451639585*(n=e[o+3])-72734.4411664936)+i*(1.7149763477362134*i-5.6096736904047315*r-17.873870861415444*n-1401.7366389350734)+r*(-2.5217340131683033*r-21.248923337353073*n+4465.541406466231)-n*(21.86122147463605*n+48317.86113160301),h=t*(8.841041422036149*t+60.118027045597366*i+6.871425592049007*r+31.159100130055922*n-20220.756542821975)+i*(-15.310361306967817*i+17.575251261109482*r+131.35250912493976*n-48691.05921601825)+r*(4.444339102852739*r+9.8632861493405*n-6341.191035517494)-n*(20.737325471181034*n+47890.15695978492),c=t*(.8842522430003296*t+8.078677503112928*i+30.89978309703729*r-.23883238689178934*n-3616.812083916688)+i*(10.49593273432072*i+63.02378494754052*r+50.606957656360734*n-28620.90484698408)+r*(.03296041114873217*r+115.60384449646641*n-49363.43385999684)-n*(22.33816807309886*n+45932.16563550634);e[a++]=u>=0?255:u<=s?0:255+u*(1/255/255)|0,e[a++]=h>=0?255:h<=s?0:255+h*(1/255/255)|0,e[a++]=c>=0?255:c<=s?0:255+c*(1/255/255)|0}return e},getData:function(e,t,i){if(this.numComponents>4)throw"Unsupported color mode";var r=this._getLinearizedBlockData(e,t);if(3===this.numComponents)return this._convertYccToRgb(r);if(4===this.numComponents){if(this._isColorConversionNeeded())return i?this._convertYcckToRgb(r):this._convertYcckToCmyk(r);if(i)return this._convertCmykToRgb(r)}return r}},e}()}.apply(null,[]))||(e.exports=r)},2130:function(e,t,i){var r,n;r=[i(1872)],void 0===(n=function(e){return function(){function t(e){var t,i,r,n,a,s,o,l,u,h,c,f,d;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},n=this.readUInt16(),r=this.readUInt16()||100,a.delay=1e3*n/r,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,c=0;0<=t?c<t:c>t;0<=t?++c:--c)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(h=this.read(t)).indexOf(0),o=String.fromCharCode.apply(String,h.slice(0,s)),this.text[o]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var i,r,n;return t.load=function(e,i,r){var n;return"function"==typeof i&&(r=i),(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e;return e=new t(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=i?i.getContext:void 0)&&e.render(i),"function"==typeof r?r(e):void 0},n.send(null)},1,2,0,t.prototype.read=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)i.push(this.data[this.pos++]);return i},t.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.decodePixels=function(t){var i,r,n,a,s,o,l,u,h,c,f,d,p,m,g,v,y,b,x,w,k,D,T;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new e(t)).getBytes(),v=(d=this.pixelBitlength/8)*this.width,p=new Uint8Array(v*this.height),o=t.length,g=0,m=0,r=0;m<o;){switch(t[m++]){case 0:for(a=x=0;x<v;a=x+=1)p[r++]=t[m++];break;case 1:for(a=w=0;w<v;a=w+=1)i=t[m++],s=a<d?0:p[r-d],p[r++]=(i+s)%256;break;case 2:for(a=k=0;k<v;a=k+=1)i=t[m++],n=(a-a%d)/d,y=g&&p[(g-1)*v+n*d+a%d],p[r++]=(y+i)%256;break;case 3:for(a=D=0;D<v;a=D+=1)i=t[m++],n=(a-a%d)/d,s=a<d?0:p[r-d],y=g&&p[(g-1)*v+n*d+a%d],p[r++]=(i+Math.floor((s+y)/2))%256;break;case 4:for(a=T=0;T<v;a=T+=1)i=t[m++],n=(a-a%d)/d,s=a<d?0:p[r-d],0===g?y=b=0:(y=p[(g-1)*v+n*d+a%d],b=n&&p[(g-1)*v+(n-1)*d+a%d]),l=s+y-b,u=Math.abs(l-s),c=Math.abs(l-y),f=Math.abs(l-b),h=u<=c&&u<=f?s:c<=f?y:b,p[r++]=(i+h)%256;break;default:throw new Error("Invalid filter algorithm: "+t[m-1])}g++}return p},t.prototype.decodePalette=function(){var e,t,i,r,n,a,s,o,l;for(i=this.palette,a=this.transparency.indexed||[],n=new Uint8Array((a.length||0)+i.length),r=0,i.length,e=0,t=s=0,o=i.length;s<o;t=s+=3)n[r++]=i[t],n[r++]=i[t+1],n[r++]=i[t+2],n[r++]=null!=(l=a[e++])?l:255;return n},t.prototype.copyToImageData=function(e,t){var i,r,n,a,s,o,l,u,h,c,f;if(r=this.colors,h=null,i=this.hasAlphaChannel,this.palette.length&&(h=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,i=!0),u=(n=e.data||e).length,s=h||t,a=o=0,1===r)for(;a<u;)l=h?4*t[a/4]:o,c=s[l++],n[a++]=c,n[a++]=c,n[a++]=c,n[a++]=i?s[l++]:this.transparency.grayscale&&this.transparency.grayscale===c?0:255,o=l;else for(;a<u;)l=h?4*t[a/4]:o,n[a++]=s[l++],n[a++]=s[l++],n[a++]=s[l++],n[a++]=i?s[l++]:this.transparency.rgb&&this.transparency.rgb[1]===s[l-3]&&this.transparency.rgb[3]===s[l-2]&&this.transparency.rgb[5]===s[l-1]?0:255,o=l},t.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},r=document.createElement("canvas"),n=r.getContext("2d"),i=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t},t.prototype.decodeFrames=function(e){var t,r,n,a,s,o,l,u;if(this.animation){for(u=[],r=s=0,o=(l=this.animation.frames).length;s<o;r=++s)t=l[r],n=e.createImageData(t.width,t.height),a=this.decodePixels(new Uint8Array(t.data)),this.copyToImageData(n,a),t.imageData=n,u.push(t.image=i(n));return u}},t.prototype.renderFrame=function(e,t){var i,r,n;return i=(r=this.animation.frames)[t],n=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===i.blendOp&&e.clearRect(i.xOffset,i.yOffset,i.width,i.height),e.drawImage(i.image,i.xOffset,i.yOffset)},t.prototype.animate=function(e){var t,i,r,n,a,s,o=this;return i=0,s=this.animation,n=s.numFrames,r=s.frames,a=s.numPlays,(t=function(){var s,l;if(s=i++%n,l=r[s],o.renderFrame(e,s),n>1&&i/n<a)return o.animation._timeout=setTimeout(t,l.delay)})()},t.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},t.prototype.render=function(e){var t,i;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(i=t.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),t.putImageData(i,0,0))},t}()}.apply(null,r))||(e.exports=n)},2131:function(e,t,i){var r;void 0===(r=function(){"use strict";return{decodeBIP:function(e,t){var i=t.pixelType,r=t.bandCount,n=[],a=t.width*t.height,s=this.getBandCount(e,t);r=r||s;var o,l,u,h,c=e.byteLength-e.byteLength%(a*this._getPixelLength(i)),f=new i(e,0,a*s);for(o=0;o<r;o++){for(h=new i(a),l=0;l<a;l++)h[l]=f[l*s+o];n.push(h)}return c<e.byteLength-1&&(u=this._decodeMask(e.slice(c),t)),{pixels:n,mask:u}},decodeBSQ:function(e,t){var i=t.pixelType,r=t.bandCount;void 0!==r&&null!==r||(r=this.getBandCount(e,t));var n,a,s=[],o=t.width*t.height,l=o*r,u=e.byteLength-e.byteLength%(o*this._getPixelLength(i)),h=new i(e,0,l);for(n=0;n<r;n++)s.push(h.subarray(n*o,(n+1)*o));return u<e.byteLength-1&&(a=this._decodeMask(e.slice(u),t)),{pixels:s,mask:a}},getBandCount:function(e,t){var i=t.width*t.height,r=t.pixelType;return Math.floor(e.byteLength/(i*this._getPixelLength(r)))},_getPixelLength:function(e){var t=1;switch(e){case Uint8Array:case Int8Array:case Uint8ClampedArray:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},_decodeMask:function(e,t){var i=t.width*t.height;if(8*e.byteLength<i)return null;var r=new Uint8Array(e,0,Math.ceil(i/8)),n=new Uint8Array(t.width*t.height),a=0,s=0,o=0,l=0;for(o=0;o<r.length-1;o++)for(s=r[o],l=7;l>=0;l--)n[a++]=s>>l&1;for(l=7;a<i-1;)s=r[r.length-1],n[a++]=s>>l&1,l--;return n}}}.apply(null,[]))||(e.exports=r)},2132:function(e,t,i){var r,n;r=[i(17),i(6),i(5),i(23)],void 0===(n=function(e,t,i,r){var n=e({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),a=e({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"}),s=t.createSubclass({declaredClass:"esri.layers.support.MosaicRule",properties:{ascending:{value:!0},lockRasterIds:{value:null},method:{value:null,json:{read:{source:["mosaicMethod","defaultMosaicMethod"],reader:function(e,t){var i=t.mosaicMethod||t.defaultMosaicMethod;return"byattribute"===i.toLowerCase()?i="attribute":"lockraster"===i.toLowerCase()&&(i="lock-raster"),a.fromJSON(i)}}}},multidimensionalDefinition:{value:[]},objectIds:{value:null,json:{read:{source:["fids"],reader:function(e,t){return t.fids}}}},operation:{value:null,json:{read:{source:["mosaicOperation","mosaicOperator"],reader:function(e,t){return n.fromJSON(t.mosaicOperation||t.mosaicOperator.toLowerCase())}}}},sortField:{value:null},sortValue:{value:null},viewpoint:{value:null,type:r},where:{value:null}},clone:function(){return s.fromJSON(this.toJSON())},toJSON:function(){var e=null,t=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(t){e=[];for(var r=0;r<t;r++)e.push("esri.layers.support.DimensionalDefinition"===this.multidimensionalDefinition[r].declaredClass?this.multidimensionalDefinition[r].toJSON():this.multidimensionalDefinition[r])}var s=!!this.ascending&&null,o={mosaicMethod:this.method?a.toJSON(this.method.toLowerCase()):null,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:s,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJSON():null,fids:this.objectIds,mosaicOperation:this.operation?n.toJSON(this.operation.toLowerCase()):null,multidimensionalDefinition:e};return i.filter(o,function(e){return null!=e})}});return s}.apply(null,r))||(e.exports=n)},2133:function(e,t,i){var r,n;r=[i(17),i(6),i(5)],void 0===(n=function(e,t,i){var r=e({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"}),n=t.createSubclass({declaredClass:"esri.layers.support.RasterFunction",properties:{functionArguments:{value:null,json:{read:{source:["rasterFunctionArguments"],reader:function(e,t){return this._resolveFunctionArguments(i.clone(t.rasterFunctionArguments))}}}},functionName:{value:null,json:{read:{source:["rasterFunction","rasterFunctionInfos"],reader:function(e,t){e=t.rasterFunction;var i=t.rasterFunctionInfos;return i&&i.length&&"None"!==i[0].name&&(e=i[0].name),e}}}},outputPixelType:{value:"unknown"},variableName:{value:null}},clone:function(){return n.fromJSON(this.toJSON())},toJSON:function(){var e=i.clone(this.functionArguments),t=function(e){return e&&"esri.layers.support.RasterFunction"===e.declaredClass?e.toJSON():e};if(e&&(e.Raster=t(e.Raster),e.Raster2=t(e.Raster2),e.DEM=t(e.DEM),e.FillRaster=t(e.FillRaster),e.Rasters&&e.Rasters.length)){var n,a=[];for(n=0;n<e.Rasters.length;n++)a.push(t(e.Rasters[n]));e.Rasters=a}var s=r.toJSON(this.outputPixelType);s="UNKNOWN"!==s?s:null;var o={rasterFunction:this.functionName,rasterFunctionArguments:e,variableName:this.variableName,outputPixelType:s};return i.filter(o,function(e){return null!=e})},_resolveFunctionArguments:function(e){var t=function(e){return e&&e.rasterFunction?n.fromJSON(e):e};if(e&&(e.Raster=t(e.Raster),e.Raster2=t(e.Raster2),e.DEM=t(e.DEM),e.FillRaster=t(e.FillRaster),e.Rasters&&e.Rasters.length))for(var i=0;i<e.Rasters.length;i++)e.Rasters[i]=t(e.Rasters[i]);return e}});return n}.apply(null,r))||(e.exports=n)},2134:function(e,t,i){var r,n;r=[i(36),i(5)],void 0===(n=function(e,t){return e(null,{declaredClass:"esri.layers.support.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(e){e&&"object"==typeof e&&t.mixin(this,e)},toJSON:function(){var e={variableName:this.variableName,dimensionName:this.dimensionName,values:this.values,isSlice:this.isSlice};return t.filter(e,function(e){return null!==e})}})}.apply(null,r))||(e.exports=n)},2135:function(e,t,i){var r,n;r=[i(4),i(5),i(64)],void 0===(n=function(e,t,i){return e.createSubclass({declaredClass:"esri.tasks.support.ImageServiceIdentifyParameters",properties:{geometry:null,mosaicRule:null,noData:null,renderingRule:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null},toJSON:function(e){var r=e&&e.geometry||this.geometry,n={geometry:r,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?JSON.stringify(this.mosaicRule.toJSON()):null,renderingRule:this.renderingRule?JSON.stringify(this.renderingRule.toJSON()):null};r&&(n.geometryType=i.getJsonType(r));var a=this.timeExtent;return n.time=a?a.toJSON().join(","):null,t.isDefined(this.pixelSizeX)&&t.isDefined(this.pixelSizeY)?n.pixelSize=JSON.stringify({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(n.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null),n}})}.apply(null,r))||(e.exports=n)},535:function(e,t,i){var r,n;r=[i.dj.c(e.i),i(5),i(7),i(51),i(2124),i(85),i(84),i(121),i(187),i(149)],void 0===(n=function(e,t,r,n,a,s,o,l,u,h){var c={canvas2D:"2d",webGL:"webgl",expWebGL:"experimental-webgl",webGL2:"webgl2",expWebGL2:"experimental-webgl2"};return n.createSubclass([a,s,o,l,u],{declaredClass:"esri.layers.ImageryLayer",normalizeCtorArgs:function(e,i){return"string"==typeof e?t.mixin({},{url:e},i):e},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]}).always(this._fetchService.bind(this)))},properties:{drawMode:!0,drawType:{value:c.canvas2D,cast:function(e){return e in c?e:c.canvas2D}},legendEnabled:{json:{read:{source:["showLegend"],reader:function(e,t){return null==t.showLegend||t.showLegend}},write:function(e,t){t.showLegend=!!e}}},operationalLayerType:"ArcGISImageServiceLayer",popupEnabled:h.popupEnabled,pixelFilter:null,type:{value:"imagery",json:{read:!1}}},redraw:function(){this.emit("redraw")},importLayerViewModule:function(e){switch(e.type){case"2d":return r.create(function(e){i.e(71).then(function(){var t=[i(2263)];e.apply(null,t)}.bind(this)).catch(i.oe)});case"3d":return r.create(function(e){Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(46)]).then(function(){var t=[i(2264)];e.apply(null,t)}.bind(this)).catch(i.oe)})}}})}.apply(null,r))||(e.exports=n)}}]);