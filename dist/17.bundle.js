(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/BuildingSceneLayer":577,"esri/layers/buildingSublayers/BuildingSublayer":2072,"esri/layers/buildingSublayers/BuildingGroupSublayer":2443,"esri/layers/buildingSublayers/BuildingComponentSublayer":2444})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{2072:function(e,r,t){var i,n;i=[t.dj.c(e.i),r,t(10),t(2),t(0),t(140),t(120),t(1),t(69)],void 0===(n=function(e,r,t,i,n,o,a,l,p){return function(e){function r(r){var t=e.call(this)||this;return t.title="",t.id=-1,t.modelName=null,t.visible=!0,t.opacity=1,t}return i(r,e),r.prototype.readTitle=function(e,r,t){return"string"==typeof r.alias?r.alias:"string"==typeof r.name?r.name:""},r.prototype.readIdOnlyOnce=function(e,r,t){return-1!==this.id?this.id:"number"==typeof e?e:void 0},n([l.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],r.prototype,"title",void 0),n([l.reader("service","title",["alias","name"])],r.prototype,"readTitle",null),n([l.property()],r.prototype,"layer",void 0),n([l.property({type:Number,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],r.prototype,"id",void 0),n([l.reader("service","id")],r.prototype,"readIdOnlyOnce",null),n([l.property(p.readOnlyService(String))],r.prototype,"modelName",void 0),n([l.property({type:Boolean,json:{read:{source:"visibility"},write:{target:"visibility"}}})],r.prototype,"visible",void 0),n([l.property({type:Number,json:{write:!0}})],r.prototype,"opacity",void 0),n([l.subclass("esri.layers.buildingSublayers.BuildingSublayer")],r)}(l.declared(a,o.Identifiable))}.apply(null,i))||(e.exports=n)},2443:function(e,r,t){var i,n;i=[t.dj.c(e.i),r,t(10),t(2),t(0),t(16),t(88),t(1),t(2444),t(2072)],void 0===(n=function(e,r,t,i,n,o,a,l,p,s){function y(e,r,t){if(e&&Array.isArray(e))return new o(e.map(function(e){var r=function(e){return"group"===e.layerType?d:p}(e);if(r){var i=new r;return i.read(e,t),i}t&&t.messages&&e&&t.messages.push(new a("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t}))}))}var u={type:o,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:y}}},read:!1}},d=function(e){function r(r){var t=e.call(this)||this;return t.type="building-group",t.sublayers=null,t}return i(r,e),n([l.property(u)],r.prototype,"sublayers",void 0),n([l.subclass("esri.layers.buildingSublayers.BuildingGroupSublayer")],r)}(l.declared(s));return function(e){e.sublayersProperty=u,e.readSublayers=y,e.forEachSublayer=function e(r,t){r.forEach(function(r){t(r),"building-group"===r.type&&e(r.sublayers,t)})}}(d||(d={})),d}.apply(null,i))||(e.exports=n)},2444:function(e,r,t){var i,n;i=[t.dj.c(e.i),r,t(10),t(2),t(0),t(102),t(21),t(61),t(1),t(18),t(20),t(2072),t(69),t(95),t(149),t(202),t(295)],void 0===(n=function(e,r,t,i,n,o,a,l,p,s,y,u,d,c,f,v,b){return function(e){function r(r){var t=e.call(this)||this;return t.type="building-component",t.fields=[],t.renderer=null,t.definitionExpression=null,t.popupEnabled=!0,t.popupTemplate=null,t.geometryType="mesh",t.profile="mesh-pyramids",t}return i(r,e),Object.defineProperty(r.prototype,"parsedUrl",{get:function(){return this.layer?{path:this.layer.parsedUrl.path+"/sublayers/"+this.id,query:this.layer.parsedUrl.query}:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"objectIdField",{get:function(){if(null!=this.fields)for(var e=0,r=this.fields;e<r.length;e++){var t=r[e];if("oid"===t.type)return t.name}return null},enumerable:!0,configurable:!0}),r.prototype.load=function(){return this.addResolvingPromise(this._fetchService()),this.when()},r.prototype._fetchService=function(){var e=this;return a(this.parsedUrl.path,{query:{f:"json"},responseType:"json"}).then(function(r){var t=r.data;e.read(t,{origin:"service",url:e.parsedUrl})})},n([p.property({readOnly:!0,dependsOn:["layer","id"]})],r.prototype,"parsedUrl",null),n([p.property({readOnly:!0})],r.prototype,"store",void 0),n([p.property({readOnly:!0})],r.prototype,"attributeStorageInfo",void 0),n([p.property({readOnly:!0,type:[c]})],r.prototype,"fields",void 0),n([p.property({type:String,dependsOn:["fields"],readOnly:!0})],r.prototype,"objectIdField",null),n([p.property({readOnly:!0,type:s,aliasOf:"layer.fullExtent"})],r.prototype,"fullExtent",void 0),n([p.property({readOnly:!0,type:y,aliasOf:"layer.spatialReference"})],r.prototype,"spatialReference",void 0),n([p.property({readOnly:!0,aliasOf:"layer.version"})],r.prototype,"version",void 0),n([p.property({readOnly:!0,type:b,aliasOf:"layer.elevationInfo"})],r.prototype,"elevationInfo",void 0),n([p.property({types:v.types,json:{origins:{service:{read:{source:"drawingInfo.renderer",reader:f.read}}},read:{source:"layerDefinition.drawingInfo.renderer",reader:f.read},write:{target:"layerDefinition.drawingInfo.renderer"}},value:null})],r.prototype,"renderer",void 0),n([p.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],r.prototype,"definitionExpression",void 0),n([p.property(d.popupEnabled)],r.prototype,"popupEnabled",void 0),n([p.property({type:o,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],r.prototype,"popupTemplate",void 0),n([p.property({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],r.prototype,"normalReferenceFrame",void 0),n([p.subclass("esri.layers.buildingSublayers.BuildingComponentSublayer")],r)}(p.declared(u,l))}.apply(null,i))||(e.exports=n)},577:function(e,r,t){var i,n;i=[t.dj.c(e.i),r,t(10),t(2),t(0),t(275),t(8),t(5),t(9),t(7),t(1),t(18),t(20),t(65),t(2443),t(550),t(69)],void 0===(n=function(e,r,i,n,o,a,l,p,s,y,u,d,c,f,v,b,h){var g=s.getLogger("esri.layers.BuildingSceneLayer");return function(e){function r(r){var t=e.call(this)||this;return t.operationalLayerType="BuildingSceneLayer",t.allSublayers=new a({root:t,rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return"building-group"===e.type?e.sublayers:null}}),t.sublayers=null,t.sublayerOverrides=null,t.type="building-scene",t}return n(r,e),r.prototype.normalizeCtorArgs=function(e){return"string"==typeof e?{url:e}:e},r.prototype.readSublayers=function(e,r,t){var i=this,n=v.readSublayers(e,r,t);return v.forEachSublayer(n,function(e){return e.layer=i}),this.sublayerOverrides&&(this.applySublayerOverrides(n,this.sublayerOverrides),this.sublayerOverrides=null),n},r.prototype.applySublayerOverrides=function(e,r){var t=r.overrides,i=r.context;v.forEachSublayer(e,function(e){return e.read(t.get(e.id),i)})},r.prototype.readSublayerOverrides=function(e,r){for(var t=new Map,i=0,n=e;i<n.length;i++){var o=n[i];null!=o&&"object"==typeof o&&"number"==typeof o.id?t.set(o.id,o):r.messages.push(new l("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:o}))}return{overrides:t,context:r}},r.prototype.writeSublayerOverrides=function(e,r,t){var i=[];v.forEachSublayer(this.sublayers,function(e){var r=e.write({},t);Object.keys(r).length>1&&i.push(r)}),i.length>0&&(r.sublayers=i)},r.prototype.writeUnappliedOverrides=function(e,r){r.sublayers=[],e.overrides.forEach(function(e){r.sublayers.push(p.clone(e))})},r.prototype.write=function(e,r){return e=this.inherited(arguments),r&&"web-scene"===r.origin&&(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,r):this.sublayerOverrides&&this.writeUnappliedOverrides(this.sublayerOverrides,e)),e},r.prototype.read=function(e,r){if(this.inherited(arguments),r&&"web-scene"===r.origin&&null!=e&&Array.isArray(e.sublayers)){var t=this.readSublayerOverrides(e.sublayers,r);this.sublayers?this.applySublayerOverrides(this.sublayers,t):this.sublayerOverrides=t}return this},Object.defineProperty(r.prototype,"elevationInfo",{set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()},enumerable:!0,configurable:!0}),r.prototype.load=function(){var e=this,r=this.loadFromPortal({supportedTypes:["Scene Service"]}).then(function(){return e._fetchService()},function(){return e._fetchService()});return this.addResolvingPromise(r),this.when()},r.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return y.reject(new l("building-scene-layer:view-not-supported","BuildingSceneLayer is only supported in 3D"));case"3d":return y.create(function(e){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(69)]).then(function(){var r=[t(2500)];e.apply(null,r)}.bind(this)).catch(t.oe)})}},r.prototype._validateLayer=function(e){if(!e.layerType||"Building"!==e.layerType)throw new l("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})},r.prototype._validateElevationInfo=function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&g.warn(".elevationInfo=","Building scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&g.warn(".elevationInfo=","Building scene layers do not support featureExpressionInfo"))},r.prototype.graphicChanged=function(){},o([u.property({type:["BuildingSceneLayer"]})],r.prototype,"operationalLayerType",void 0),o([u.property({readOnly:!0})],r.prototype,"allSublayers",void 0),o([u.property(v.sublayersProperty)],r.prototype,"sublayers",void 0),o([u.reader("service","sublayers")],r.prototype,"readSublayers",null),o([u.property(h.readOnlyService(d))],r.prototype,"fullExtent",void 0),o([u.property(h.readOnlyService(c))],r.prototype,"spatialReference",void 0),o([u.property(h.elevationInfo)],r.prototype,"elevationInfo",null),o([u.property({json:{read:!1},readOnly:!0})],r.prototype,"type",void 0),o([u.subclass("esri.layers.BuildingSceneLayer")],r)}(u.declared(f,b))}.apply(null,i))||(e.exports=n)}}]);