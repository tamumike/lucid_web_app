(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/webgl-engine/lib/Util":1559,"esri/geometry/support/aaBoundingBox":1563,"esri/views/3d/support/geometryUtils":1571,"esri/views/3d/webgl-engine/lib/ComponentUtils":1572,"esri/views/3d/support/stack":1829,"esri/core/ObjectStack":1860,"esri/views/3d/support/geometryUtils/ray":1952,"esri/views/3d/support/geometryUtils/plane":1986,"esri/views/3d/support/geometryUtils/vector":1987,"esri/views/3d/support/geometryUtils/lineSegment":1988,"esri/core/VectorStack":2150,"esri/views/3d/support/geometryUtils/axisAngle":2151,"esri/views/3d/support/geometryUtils/boundedPlane":2152,"esri/views/3d/support/geometryUtils/frustum":2153,"esri/views/3d/support/geometryUtils/clipRay":2154,"esri/views/3d/support/geometryUtils/sphere":2155,"esri/views/3d/support/geometryUtils/triangle":2156})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1559:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(38),n(92)],void 0===(i=function(e,t,n,r){function i(e,t){if(!e){var n=new Error("dummy");throw n.stack&&console.log(n.stack),new h(t)}}function c(e){for(var t in e)return t}function o(e,t){e[12]=t[0],e[13]=t[1],e[14]=t[2]}function a(e,t){void 0===t&&(t=0);for(var n=0,r=0;r<4;r++)n+=e[t+r]*b[r];return n}function s(e){return e-Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n.vec4f64.create(),v=n.vec2f64.create(),f=n.vec2f64.create(),l=n.vec2f64.create(),d=n.vec2f64.create(),p=n.vec2f64.create(),g=n.vec2f64.create(),h=function(){function e(e){this.message=e}return e.prototype.toString=function(){return"AssertException: "+this.message},e}();t.AssertException=h,t.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"},t.assert=i,t.verify=function(e,t){e||(console.log("Verify failed: "+t),console.log(new Error("dummy").stack))},t.encodeInt16=function(e){return r.clamp(Math.round(32767*e),-32767,32767)},t.encodeNormal=function(e,t){var n=Math.abs(e[0]),r=Math.abs(e[1]),i=1/(n+r+Math.abs(e[2])),c=n*i,o=r*i,a=Math.min(e[2]*i,0);t[0]=(e[0]<0?-1:1)*(c-a),t[1]=(e[1]<0?-1:1)*(o-a)},t.fallbackIfUndefined=function(e,t){return void 0===e?t:e},t.hex2rgb=function(e){return[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return"0x"+((r.clamp(Math.round(255*e[0]),0,255)<<16)+(r.clamp(Math.round(255*e[1]),0,255)<<8)+r.clamp(Math.round(255*e[2]),0,255)).toString(16)},t.dec2hex=function(e){var t=e.toString(16);return"00000000".substr(0,8-t.length)+t},t.rayTriangle3D=function(e,t,r,i,c,o,a,s,u){void 0===u&&(u=n.vec3f64.create());var v=i[a]-r[o],f=i[a+1]-r[o+1],l=i[a+2]-r[o+2],d=c[s]-r[o],p=c[s+1]-r[o+1],g=c[s+2]-r[o+2],h=t[1]*g-p*t[2],m=t[2]*d-g*t[0],b=t[0]*p-d*t[1],y=v*h+f*m+l*b;if(y>-1e-5&&y<1e-5)return!1;var M=1/y,P=e[0]-r[o],x=e[1]-r[o+1],w=e[2]-r[o+2];if(u[1]=M*(P*h+x*m+w*b),u[1]<0||u[1]>1)return!1;var V=x*l-f*w,A=w*v-l*P,S=P*f-v*x;return u[2]=M*(t[0]*V+t[1]*A+t[2]*S),!(u[2]<0||u[1]+u[2]>1||(u[0]=M*(d*V+p*A+g*S),0))},t.rayBoxTest=function(e,t,n,r){var i,c=(n[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];c>o&&(i=c,c=o,o=i);var a=(n[1]-e[1])/t[1],s=(r[1]-e[1])/t[1];if(a>s&&(i=a,a=s,s=i),c>s||a>o)return!1;a>c&&(c=a),s<o&&(o=s);var u=(n[2]-e[2])/t[2],v=(r[2]-e[2])/t[2];return u>v&&(i=u,u=v,v=i),!(c>v||u>o||(v<o&&(o=v),o<0))},t.rayRay2D=function(e,t,r,i,c,o){void 0===o&&(o=n.vec2f64.create());var a=(i[c]-r[c])*(t[0]-e[0])-(i[0]-r[0])*(t[c]-e[c]),s=(i[0]-r[0])*(e[c]-r[c])-(i[c]-r[c])*(e[0]-r[0]);if(0===a)return!1;var u=s/a;return o[0]=e[0]+u*(t[0]-e[0]),o[1]=e[c]+u*(t[c]-e[c]),!0},t.project=function(e,t,r,c,o){o||(o=e),u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=1,n.vec4.transformMat4(u,u,t),o.length>2&&(o[2]=-u[2]),n.vec4.transformMat4(u,u,r),i(0!==u[3]),o[0]=u[0]/u[3],o[1]=u[1]/u[3],o[2]=u[2]/u[3],o[0]=(.5*o[0]+.5)*c[2]+c[0],o[1]=(.5*o[1]+.5)*c[3]+c[1]},t.getFirstObjectKey=c,t.getFirstObjectValue=function(e){return e[c(e)]},t.objectEmpty=function(e){for(var t in e)return!1;return!0},t.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},t.setMatrixTranslation=o,t.setMatrixTranslation3=function(e,t,n,r){e[12]=t,e[13]=n,e[14]=r},t.getMatrixTranslation=function(e,t){return void 0===t&&(t=n.vec3f64.create()),t[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.createTranslationMatrix=function(e,t){return o(e=n.mat4.identity(e),t),e},t.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},t.fovx2fovy=function(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/n)},t.fovx2fovd=function(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/t)},t.fovy2fovd=function(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/n)},t.fovd2fovx=function(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+n*n))},t.fovd2fovy=function(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/Math.sqrt(t*t+n*n))},t.pointLineSegmentDistanceSquared2D=function(e,t,i){var c=d,o=p,a=g,s=l,u=v,h=f;c[0]=t[0]-e[0],c[1]=t[1]-e[1],o[0]=i[0]-e[0],o[1]=i[1]-e[1],a[0]=i[0],a[1]=i[1];var m=n.vec2.dot(o,c),b=n.vec2.dot(c,c),y=r.clamp(m/b,0,1);s[0]=c[0]*y,s[1]=c[1]*y,u[0]=e[0]+s[0],u[1]=e[1]+s[1],n.vec2.subtract(h,a,u);var M=n.vec2.dot(h,h),P=n.vec2.dot(o,o),x=n.vec2.dot(c,c),w=n.vec2.dot(s,s);return(w>P||w>x)&&(M=Number.MAX_VALUE),M},t.packFloatRGBA=function(e,t,n){void 0===n&&(n=0);for(var i=r.clamp(e,0,y),c=0;c<4;c++)t[n+c]=Math.floor(256*s(i*m[c]))},t.unpackFloatRGBA=a;var m=[1,256,65536,16777216],b=[1/256,1/65536,1/16777216,1/4294967296],y=a(new Uint8ClampedArray([255,255,255,255]));t.inverseProjectionInfo=function(e,t,r,i,c){var o=e;0===e[11]?(i[0]=2/(t*o[0]),i[1]=2/(r*o[5]),i[2]=(1+o[12])/o[0],i[3]=(1+o[13])/o[5],n.vec2.set(c,0,1)):(i[0]=-2/(t*o[0]),i[1]=-2/(r*o[5]),i[2]=(1-o[8])/o[0],i[3]=(1-o[9])/o[5],n.vec2.set(c,1,0))}}.apply(null,r))||(e.exports=i)},1563:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(18),n(72)],void 0===(i=function(e,t,n,r){function i(e){return e}function c(e){return void 0===e&&(e=t.ZERO),i([e[0],e[1],e[2],e[3],e[4],e[5]])}function o(e,t,n,r,i,o,a){return void 0===a&&(a=c()),a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function a(e){return e[0]>=e[3]?0:e[3]-e[0]}function s(e){return e[1]>=e[4]?0:e[4]-e[1]}function u(e){return e[2]>=e[5]?0:e[5]-e[2]}function v(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function f(e){return 6===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.fromValues=o,t.fromExtent=function(e,t){return void 0===t&&(t=c()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.toExtent=function(e,t){var r=isFinite(e[2])||isFinite(e[5]);return new n(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.fromMinMax=function(e,t,n){return void 0===n&&(n=c()),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=t[0],n[4]=t[1],n[5]=t[2],n},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[3]&&(e[3]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[4]&&(e[4]=t[1]),t[2]<e[2]&&(e[2]=t[2]),t[2]>e[5]&&(e[5]=t[2])},t.expand=function(e,t,n){return void 0===n&&(n=e),f(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n[3]=Math.max(e[3],t[3]),n[4]=Math.max(e[4],t[4]),n[5]=Math.max(e[5],t[5])):r.is(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[3]=Math.max(e[3],t[2]),n[4]=Math.max(e[4],t[3])):2===t.length?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[3]=Math.max(e[3],t[0]),n[4]=Math.max(e[4],t[1])):3===t.length&&(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n[3]=Math.max(e[3],t[0]),n[4]=Math.max(e[4],t[1]),n[5]=Math.max(e[5],t[2])),n},t.expandWithBuffer=function(e,t,n,r,i){void 0===i&&(i=e);for(var c=e[0],o=e[1],a=e[2],s=e[3],u=e[4],v=e[5],f=0;f<r;f++)c=Math.min(c,t[n+3*f]),o=Math.min(o,t[n+3*f+1]),a=Math.min(a,t[n+3*f+2]),s=Math.max(s,t[n+3*f]),u=Math.max(u,t[n+3*f+1]),v=Math.max(v,t[n+3*f+2]);return i[0]=c,i[1]=o,i[2]=a,i[3]=s,i[4]=u,i[5]=v,i},t.expandWithNestedArray=function(e,t,n,r){void 0===r&&(r=e);var i=t.length,c=e[0],o=e[1],a=e[2],s=e[3],u=e[4],v=e[5];if(n)for(var f=0;f<i;f++){var l=t[f];c=Math.min(c,l[0]),o=Math.min(o,l[1]),a=Math.min(a,l[2]),s=Math.max(s,l[0]),u=Math.max(u,l[1]),v=Math.max(v,l[2])}else for(f=0;f<i;f++)l=t[f],c=Math.min(c,l[0]),o=Math.min(o,l[1]),s=Math.max(s,l[0]),u=Math.max(u,l[1]);return r[0]=c,r[1]=o,r[2]=a,r[3]=s,r[4]=u,r[5]=v,r},t.allFinite=function(e){for(var t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.width=a,t.depth=s,t.height=u,t.diameter=function(e){var t=a(e),n=u(e),r=s(e);return Math.sqrt(t*t+n*n+r*r)},t.center=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=e[0]+a(e)/2,t[1]=e[1]+s(e)/2,t[2]=e[2]+u(e)/2,t},t.size=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=a(e),t[1]=s(e),t[2]=u(e),t},t.maximumDimension=function(e){return Math.max(a(e),u(e),s(e))},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[2]>=e[2]-n&&t[0]<=e[3]+n&&t[1]<=e[4]+n&&t[2]<=e[5]+n},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])},t.offset=function(e,t,n,r,i){return void 0===i&&(i=e),i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i},t.setMin=function(e,t,n){return void 0===n&&(n=e),n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n},t.setMax=function(e,t,n){return void 0===n&&(n=e),n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e},t.set=v,t.empty=function(e){return e?v(e,t.NEGATIVE_INFINITY):c(t.NEGATIVE_INFINITY)},t.toRect=function(e,t){return t||(t=r.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[3]=t[2],e[4]=t[3],e},t.is=f,t.isPoint=function(e){return 0===a(e)&&0===s(e)&&0===u(e)},t.equals=function(e,t,n){if(null==e||null==t)return e===t;if(!f(e)||!f(t))return!1;if(n){for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrap=function(e,t,n,r,i,c){return o(e,t,n,r,i,c,l)},t.POSITIVE_INFINITY=i([-1/0,-1/0,-1/0,1/0,1/0,1/0]),t.NEGATIVE_INFINITY=i([1/0,1/0,1/0,-1/0,-1/0,-1/0]),t.ZERO=i([0,0,0,0,0,0]);var l=c()}.apply(null,r))||(e.exports=i)},1571:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(2151),n(2152),n(2153),n(1988),n(1986),n(1952),n(2155),n(2156),n(1987)],void 0===(i=function(e,t,n,r,i,c,o,a,s,u,v){Object.defineProperty(t,"__esModule",{value:!0}),t.plane=o,t.boundedPlane=r,t.triangle=u,t.lineSegment=c,t.ray=a,t.sphere=s,t.frustum=i,t.vector=v,t.axisAngle=n}.apply(null,r))||(e.exports=i)},1572:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(73)],void 0===(i=function(e,t,n){function r(e,t){if(null!=e){var n=e.isVisibleBit,r=e.data,i=h(r);return t<r.length*i?g(n,r,t,i):p(e)}return!0}function i(e){return null===e.component?-1:e.component}function c(e,t,n,i,c){r(t,i)&&o(e,t,n,n[i],b(n[i+1]),c)}function o(e,t,n,r,i,c){var o=e.length>0?e[e.length-1]:null,a=o?o.range[1]:-1,s=o?o.options:null;if(!(a>=r))if(a+1===r&&s===c)o.range[1]=i;else{var u={range:[r,i],options:c};e.push(u)}}function a(e){return void 0===e&&(e=!0),{isVisibleBit:!e,data:new Uint32Array(0)}}function s(e,t){return!v(e,t)}function u(e,t){return f(e,t,!0)}function v(e,t){return f(e,t,!1)}function f(e,t,n){var r=!1,i=(e=e||M).isVisibleBit,c=e.data,o=y(t),a=h(c),s=c.length*a,u=n===i;if(0===c.length||0===o)r=!u;else if(s<o&&!u)r=!0;else{for(var v=m(a),f=m(0),l=0;l<c.length-1;l++)if(r=!u&&c[l]!==v||u&&c[l]!==f)return r;var d=c.length-1,p=m((o-1)%a+1);r=!u&&(c[d]&p)!==p||u&&(c[d]&p)!==f}return r}function l(e,t){return t<y(e)}function d(e){return e.length>0}function p(e){return!e.isVisibleBit}function g(e,t,n,r){var i=n/r|0,c=n-i*r;return function(e,t){return 0!=(e&1<<t)}(t[i],c)===e}function h(e){return 8*e.BYTES_PER_ELEMENT}function m(e){return P[e]}function b(e){return e-1}function y(e){return Math.max(0,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisibility=function(e,t,n,r){if(l(t,n)){null==e&&(e=a());var i=e.isVisibleBit,c=e.data,o=h(c),s=n/o|0,u=n-o*s,v=(y(t)-1)/o|0,f=c,d=r===i;if(!(n<f.length*o)&&d){var p=s+1,g=Math.ceil(1.5*f.length),m=v+1,b=Math.max(p,g);b=Math.min(b,m),(c=new Uint32Array(b)).set(f)}s<c.length&&(c[s]=function(e,t,n){return e&~(1<<t)|(n?1:0)<<t}(c[s],u,d)),e.data=c}return e},t.getVisibility=r,t.hideAllComponents=function(e){var t;if(null==e)t=a(!1);else{(t=e).isVisibleBit=!0;for(var n=0;n<t.data.length;n++)t.data[n]=0}return t},t.unhideAllComponents=function(e){var t;if(null==e);else{(t=e).isVisibleBit=!1;for(var n=0;n<t.data.length;n++)t.data[n]=0}return t},t.generateVisibleIndexRanges=function(e,t){var n;if(e)if(d(t))if(0===e.data.length){var r=[],i=[[t[0],b(t[t.length-1])]];n=p(e)?i:r}else{n=[];for(var c=e.isVisibleBit,o=e.data,a=h(o),s=o.length*a,u=y(t),v=!1,f=0;f<s&&f<u;f++){var l=g(c,o,f,a);if(l!==v){var m=t[f];l?n.push([m,0]):(P=n[n.length-1])[1]=b(m),v=l}}var M=p(e);if(u>s&&M&&!v)n.push([t[s],b(t[u])]);else if(v){var P=n[n.length-1],x=M?u:Math.min(u,s);P[1]=b(t[x])}}else r=[],i=null,n=p(e)?i:r;else n=null;return n},t.addHighlight=function(e,t,n,r){var c,o={component:t,options:n,id:r};(e=e||[]).push(o);for(var a=i(o),s=e.length-1;s>0&&a<i(e[s-1]);)c=[e[s],e[s-1]],e[s-1]=c[0],e[s]=c[1],--s;return e},t.removeHighlight=function(e,t){if(e){var n=e.filter(function(e){return e.id!==t});return 0===n.length?null:n}return e},t.generateHighlightedIndexRanges=function(e,t,n){if(!t)return null;if(!d(n))return!e||p(e)?t.map(function(e){return{range:null,options:e.options}}):null;for(var r=n[0],i=b(n[n.length-1]),a=[],u=s(e,n),v=0;v<t.length;++v){var f=t[v].options,l=t[v].component;if(null!==l)c(a,e,n,l,f);else if(u)o(a,0,0,r,i,f);else for(var g=0;g<y(n);++g)c(a,e,n,g,f)}return a.length>0?a:null},t.defaultVisibilities=a,t.isAllVisible=s,t.isAllHidden=function(e,t){return!u(e,t)},t.hasVisible=u,t.hasHidden=v;var M=a();t.createOffsets=function(e){return Array.isArray(e)?new Uint32Array(e):e},t.hasComponent=l,t.hasComponents=d;for(var P=[],x=0;x<65;x++)P.push(Math.pow(2,x)-1);t.componentCount=y,t.componentFind=function(e,t){var r=n.binaryIndexOf(e,t,!0);return r>=0?r:null}}.apply(null,r))||(e.exports=i)},1829:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(2150)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sv2d=n.VectorStack.createVec2f64(),t.sv3d=n.VectorStack.createVec3f64(),t.sv4d=n.VectorStack.createVec4f64(),t.sm4d=n.VectorStack.createMat4f64(),t.sq4d=n.VectorStack.createQuatf64()}.apply(null,r))||(e.exports=i)},1860:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(541)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=8);var r=this;this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=n.before(function(){return r.reset()}),this.grow(t)}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null)},e.prototype.get=function(){return 0===this.itemsPtr&&n(function(){}),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]},e.prototype.reset=function(){this.itemsPtr=0},e.prototype.grow=function(e){void 0===e&&(e=this.items.length);for(var t=0;t<Math.max(8,Math.min(e,i));t++)this.items.push(this.allocator())},e}();t.ObjectStack=r;var i=1024;t.default=r}.apply(null,r))||(e.exports=i)},1952:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1860),n(38),n(1829)],void 0===(i=function(e,t,n,r,i){function c(e){return e?{origin:r.vec3f64.clone(e.origin),direction:r.vec3f64.clone(e.direction)}:{origin:r.vec3f64.create(),direction:r.vec3f64.create()}}function o(e,t,n){return void 0===n&&(n=c()),r.vec3.copy(n.origin,e),r.vec3.copy(n.direction,t),n}function a(e,t){var n=r.vec3.cross(i.sv3d.get(),r.vec3.normalize(i.sv3d.get(),e.direction),r.vec3.subtract(i.sv3d.get(),t,e.origin));return r.vec3.dot(n,n)}function s(){return{origin:null,direction:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t){var n=u.get();return n.origin=e,n.direction=t,n},t.copy=function(e,t){return void 0===t&&(t=c()),o(e.origin,e.direction,t)},t.fromValues=o,t.fromScreen=function(e,t,n){void 0===n&&(n=c());var o=r.vec3.set(i.sv3d.get(),t[0],t[1],0);e.unprojectPoint(o,n.origin);var a=r.vec3.set(i.sv3d.get(),t[0],t[1],1),s=e.unprojectPoint(a,i.sv3d.get());return r.vec3.subtract(n.direction,s,n.origin),n},t.fromScreenAtEye=function(e,t,n){void 0===n&&(n=c()),r.vec3.copy(n.origin,e.eye);var o=r.vec3.set(i.sv3d.get(),t[0],t[1],1),a=e.unprojectPoint(o,i.sv3d.get());return r.vec3.subtract(n.direction,a,n.origin),n},t.distance2=a,t.distance=function(e,t){return Math.sqrt(a(e,t))},t.closestPoint=function(e,t,n){var i=r.vec3.dot(e.direction,r.vec3.subtract(n,t,e.origin));return r.vec3.add(n,e.origin,r.vec3.scale(n,e.direction,i)),n},t.createWrapper=s;var u=new n.ObjectStack(s)}.apply(null,r))||(e.exports=i)},1986:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(38),n(92),n(1829)],void 0===(i=function(e,t,n,r,i){function c(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function o(e,t){return void 0===t&&(t=c()),a(e[0],e[1],e[2],e[3],t)}function a(e,t,n,r,i){return void 0===i&&(i=c()),i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function s(e,t,r){void 0===r&&(r=c()),n.vec3.copy(r,t);var i=n.vec3.dot(t,t);return Math.abs(i-1)>1e-5&&n.vec3.scale(r,r,1/Math.sqrt(i)),u(r,e,r),r}function u(e,t,r){return e!==r&&o(e,r),r[3]=-n.vec3.dot(r,t),r}function v(e,t,r,o){return void 0===o&&(o=c()),s(r,n.vec3.cross(i.sv3d.get(),t,e),o)}function f(e,t,r){var c=n.vec3.scale(i.sv3d.get(),e,n.vec3.dot(e,t));return n.vec3.subtract(r,t,c),r}function l(e,t){return n.vec3.dot(e,t)+e[3]}function d(e,t,i,c,o,a){var s=n.vec3.dot(e,i);if(0===s)return!1;var u=-(n.vec3.dot(e,t)+e[3])/s;return o&&(u=c?Math.max(0,u):r.clamp(u,0,1)),!(u<0||!c&&u>1||(n.vec3.add(a,t,n.vec3.scale(a,i,u)),0))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t,n,r){return a(e,t,n,r,i.sv4d.get())},t.copy=o,t.fromValues=a,t.fromNormalAndOffset=function(e,t,r){return void 0===r&&(r=c()),n.vec3.copy(r,e),r[3]=t,r},t.fromPositionAndNormal=s,t.fromPoints=function(e,t,r,o){return void 0===o&&(o=c()),v(n.vec3.subtract(i.sv3d.get(),e,t),n.vec3.subtract(i.sv3d.get(),r,t),e,o)},t.setOffsetFromPoint=u,t.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.fromVectorsAndPoint=v,t.intersectRay=function(e,t,n){return d(e,t.origin,t.direction,!0,!1,n)},t.intersectLineSegment=function(e,t,n){return d(e,t.origin,t.vector,!1,!1,n)},t.intersectLineSegmentClamp=function(e,t,n){return d(e,t.origin,t.vector,!1,!0,n)},t.isSphereFullyInside=function(e,t){var n=t.center,r=t.radius;return l(e,n)-r>=0},t.isSphereFullyOutside=function(e,t){var n=t.center,r=t.radius;return l(e,n)+r<0},t.isPointInside=function(e,t){return l(e,t)>=0},t.isPointOutside=function(e,t){return l(e,t)<0},t.isAABBFullyInside=function(e,t){var n=t[0],r=t[1],i=t[2],c=t[3],o=t[4],a=t[5];return e[0]*(e[0]>0?n:c)+e[1]*(e[1]>0?r:o)+e[2]*(e[2]>0?i:a)+e[3]>=0},t.clip=function(e,t){var r=n.vec3.dot(e,t.ray.direction),i=-l(e,t.ray.origin);if(i<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return i>0;if((i<0||r<0)&&!(i<0&&r<0))return!0;var c=i/r;return r>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1},t.projectPoint=function(e,t,r){var c=n.vec3.scale(i.sv3d.get(),e,-e[3]),o=f(e,n.vec3.subtract(i.sv3d.get(),t,c),i.sv3d.get());return n.vec3.add(r,o,c),r},t.projectVector=f,t.distance=function(e,t){return Math.abs(l(e,t))},t.signedDistance=l,t.UP=[0,0,1,0]}.apply(null,r))||(e.exports=i)},1987:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(38),n(92)],void 0===(i=function(e,t,n,r){function i(e,t){return n.vec3.dot(e,t)/n.vec3.length(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.projectPoint=function(e,t,r){var c=i(e,t);return n.vec3.scale(r,e,c)},t.projectPointSignedLength=i,t.angle=function(e,t){var i=n.vec3.dot(e,t)/(n.vec3.length(e)*n.vec3.length(t));return-r.acos(i)}}.apply(null,r))||(e.exports=i)},1988:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1860),n(38),n(92),n(1829)],void 0===(i=function(e,t,n,r,i,c){function o(e){return e?{origin:r.vec3f64.clone(e.origin),vector:r.vec3f64.clone(e.vector)}:{origin:r.vec3f64.create(),vector:r.vec3f64.create()}}function a(e,t){var n=d.get();return n.origin=e,n.vector=t,n}function s(e,t,n){return void 0===n&&(n=o()),r.vec3.copy(n.origin,e),r.vec3.copy(n.vector,t),n}function u(e,t){var n=r.vec3.subtract(c.sv3d.get(),t,e.origin),o=r.vec3.dot(e.vector,n),a=r.vec3.dot(e.vector,e.vector),s=i.clamp(o/a,0,1),u=r.vec3.subtract(c.sv3d.get(),r.vec3.scale(c.sv3d.get(),e.vector,s),n);return r.vec3.dot(u,u)}function v(e,t,n,o,a){var s=e.vector,u=e.origin,v=r.vec3.subtract(c.sv3d.get(),t,u),f=r.vec3.length(s),l=r.vec3.dot(s,v)/f;return r.vec3.scale(a,s,i.clamp(l,n,o)),r.vec3.add(a,a,e.origin)}function f(e,t,n,o){var a=e.origin,s=r.vec3.add(c.sv3d.get(),a,e.vector),u=t.origin,v=r.vec3.add(c.sv3d.get(),u,t.vector),f=c.sv3d.get(),l=c.sv3d.get();if(f[0]=a[0]-u[0],f[1]=a[1]-u[1],f[2]=a[2]-u[2],l[0]=v[0]-u[0],l[1]=v[1]-u[1],l[2]=v[2]-u[2],Math.abs(l[0])<1e-6&&Math.abs(l[1])<1e-6&&Math.abs(l[2])<1e-6)return!1;var d=c.sv3d.get();if(d[0]=s[0]-a[0],d[1]=s[1]-a[1],d[2]=s[2]-a[2],Math.abs(d[0])<1e-6&&Math.abs(d[1])<1e-6&&Math.abs(d[2])<1e-6)return!1;var p=f[0]*l[0]+f[1]*l[1]+f[2]*l[2],g=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],h=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],m=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],b=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*m-g*g;if(Math.abs(b)<1e-6)return!1;var y=(p*g-h*m)/b,M=(p+g*y)/m;n&&(y=i.clamp(y,0,1),M=i.clamp(M,0,1));var P=c.sv3d.get(),x=c.sv3d.get();return P[0]=a[0]+y*d[0],P[1]=a[1]+y*d[1],P[2]=a[2]+y*d[2],x[0]=u[0]+M*l[0],x[1]=u[1]+M*l[1],x[2]=u[2]+M*l[2],o.tA=y,o.tB=M,o.pA=P,o.pB=x,o.distance2=r.vec3.squaredDistance(P,x),!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=a,t.copy=function(e,t){return void 0===t&&(t=o()),s(e.origin,e.vector,t)},t.fromValues=s,t.fromPoints=function(e,t,n){return void 0===n&&(n=o()),r.vec3.copy(n.origin,e),r.vec3.subtract(n.vector,t,e),n},t.distance2=u,t.distance=function(e,t){return Math.sqrt(u(e,t))},t.projectPoint=function(e,t,n){return v(e,t,0,1,n)},t.projectPointClamp=v,t.closestRayDistance2=function(e,t){if(f(e,a(t.origin,t.direction),!1,l)){var n=l.tA,i=l.pB,o=l.distance2;if(n>=0&&n<=1)return o;if(n<0)return r.vec3.squaredDistance(e.origin,i);if(n>1)return r.vec3.squaredDistance(r.vec3.add(c.sv3d.get(),e.origin,e.vector),i)}return null},t.closestLineSegmentPoint=function(e,t,n){return!!f(e,t,!0,l)&&(r.vec3.copy(n,l.pA),!0)},t.closestLineSegmentDistance2=function(e,t){return f(e,t,!0,l)?l.distance2:null};var l={tA:0,tB:0,pA:r.vec3f64.create(),pB:r.vec3f64.create(),distance2:0},d=new n.ObjectStack(function(){return{origin:null,vector:null}})}.apply(null,r))||(e.exports=i)},2150:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(541),n(38)],void 0===(i=function(e,t,n,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){var i=this;this.itemByteSize=e,this.itemCreate=t,this.bufferPtr=0,this.items=[],this.itemsPtr=0;var c=Math.ceil(r/this.itemByteSize);this.buffer=new ArrayBuffer(c*this.itemByteSize),this.tickHandle=n.before(function(){return i.reset()});for(var o=0;o<c;o++)this.create();this.reset()}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null)},e.prototype.get=function(){return 0===this.itemsPtr&&n(function(){}),this.itemsPtr<this.items.length?this.items[this.itemsPtr++]:(this.growIfNeeded(),this.create())},e.prototype.reset=function(){this.itemsPtr=0},e.prototype.create=function(){var e=this.itemCreate(this.buffer,this.bufferPtr);return this.bufferPtr+=this.itemByteSize,this.items.push(e),this.itemsPtr++,e},e.prototype.growIfNeeded=function(){if(this.bufferPtr+this.itemByteSize>this.buffer.byteLength){var e=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}},e.createVec2f64=function(t){return void 0===t&&(t=c),new e(16,r.vec2f64.createView,t)},e.createVec3f64=function(t){return void 0===t&&(t=c),new e(24,r.vec3f64.createView,t)},e.createVec4f64=function(t){return void 0===t&&(t=c),new e(32,r.vec4f64.createView,t)},e.createMat3f64=function(t){return void 0===t&&(t=c),new e(72,r.mat3f64.createView,t)},e.createMat4f64=function(t){return void 0===t&&(t=c),new e(128,r.mat4f64.createView,t)},e.createQuatf64=function(t){return void 0===t&&(t=c),new e(32,r.quatf64.createView,t)},e}();t.VectorStack=i;var c=4096;t.default=i}.apply(null,r))||(e.exports=i)},2151:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(38),n(1829),n(1987)],void 0===(i=function(e,t,n,r,i){function c(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function o(e,t,n,r,i){return void 0===i&&(i=c()),i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t,n,i){return o(e,t,n,i,r.sv4d.get())},t.wrapAxisAngle=function(e,t){return o(e[0],e[1],e[2],t,r.sv4d.get())},t.copy=function(e,t){return void 0===t&&(t=c()),o(e[0],e[1],e[2],e[3],t)},t.fromValues=o,t.fromAxisAndAngle=function(e,t,r){return void 0===r&&(r=c()),n.vec3.copy(r,e),r[3]=t,r},t.fromPoints=function(e,t,r){return void 0===r&&(r=c()),n.vec3.cross(r,e,t),n.vec3.normalize(r,r),r[3]=i.angle(e,t),r},t.UP=[0,0,1,0]}.apply(null,r))||(e.exports=i)},2152:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(58),n(9),n(1860),n(38),n(92),n(1829),n(1988),n(1986),n(1952),n(1987)],void 0===(i=function(e,t,n,r,i,c,o,a,s,u,v,f){function l(e){return void 0===e&&(e=t.UP),{plane:u.create(e.plane),origin:c.vec3f64.clone(e.origin),basis1:c.vec3f64.clone(e.basis1),basis2:c.vec3f64.clone(e.basis2)}}function d(e,t){return void 0===t&&(t=l()),p(e.origin,e.basis1,e.basis2,t)}function p(e,t,n,r){return void 0===r&&(r=l()),c.vec3.copy(r.origin,e),c.vec3.copy(r.basis1,t),c.vec3.copy(r.basis2,n),u.fromVectorsAndPoint(n,t,e,r.plane),function(e,t){Math.abs(c.vec3.dot(e.basis1,e.basis2)/(c.vec3.length(e.basis1)*c.vec3.length(e.basis2)))>1e-6&&O.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(c.vec3.dot(e.basis1,e.plane))>1e-6&&O.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-c.vec3.dot(e.plane,e.origin)-e.plane[3])>1e-6&&O.warn(t,"Plane offset is not consistent with plane origin")}(r,"fromValues()"),r}function g(e,t,n){e!==n&&d(e,n);var r=c.vec3.scale(a.sv3d.get(),e.plane,t);return c.vec3.add(n.origin,n.origin,r),n.plane[3]-=t,n}function h(e,t){void 0===t&&(t=l());var n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return c.vec3.set(t.origin,e[0]+n,e[1]+r,0),c.vec3.set(t.basis1,n,0,0),c.vec3.set(t.basis2,0,r,0),u.fromValues(0,0,1,0,t.plane),t}function m(e,t,n){return!!u.intersectRay(e.plane,t,n)&&V(e,n)}function b(e,t,n){var r=_.get();j(e,t,r,_.get());for(var i=Number.POSITIVE_INFINITY,s=0,v=E;s<v.length;s++){var f=S(e,v[s],N.get()),l=a.sv3d.get();if(u.intersectLineSegment(r,f,l)){var d=o.directionFromTo(a.sv3d.get(),t.origin,l),p=Math.abs(o.acos(c.vec3.dot(t.direction,d)));p<i&&(i=p,c.vec3.copy(n,l))}}return i===Number.POSITIVE_INFINITY?y(e,t,n):n}function y(e,t,n){if(m(e,t,n))return n;var r=_.get(),i=_.get();j(e,t,r,i);for(var o=Number.POSITIVE_INFINITY,s=0,f=E;s<f.length;s++){var l=S(e,f[s],N.get()),d=a.sv3d.get();if(u.intersectLineSegmentClamp(r,l,d)){var p=v.distance2(t,d);if(!u.isPointInside(i,d))continue;p<o&&(o=p,c.vec3.copy(n,d))}}return P(e,t.origin)<o&&c.vec3.copy(n,t.origin),n}function M(e,t,n){var r=e.origin,i=e.basis1,o=e.basis2,s=c.vec3.subtract(a.sv3d.get(),t,r),u=f.projectPointSignedLength(i,s)/c.vec3.length(i),v=f.projectPointSignedLength(o,s)/c.vec3.length(o),l=f.projectPointSignedLength(e.plane,s);return c.vec3.set(n,u,v,l)}function P(e,t){var n=M(e,t,a.sv3d.get()),r=e.basis1,i=e.basis2,o=c.vec3.length(r),s=c.vec3.length(i),u=Math.max(Math.abs(n[0])-o,0),v=Math.max(Math.abs(n[1])-s,0),f=n[2];return u*u+v*v+f*f}function x(e,t){var n=-e.plane[3];return f.projectPointSignedLength(e.plane,t)-n}function w(e,t,r){switch(t){case 0:c.vec3.copy(r,e.basis1),c.vec3.normalize(r,r);break;case 1:c.vec3.copy(r,e.basis2),c.vec3.normalize(r,r);break;case 2:c.vec3.copy(r,e.plane);break;default:n.neverReached(t)}return r}function V(e,t){var n=c.vec3.subtract(a.sv3d.get(),t,e.origin),r=c.vec3.squaredLength(e.basis1),i=c.vec3.squaredLength(e.basis2),o=c.vec3.dot(e.basis1,n),s=c.vec3.dot(e.basis2,n);return-o-r<0&&o-r<0&&-s-i<0&&s-i<0}function A(e,t){var n=N.get();return c.vec3.copy(n.origin,e.origin),c.vec3.copy(n.vector,t),n}function S(e,t,n){var r=e.basis1,i=e.basis2,o=e.origin,s=c.vec3.scale(a.sv3d.get(),r,t.origin[0]),u=c.vec3.scale(a.sv3d.get(),i,t.origin[1]);c.vec3.add(n.origin,s,u),c.vec3.add(n.origin,n.origin,o);var v=c.vec3.scale(a.sv3d.get(),r,t.direction[0]),f=c.vec3.scale(a.sv3d.get(),i,t.direction[1]);return c.vec3.scale(n.vector,c.vec3.add(v,v,f),2),n}function j(e,t,n,r){var i=e.plane;u.fromVectorsAndPoint(i,t.direction,t.origin,n),u.fromVectorsAndPoint(n,i,t.origin,r)}Object.defineProperty(t,"__esModule",{value:!0});var O=r.getLogger("esri.views.3d.support.geometryUtils.boundedPlane"),I=function(){return function(){this.plane=u.create(),this.origin=c.vec3f64.create(),this.basis1=c.vec3f64.create(),this.basis2=c.vec3f64.create()}}();t.BoundedPlaneClass=I,t.create=l,t.wrap=function(e,t,n){var r=k.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=u.fromVectorsAndPoint(n,t,e,u.wrap(0,0,0,0)),r},t.copy=d,t.fromValues=p,t.elevate=g,t.setExtent=function(e,t,n){return h(t,n),g(n,x(e,e.origin),n),n},t.fromAABoundingRect=h,t.intersectRay=m,t.intersectRayClosestSilhouette=function(e,t,n){if(m(e,t,n))return n;var r=b(e,t,a.sv3d.get());return c.vec3.add(n,t.origin,c.vec3.scale(a.sv3d.get(),t.direction,c.vec3.distance(t.origin,r)/c.vec3.length(t.direction))),n},t.closestPointOnSilhouette=b,t.closestPoint=y,t.projectPoint=function(e,t,n){var r=u.projectPoint(e.plane,t,a.sv3d.get()),i=s.projectPointClamp(A(e,e.basis1),r,-1,1,a.sv3d.get()),o=s.projectPointClamp(A(e,e.basis2),r,-1,1,a.sv3d.get());return c.vec3.subtract(n,c.vec3.add(a.sv3d.get(),i,o),e.origin),n},t.projectPointLocal=M,t.distance2=P,t.distance=function(e,t){return Math.sqrt(P(e,t))},t.distanceToSilhouette=function(e,t){for(var n=Number.NEGATIVE_INFINITY,r=0,i=E;r<i.length;r++){var c=S(e,i[r],N.get()),o=s.distance2(c,t);o>n&&(n=o)}return Math.sqrt(n)},t.extrusionContainsPoint=function(e,t){return u.isPointInside(e.plane,t)&&V(e,t)},t.axisAt=function(e,t,n,r){return w(e,n,r)},t.altitudeAt=x,t.setAltitudeAt=function(e,t,n,r){var i=x(e,t),o=c.vec3.scale(a.sv3d.get(),e.plane,n-i);return c.vec3.add(r,t,o),r},t.transform=function(e,t,n){return e!==n&&d(e,n),c.mat4.invert(B,t),c.mat4.transpose(B,B),c.vec3.transformMat4(n.basis1,e.basis1,B),c.vec3.transformMat4(n.basis2,e.basis2,B),c.vec3.transformMat4(n.plane,e.plane,B),c.vec3.transformMat4(n.origin,e.origin,t),u.setOffsetFromPoint(n.plane,n.origin,n.plane),n},t.UP={plane:u.create(),origin:c.vec3f64.fromValues(0,0,0),basis1:c.vec3f64.fromValues(1,0,0),basis2:c.vec3f64.fromValues(0,1,0)};var _=new i.ObjectStack(u.create),N=new i.ObjectStack(s.create),k=new i.ObjectStack(function(){return{origin:null,basis1:null,basis2:null,plane:null}}),E=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],B=c.mat4f64.create()}.apply(null,r))||(e.exports=i)},2153:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1860),n(38),n(1829),n(2154),n(1986)],void 0===(i=function(e,t,n,r,i,c,o){function a(e){if(e){var t=e.planes,n=e.points;return{planes:[o.create(t[0]),o.create(t[1]),o.create(t[2]),o.create(t[3]),o.create(t[4]),o.create(t[5])],points:[r.vec3f64.clone(n[0]),r.vec3f64.clone(n[1]),r.vec3f64.clone(n[2]),r.vec3f64.clone(n[3]),r.vec3f64.clone(n[4]),r.vec3f64.clone(n[5]),r.vec3f64.clone(n[6]),r.vec3f64.clone(n[7])]}}return{planes:[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()],points:[r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create(),r.vec3f64.create()]}}function s(e,t,n){void 0===n&&(n=a());for(var i=0;i<6;i++)o.copy(e[i],n.planes[i]);for(i=0;i<8;i++)r.vec3.copy(n.points[i],t[i]);return n}function u(e){var t=e.planes,n=e.points;o.fromPoints(n[4],n[0],n[3],t[0]),o.fromPoints(n[1],n[5],n[6],t[1]),o.fromPoints(n[4],n[5],n[1],t[2]),o.fromPoints(n[3],n[2],n[6],t[3]),o.fromPoints(n[0],n[1],n[2],t[4]),o.fromPoints(n[5],n[4],n[7],t[5])}function v(e,t){for(var n=e.planes,r=0;r<6;r++)if(!o.clip(n[r],t))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.copy=function(e,t){return void 0===t&&(t=a()),s(e.planes,e.points,t)},t.fromValues=s,t.fromMatrix=function(e,t,n){void 0===n&&(n=a());var c=n.points,o=r.mat4.multiply(i.sm4d.get(),t,e);r.mat4.invert(o,o);for(var s=0;s<8;++s){var v=r.vec4.transformMat4(i.sv4d.get(),f[s],o);r.vec3.set(c[s],v[0]/v[3],v[1]/v[3],v[2]/v[3])}return u(n),n},t.recomputePlanes=u,t.intersectsSphere=function(e,t){for(var n=e.planes,r=0;r<6;r++)if(o.isSphereFullyInside(n[r],t))return!1;return!0},t.intersectsRay=function(e,t){return v(e,c.fromRay(t,l.get()))},t.intersectsLineSegment=function(e,t,n){return v(e,c.fromLineSegmentAndDirection(t,n,l.get()))},t.intersectsPoint=function(e,t){for(var n=e.planes,r=0;r<6;r++)if(o.signedDistance(n[r],t)>0)return!1;return!0},t.intersectsAABB=function(e,t){for(var n=e.planes,r=0;r<6;r++)if(o.isAABBFullyInside(n[r],t))return!1;return!0},t.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var f=[r.vec4f64.fromValues(-1,-1,-1,1),r.vec4f64.fromValues(1,-1,-1,1),r.vec4f64.fromValues(1,1,-1,1),r.vec4f64.fromValues(-1,1,-1,1),r.vec4f64.fromValues(-1,-1,1,1),r.vec4f64.fromValues(1,-1,1,1),r.vec4f64.fromValues(1,1,1,1),r.vec4f64.fromValues(-1,1,1,1)],l=new n.ObjectStack(c.create)}.apply(null,r))||(e.exports=i)},2154:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1860),n(38),n(1829),n(1952)],void 0===(i=function(e,t,n,r,i,c){function o(e){return e?{ray:c.create(e.ray),c0:e.c0,c1:e.c1}:{ray:c.create(),c0:0,c1:Number.MAX_VALUE}}function a(e,t,n,r){return void 0===r&&(r=o()),c.copy(e,r.ray),r.c0=t,r.c1=n,r}function s(e,t,n){void 0===n&&(n=o());var i=r.vec3.length(e.vector);return c.fromValues(e.origin,t,n.ray),n.c0=0,n.c1=i,n}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,n){var r=u.get();return r.ray=e,r.c0=t,r.c1=n,r},t.copy=function(e,t){return void 0===t&&(t=o()),a(e.ray,e.c0,e.c1,t)},t.fromValues=a,t.fromRay=function(e,t){return void 0===t&&(t=o()),c.copy(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t},t.fromLineSegment=function(e,t){return void 0===t&&(t=o()),s(e,r.vec3.normalize(i.sv3d.get(),e.vector),t)},t.fromLineSegmentAndDirection=s;var u=new n.ObjectStack(function(){return{c0:0,c1:0,ray:null}})}.apply(null,r))||(e.exports=i)},2155:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(58),n(9),n(1860),n(38),n(1571),n(92),n(1829),n(1952)],void 0===(i=function(e,t,n,r,i,c,o,a,s,u){function v(e){return e?{radius:e.radius,center:c.vec3f64.clone(e.center)}:{radius:1,center:c.vec3f64.create()}}function f(e,t){return void 0===t&&(t=v()),l(e.radius,e.center,t)}function l(e,t,n){return void 0===n&&(n=v()),c.vec3.copy(n.center,t),n.radius=e,n}function d(e,t,n){var r=c.vec3.subtract(s.sv3d.get(),t.origin,e.center),i=c.vec3.dot(t.direction,t.direction),o=2*c.vec3.dot(t.direction,r),a=o*o-4*i*(c.vec3.dot(r,r)-e.radius*e.radius);if(a<0)return!1;var u=Math.sqrt(a),v=(-o-u)/(2*i),f=(-o+u)/(2*i);return(v<0||f<v&&f>0)&&(v=f),!(v<0||(n&&c.vec3.add(n,t.origin,c.vec3.scale(s.sv3d.get(),t.direction,v)),0))}function p(e,t,n){var r=s.sv3d.get(),i=s.sm4d.get();c.vec3.cross(r,t.origin,t.direction),c.vec3.cross(n,r,t.origin),c.vec3.scale(n,n,1/c.vec3.length(n)*e.radius);var a=h(e,t.origin),u=o.vector.angle(t.origin,n);return c.mat4.identity(i),c.mat4.rotate(i,i,u+a,r),c.vec3.transformMat4(n,n,i),n}function g(e,t,n){var r=c.vec3.subtract(s.sv3d.get(),t,e.center),i=c.vec3.scale(s.sv3d.get(),r,e.radius/c.vec3.length(r));return c.vec3.add(n,i,e.center)}function h(e,t){var n=c.vec3.subtract(s.sv3d.get(),t,e.center),r=c.vec3.length(n),i=e.radius+Math.abs(e.radius-r);return a.acos(e.radius/i)}function m(e,t,r,i){var o=c.vec3.subtract(s.sv3d.get(),t,e.center);switch(r){case 0:var u=(v=a.cartesianToSpherical(o,s.sv3d.get()))[2];return c.vec3.set(i,-Math.sin(u),Math.cos(u),0);case 1:var v,f=(v=a.cartesianToSpherical(o,s.sv3d.get()))[1],l=(u=v[2],Math.sin(f));return c.vec3.set(i,-l*Math.cos(u),-l*Math.sin(u),Math.cos(f));case 2:return c.vec3.normalize(i,o);default:n.neverReached(r)}}function b(e,t){var n=c.vec3.subtract(s.sv3d.get(),t,e.center);return c.vec3.length(n)-e.radius}Object.defineProperty(t,"__esModule",{value:!0});var y=r.getLogger("esri.views.3d.support.geometryUtils.sphere");t.create=v,t.wrap=function(e,t){var n=M.get();return n.radius=e,n.center=t||x,n},t.copy=f,t.fromValues=l,t.elevate=function(e,t,n){return e!==n&&c.vec3.copy(n.center,e.center),n.radius=e.radius+t,n},t.setExtent=function(e,t,n){return y.error("sphere.setExtent is not yet supported"),e===n?n:f(e,n)},t.intersectRay=d,t.intersectScreen=function(e,t,n,r){return d(e,u.fromScreenAtEye(t,n,P),r)},t.intersectsRay=function(e,t){return d(e,t,null)},t.intersectRayClosestSilhouette=function(e,t,n){if(d(e,t,n))return n;var r=p(e,t,s.sv3d.get());return c.vec3.add(n,t.origin,c.vec3.scale(s.sv3d.get(),t.direction,c.vec3.distance(t.origin,r)/c.vec3.length(t.direction))),n},t.closestPointOnSilhouette=p,t.closestPoint=function(e,t,n){return d(e,t,n)?n:(u.closestPoint(t,e.center,n),g(e,n,n))},t.projectPoint=g,t.distanceToSilhouette=function(e,t){var n=c.vec3.subtract(s.sv3d.get(),t,e.center),r=c.vec3.squaredLength(n),i=e.radius*e.radius;return Math.sqrt(Math.abs(r-i))},t.angleToSilhouette=h,t.axisAt=m,t.altitudeAt=b,t.setAltitudeAt=function(e,t,n,r){var i=b(e,t),o=m(e,t,2,s.sv3d.get()),a=c.vec3.scale(s.sv3d.get(),o,n-i);return c.vec3.add(r,t,a),r};var M=new i.ObjectStack(function(){return{center:null,radius:0}}),P=u.create(),x=c.vec3f64.create();Object.freeze(x)}.apply(null,r))||(e.exports=i)},2156:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1860),n(38),n(1829),n(1988)],void 0===(i=function(e,t,n,r,i,c){function o(e){return e?{p0:r.vec3f64.clone(e.p0),p1:r.vec3f64.clone(e.p1),p2:r.vec3f64.clone(e.p2)}:{p0:r.vec3f64.create(),p1:r.vec3f64.create(),p2:r.vec3f64.create()}}function a(e,t,n,i){return void 0===i&&(i=o()),r.vec3.copy(i.p0,e),r.vec3.copy(i.p1,t),r.vec3.copy(i.p2,n),i}function s(e,t,n){var i=r.vec2.distance(e,t),c=r.vec2.distance(t,n),o=r.vec2.distance(n,e),a=(i+c+o)/2,s=a*(a-i)*(a-c)*(a-o);return s<=0?0:Math.sqrt(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,n){var r=v.get();return r.p0=e,r.p1=t,r.p2=n,r},t.copy=function(e,t){return void 0===t&&(t=o()),a(e.p0,e.p1,e.p2,t)},t.fromValues=a,t.distance2=function(e,t){var n=e.p0,o=e.p1,a=e.p2,s=r.vec3.subtract(i.sv3d.get(),o,n),v=r.vec3.subtract(i.sv3d.get(),a,o),f=r.vec3.subtract(i.sv3d.get(),n,a),l=r.vec3.subtract(i.sv3d.get(),t,n),d=r.vec3.subtract(i.sv3d.get(),t,o),p=r.vec3.subtract(i.sv3d.get(),t,a),g=r.vec3.cross(s,s,f),h=r.vec3.dot(r.vec3.cross(i.sv3d.get(),s,g),l),m=r.vec3.dot(r.vec3.cross(i.sv3d.get(),v,g),d),b=r.vec3.dot(r.vec3.cross(i.sv3d.get(),f,g),p);if(h>0&&m>0&&b>0){var y=r.vec3.dot(g,l);return y*y/r.vec3.dot(g,g)}var M=c.distance2(c.fromValues(n,s,u.get()),t),P=c.distance2(c.fromValues(o,v,u.get()),t),x=c.distance2(c.fromValues(a,f,u.get()),t);return Math.min(M,P,x)},t.areaPoints2d=s,t.area2d=function(e){return s(e.p0,e.p1,e.p2)};var u=new n.ObjectStack(c.create),v=new n.ObjectStack(function(){return{p0:null,p1:null,p2:null}})}.apply(null,r))||(e.exports=i)}}]);