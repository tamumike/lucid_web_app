(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/webgl/BufferObject":1564,"esri/views/webgl/VertexArrayObject":1567,"esri/views/webgl/Util":1569,"esri/views/webgl/programUtils":1573,"esri/views/3d/support/buffer/typedArrayUtil":1583,"esri/core/HandleOwner":1602,"esri/views/webgl/Program":1647,"esri/views/webgl/ShaderCompiler":1945,"esri/views/webgl/ShaderTranspiler":2096,"esri/views/webgl/reservedWordsGLSL3":2097,"esri/views/webgl/lib/glsl-tokenizer/string":2098,"esri/views/webgl/lib/glsl-tokenizer/index":2099,"esri/views/webgl/lib/glsl-tokenizer/lib/literals":2100,"esri/views/webgl/lib/glsl-tokenizer/lib/operators":2101,"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":2102})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1564:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(19),r(1583)],void 0===(n=function(e,t,r,i){return function(){function e(t,i,n,o,a){this._context=null,this._glName=null,this._bufferType=void 0,this._usage=35044,this._size=-1,this._indexType=void 0,this._context=t,this._bufferType=i,this._usage=n,this._id=e._nextId++,this._glName=this._context.gl.createBuffer(),r("esri-webgl-debug")&&t.instanceCounter.incrementCount(1),o&&this.setData(o,a)}return e.createIndex=function(t,r,i,n){return new e(t,34963,r,i,n)},e.createVertex=function(t,r,i){return new e(t,34962,r,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)},e.prototype.setData=function(e,t){if(e){if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{var r=e.byteLength;i.isUint16Array(e)&&(r/=2,this._indexType=5123),i.isUint32Array(e)&&(r/=4,this._indexType=5125),this._size=r}var n=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this._bufferType,e,this._usage),this._context.bindVAO(n)}},e.prototype.setSubData=function(e,t,r,n){if(void 0===t&&(t=0),void 0===r&&(r=0),e){(t<0||t>=this._size)&&console.error("offset is out of range!");var o=t,a=r,s=n,u=e.byteLength;i.isUint16Array(e)&&(u/=2,o*=2,a*=2,s*=2),i.isUint32Array(e)&&(u/=4,o*=4,a*=4,s*=4),void 0===n&&(n=u-1),r>=n&&console.error("end must be bigger than start!"),t+r-n>this._size&&console.error("An attempt to write beyond the end of the buffer!");var l=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);var c=this._context.gl,f=ArrayBuffer.isView(e)?e.buffer:e;c.bufferSubData(this._bufferType,o,f.slice(a,s)),this._context.bindVAO(l)}},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1567:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(19),r(1569)],void 0===(n=function(e,t,r,i){return function(){function e(t,i,n,o,a){this._context=null,this._glName=null,this._layout=null,this._locations=null,this._buffers=void 0,this._indexBuffer=void 0,this._initialized=!1,this._context=t,this._layout=n,this._buffers=o,this._locations=i,a&&(this._indexBuffer=a),this._id=e._nextId++,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(2)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var e=this;return Object.keys(this._buffers).reduce(function(t,r){return t+e._buffers[r].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),e.prototype.dispose=function(e){if(void 0===e&&(e=!0),this._context){var t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(var i in this._buffers)this._buffers[i].dispose(),delete this._buffers[i];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2),this._context=null}},e.prototype.initialize=function(){if(!this._initialized){var e=this._context.capabilities.vao;if(e){var t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}},e.prototype.bind=function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())},e.prototype._bindLayout=function(){var e=this._buffers,t=!!this._context.capabilities.vao,r=this._layout,n=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");var o=this._context.gl;for(var a in e){var s=e[a];s||console.error("Vertex buffer is uninitialized!");var u=r[a];u||console.error("Vertex element descriptor is empty!"),i.bindVertexBufferLayout(this._context,this._locations,s,u)}n&&(t?o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,n.glName):this._context.bindBuffer(n))},e.prototype.unbind=function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()},e.prototype._unbindLayout=function(){var e=this._buffers,t=this._layout;for(var r in e||console.error("Vertex buffer dictionary is empty!"),e){var n=e[r];n||console.error("Vertex buffer is uninitialized!");var o=t[r];i.unbindVertexBufferLayout(this._context,this._locations,n,o)}var a=this._indexBuffer;a&&this._context.unbindBuffer(a.bufferType)},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1569:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10),r(8)],void 0===(n=function(e,t,r,i){function n(e){return e[0].stride}function o(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1;default:throw new Error("Unknown data type")}}Object.defineProperty(t,"__esModule",{value:!0}),t.vertexCount=function(e,t){return e.vertexBuffers[t].size/n(e.layout[t])},t.getStride=n,t.getBytesPerElement=o,t.addDescriptor=function(e,t,r,i,n,a){var s=o(i);if(e.length>0){var u=e[0].stride,l=u+s*r;e.forEach(function(e){return e.stride=l}),e.push({name:t,count:r,type:i,offset:u,stride:l,normalized:n,divisor:a})}else e.push({name:t,count:r,type:i,offset:0,stride:s*r,normalized:n,divisor:a})},t.assertCompatibleVertexAttributeLocations=function(e,t){var r=e.locations===t.locations;return r||console.error("VertexAttributeLocations are incompatible"),r},t.hasAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return!0;return!1},t.findAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},t.copyFramebufferToTexture=function(e,t,r,i,n){void 0===n&&(n=0);var o=e.getBoundFramebufferObject(),a=e.getBoundTexture(0);e.bindFramebuffer(t),e.bindTexture(r,0),e.gl.copyTexImage2D(e.gl.TEXTURE_2D,n,r.descriptor.pixelFormat,i[0],i[1],i[2],i[3],0),e.gl.flush(),e.bindFramebuffer(o),e.bindTexture(a,0)},t.assert=function(e,t){if(!e)throw new i(t)},t.setBaseInstanceOffset=function(e,t){var i={};for(var n in e)i[n]=e[n].map(function(e){return e.divisor?r({},e,{baseInstance:t}):e});return i},t.bindVertexBufferLayout=function(e,t,r,i,n){var o=e.gl,a=e.capabilities.instancing;e.bindBuffer(r),i.forEach(function(e){var r=t[e.name],i=(n||(0+e.baseInstance?e.baseInstance:0))*e.stride;if(void 0===r&&console.error("There is no location for vertex attribute '"+e.name+"' defined."),e.baseInstance&&!e.divisor&&console.error("Vertex attribute '"+e.name+"' uses baseInstanceOffset without divisor."),e.count<=4)o.vertexAttribPointer(r,e.count,e.type,e.normalized,e.stride,e.offset+i),o.enableVertexAttribArray(r),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r,e.divisor);else if(9===e.count)for(var s=0;s<3;s++)o.vertexAttribPointer(r+s,3,e.type,e.normalized,e.stride,e.offset+12*s+i),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else if(16===e.count)for(s=0;s<4;s++)o.vertexAttribPointer(r+s,4,e.type,e.normalized,e.stride,e.offset+16*s+i),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)})},t.unbindVertexBufferLayout=function(e,t,r,i){var n=e.gl,o=e.capabilities.instancing;e.bindBuffer(r),i.forEach(function(e){var r=t[e.name];if(e.count<=4)n.disableVertexAttribArray(r),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r,0);else if(9===e.count)for(var i=0;i<3;i++)n.disableVertexAttribArray(r+i),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+i,0);else if(16===e.count)for(i=0;i<4;i++)n.disableVertexAttribArray(r+i),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+i,0);else console.error("Unsupported vertex attribute element count: "+e.count)}),e.unbindBuffer(34962)}}.apply(null,i))||(e.exports=n)},1573:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1647)],void 0===(n=function(e,t,r){function i(e,t,i){i=i||{};var n="function"==typeof t.shaders?t.shaders(i):t.shaders;return new r(e,n.vertexShader,n.fragmentShader,t.attributes)}Object.defineProperty(t,"__esModule",{value:!0}),t.glslifyDefineMap=function(e){var t="";for(var r in e){var i=e[r];if("boolean"==typeof i)i&&(t+="#define "+r+"\n");else if("number"==typeof i)t+="#define "+r+" "+i.toFixed()+"\n";else if("object"==typeof i){var n=i.options,o=0;for(var a in n)t+="#define "+n[a]+" "+(o++).toFixed()+"\n";t+="#define "+r+" "+n[i.value]+"\n"}}return t};var n=function(){function e(e){this._programCacheByTemplate=new Map,this._rctx=e}return e.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(e){e.programs.forEach(function(e){e.dispose()})}),this._programCacheByTemplate=null},e.prototype.getProgram=function(e,t){var r=this;return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,function(t){return i(r._rctx,e,t)}),this.getProgramTemplateInstance(e,t)},e.prototype.addProgramTemplate=function(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})},e.prototype.getProgramTemplateInstance=function(e,t){var r=this._programCacheByTemplate.get(e);if(r){var i=t?JSON.stringify(t):"default";if(!r.programs.has(i)){var n=r.constructor(t);r.programs.set(i,n)}return r.programs.get(i)}return null},e}();t.ProgramCache=n,t.createProgram=i}.apply(null,i))||(e.exports=n)},1583:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)},t.slice=function(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var i=Math.max(0,r-t),n=new(0,e.constructor)(i),o=0;o<i;o++)n[o]=e[t+o];return n},t.isArrayBuffer=function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name},t.isInt8Array=function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name},t.isUint8Array=function(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name},t.isInt16Array=function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name},t.isUint16Array=function(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name},t.isInt32Array=function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name},t.isUint32Array=function(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name},t.isFloat32Array=function(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name},t.isFloat64Array=function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name},t.toArray=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}}.apply(null,i))||(e.exports=n)},1602:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(0),r(4),r(13),r(1)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.call(this)||this;return i.handles=new o,i}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},i([a.property({readOnly:!0})],t.prototype,"handles",void 0),i([a.subclass("esri.core.HandleOwner")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},1647:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(19),r(2096)],void 0===(n=function(e,t,r,i){var n=r("dojo-debug-messages");return function(){function e(t,i,n,o,a){if(void 0===a&&(a={}),this._context=null,this._glName=null,this._locations={},this._id=void 0,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===i.length&&console.error("Shaders source should not be empty!"),this._context=t,this._vertexShaderSource=i,this._fragmentShaderSource=n,Array.isArray(a))for(var s=0,u=a;s<u.length;s++){var l=u[s];this._defines[l]="1"}else this._defines=a;this._id=e._nextId++,this._locations=o,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(3)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),e.prototype.getDefine=function(e){return this._defines[e]},e.prototype.dispose=function(){if(this._context){var e=this._context.gl;if(this._vShader){var t=this._vShader;e.deleteShader(t),this._vShader=null}if(this._fShader){var i=this._fShader;e.deleteShader(i),this._fShader=null}this._glName&&(e.deleteProgram(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3),this._context=null}},e.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");var e=this._context.gl,t=e.createProgram();for(var r in e.attachShader(t,this._vShader),e.attachShader(t,this._fShader),this._locations){var i=this._locations[r];e.bindAttribLocation(t,i,r)}e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+e.getProgramParameter(t,e.VALIDATE_STATUS)+", gl error ["+e.getError()+"]infoLog: "+e.getProgramInfoLog(t)),this._glName=t,this._initialized=!0}},e.prototype.getUniformLocation=function(e){return this.initialize(),void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]},e.prototype.hasUniform=function(e){return null!==this.getUniformLocation(e)},e.prototype.getAttribLocation=function(e){return this.initialize(),void 0===this._nameToAttribLocation[e]&&(this._nameToAttribLocation[e]=this._context.gl.getAttribLocation(this._glName,e)),this._nameToAttribLocation[e]},e.prototype.setUniform1i=function(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)},e.prototype.setUniform1f=function(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)},e.prototype.setUniform1fv=function(t,r){var i=this._nameToUniform1v[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform1v[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniform2f=function(e,t,r){var i=this._nameToUniform2[e];void 0!==i&&t===i[0]&&r===i[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(e),t,r),void 0===i?this._nameToUniform2[e]=[t,r]:(i[0]=t,i[1]=r))},e.prototype.setUniform2fv=function(t,r){n&&r.length%2!=0&&console.error("Value array must have even number of elements!");var i=this._nameToUniform2[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform2[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniform3f=function(e,t,r,i){var n=this._nameToUniform3[e];void 0!==n&&t===n[0]&&r===n[1]&&i===n[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(e),t,r,i),void 0===n?this._nameToUniform3[e]=[t,r,i]:(n[0]=t,n[1]=r,n[2]=i))},e.prototype.setUniform3fv=function(t,r){n&&r.length%3!=0&&console.error("Value array must contain sets of three values!");var i=this._nameToUniform3[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform3[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniform4f=function(e,t,r,i,n){var o=this._nameToUniform4[e];void 0!==o&&t===o[0]&&r===o[1]&&i===o[2]&&n===o[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(e),t,r,i,n),void 0===o?this._nameToUniform4[e]=[t,r,i,n]:(o[0]=t,o[1]=r,o[2]=i,o[3]=n))},e.prototype.setUniform4fv=function(t,r){n&&r.length%4!=0&&console.error("Value array must contain sets of four values!");var i=this._nameToUniform4[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform4[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniformMatrix3fv=function(t,r,i){void 0===i&&(i=!1),n&&r.length%9!=0&&console.error("Matrix array must contain sets ot 9 elements!");var o=this._nameToUniformMatrix3[t];void 0!==o&&(9===o.length?e._matrix3Equal(o,r):e._arraysEqual(r,o))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),i,r),void 0===o?this._nameToUniformMatrix3[t]=e._arrayCopy(r):e._arrayAssign(r,o))},e.prototype.setUniformMatrix4fv=function(t,r,i){void 0===i&&(i=!1),n&&r.length%16!=0&&console.error("Matrix array must contain sets ot 16 elements!");var o=this._nameToUniformMatrix4[t];void 0!==o&&(16===o.length?e._matrix4Equal(o,r):e._arraysEqual(r,o))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),i,r),void 0===o?this._nameToUniformMatrix4[t]=e._arrayCopy(r):e._arrayAssign(r,o))},e._padToThree=function(e){var t=e.toString();return e<1e3&&(t=("  "+e).slice(-3)),t},e.prototype._addLineNumbers=function(t){var r=2;return t.replace(/\n/g,function(){return"\n"+e._padToThree(r++)+":"})},e.prototype._loadShader=function(e){var t=35633===e,r=t?this._vertexShaderSource:this._fragmentShaderSource,n=r,o="";for(var a in this._defines)o+="#define "+a+" "+this._defines[a]+"\n";n=o+n,"webgl2"===this._context.contextVersion&&(n=i.transpileShader(n,t?"vertex":"fragment"));var s=this._context.gl,u=s.createShader(e);return s.shaderSource(u,n),s.compileShader(u),s.getShaderParameter(u,s.COMPILE_STATUS)||(console.error(s.getShaderInfoLog(u)),console.error(this._addLineNumbers(n)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),console.log(r))),u},e._matrix4Equal=function(e,t){return n&&(16===e.length&&16===t.length||console.error("Matrix object must contain 16 elements!")),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e._matrix3Equal=function(e,t){return n&&(9===e.length&&9===t.length||console.error("Matrix object must contain 16 elements!")),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},e._arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},e._arrayCopy=function(e){for(var t=[],r=0;r<e.length;++r)t.push(e[r]);return t},e._arrayAssign=function(e,t){for(var r=0;r<e.length;++r)t[r]=e[r]},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1945:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this.readFile=e}return e.prototype.resolveIncludes=function(e){return this.resolve(e)},e.prototype.resolve=function(e,t){var r=this;if(void 0===t&&(t=new Map),t.has(e))return t.get(e);var i=this.read(e);if(!i)throw new Error("cannot find shader file "+e);for(var n=/^\h?#include\s+<(\S+)>\h?/gm,o=n.exec(i),a=[];null!=o;)a.push({path:o[1],start:o.index,length:o[0].length}),o=n.exec(i);var s=0,u="";return a.forEach(function(e){u+=i.slice(s,e.start),u+=t.has(e.path)?"":r.resolve(e.path,t),s=e.start+e.length}),u+=i.slice(s),t.set(e,u),u},e.prototype.read=function(e){return this.readFile(e)},e}()}.apply(null,i))||(e.exports=n)},2096:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2097),r(2098)],void 0===(n=function(e,t,r,i){function n(e){return i(e)}function o(e,t){for(var r=t-1;r>=0;r--){var i=e[r];if("whitespace"!==i.type&&"block-comment"!==i.type){if("keyword"!==i.type)break;if("attribute"===i.data||"in"===i.data)return!0}}return!1}function a(e,t,r,i){i=i||r;for(var n=0,o=e;n<o.length;n++){var s=o[n];if("ident"===s.type&&s.data===r)return i in t?t[i]++:t[i]=0,a(e,t,i+"_"+t[i],i)}return r}function s(e,t,r,i){void 0===i&&(i="lowp"),function(e,t,r){function i(e,t){for(var r=t;r<e.length;r++){var i=e[r];if("operator"===i.type&&";"===i.data)return r}return null}void 0===r&&(r="afterVersion");var n={data:"\n",type:"whitespace"},o=function(t){return t<e.length&&/[^\r\n]$/.test(e[t].data)},a=function(e){for(var t=-1,n=0,o=-1,a=0;a<e.length;a++){var s=e[a];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++n:s.data.match(/\#endif\s*.*/)&&--n),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===s.type&&/^#version/.test(s.data)&&(o=Math.max(o,a)),"afterPrecision"===r&&"keyword"===s.type&&"precision"===s.data){var u=i(e,a);if(null===u)throw new Error("precision statement not followed by any semicolons!");o=Math.max(o,u)}t<o&&0===n&&(t=a)}return t+1}(e);o(a-1)&&e.splice(a++,0,n);for(var s=0,u=t;s<u.length;s++){var l=u[s];e.splice(a++,0,l)}o(a-1)&&o(a)&&e.splice(a,0,n)}(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}Object.defineProperty(t,"__esModule",{value:!0});var u=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];t.transpileShader=function(e,t){var i=n(e);if("300 es"===function(e,t,r){void 0===t&&(t="100"),void 0===r&&(r="300 es");for(var i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,n=0,o=e;n<o.length;n++){var a=o[n];if("preprocessor"===a.type){var s=i.exec(a.data);if(s){var u=s[1].replace(/\s\s+/g," ");if(u===r)return u;if(u===t)return a.data="#version "+r,t;throw new Error("unknown glsl version: "+u)}}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(i,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var l=null,c=null,f={},d={},h=0;h<i.length;++h)switch((g=i[h]).type){case"keyword":"vertex"===t&&"attribute"===g.data?g.data="in":"varying"===g.data&&(g.data="vertex"===t?"out":"in");break;case"builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(g.data.trim())&&(g.data=g.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===t&&"gl_FragColor"===g.data?(l||s(i,l=a(i,f,"fragColor"),"vec4"),g.data=l):"fragment"===t&&"gl_FragDepthEXT"===g.data&&(c||(c=a(i,f,"gl_FragDepth")),g.data=c);break;case"ident":if(r.indexOf(g.data)>=0){if("vertex"===t&&o(i,h))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");g.data in d||(d[g.data]=a(i,f,g.data)),g.data=d[g.data]}}for(h=i.length-1;h>=0;--h){var g;if("preprocessor"===(g=i[h]).type){var p=g.data.match(/\#extension\s+(.*)\:/);if(p&&p[1]&&u.indexOf(p[1].trim())>=0){var m=i[h+1];i.splice(h,m&&"whitespace"===m.type?2:1)}var _=g.data.match(/\#ifdef\s+(.*)/);_&&_[1]&&u.indexOf(_[1].trim())>=0&&(g.data="#if 1");var v=g.data.match(/\#ifndef\s+(.*)/);v&&v[1]&&u.indexOf(v[1].trim())>=0&&(g.data="#if 0")}}return function(e){return e.map(function(e){return"eof"!==e.type?e.data:""}).join("")}(i)}}.apply(null,i))||(e.exports=n)},2097:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]}.apply(null,i))||(e.exports=n)},2098:function(e,t,r){var i,n;i=[r(2099)],void 0===(n=function(e){"use strict;";return function(t){var r=e(),i=[];return(i=i.concat(r(t))).concat(r(null))}}.apply(null,i))||(e.exports=n)},2099:function(e,t,r){var i,n;i=[r(2100),r(2101),r(2102)],void 0===(n=function(e,t,r){"use strict;";var i=999,n=9999,o=0,a=1,s=2,u=3,l=4,c=5,f=6,d=7,h=8,g=9,p=10,m=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];return function(){function v(e){e.length&&C.push({type:_[S],data:e,position:E,line:L,column:j})}function x(){return"\r"!==w&&"\n"!==w||"\\"===A?(D.push(w),A=w,U+1):(v(D.join("")),S=i,U)}function y(){if("."===A&&/\d/.test(w))return S=c,U;if("/"===A&&"*"===w)return S=o,U;if("/"===A&&"/"===w)return S=a,U;if("."===w&&D.length){for(;b(D););return S=c,U}if(";"===w||")"===w||"("===w){if(D.length)for(;b(D););return v(w),S=i,U+1}var e=2===D.length&&"="!==w;if(/[\w_\d\s]/.test(w)||e){for(;b(D););return S=i,U}return D.push(w),A=w,U+1}function b(e){for(var r,i,n=0;;){if(r=t.indexOf(e.slice(0,e.length+n).join("")),i=t[r],-1===r){if(n--+e.length>0)continue;i=e.slice(0,1).join("")}return v(i),E+=i.length,(D=D.slice(i.length)).length}}function T(){if(/[^\d\w_]/.test(w)){var t=D.join("");return S=e.indexOf(t)>-1?h:r.indexOf(t)>-1?d:f,v(D.join("")),S=i,U}return D.push(w),A=w,U+1}var w,A,P,U=0,M=0,S=i,D=[],C=[],L=1,j=0,E=0,B=!1,O=!1,V="";return function(e){return C=[],null!==e?function(e){U=0,P=(V+=e).length;for(var t;w=V[U],U<P;){switch(t=U,S){case o:U="/"===w&&"*"===A?(D.push(w),v(D.join("")),S=i,U+1):(D.push(w),A=w,U+1);break;case a:case s:U=x();break;case u:U=y();break;case l:U="."===w?(D.push(w),S=c,A=w,U+1):/[eE]/.test(w)?(D.push(w),S=c,A=w,U+1):"x"===w&&1===D.length&&"0"===D[0]?(S=m,D.push(w),A=w,U+1):/[^\d]/.test(w)?(v(D.join("")),S=i,U):(D.push(w),A=w,U+1);break;case m:U=/[^a-fA-F0-9]/.test(w)?(v(D.join("")),S=i,U):(D.push(w),A=w,U+1);break;case c:"f"===w&&(D.push(w),A=w,U+=1),U=/[eE]/.test(w)?(D.push(w),A=w,U+1):"-"===w&&/[eE]/.test(A)?(D.push(w),A=w,U+1):/[^\d]/.test(w)?(v(D.join("")),S=i,U):(D.push(w),A=w,U+1);break;case n:U=T();break;case g:U=/[^\s]/g.test(w)?(v(D.join("")),S=i,U):(D.push(w),A=w,U+1);break;case i:D=D.length?[]:D,U="/"===A&&"*"===w?(E=M+U-1,S=o,A=w,U+1):"/"===A&&"/"===w?(E=M+U-1,S=a,A=w,U+1):"#"===w?(S=s,E=M+U,U):/\s/.test(w)?(S=g,E=M+U,U):(B=/\d/.test(w),O=/[^\w_]/.test(w),E=M+U,S=B?l:O?u:n,U)}if(t!==U)switch(V[t]){case"\n":j=0,++L;break;default:++j}}return M+=U,V=V.slice(U),C}(e.replace?e.replace(/\r\n/g,"\n"):e):(D.length&&v(D.join("")),S=p,v("(eof)"),C)}}}.apply(null,i))||(e.exports=n)},2100:function(e,t,r){var i;void 0===(i=function(){"use strict";return["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]}.apply(null,[]))||(e.exports=i)},2101:function(e,t,r){var i;void 0===(i=function(){"use strict;";return["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]}.apply(null,[]))||(e.exports=i)},2102:function(e,t,r){var i;void 0===(i=function(){"use strict";return["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]}.apply(null,[]))||(e.exports=i)}}]);